
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.ejabberd.im/admin/configuration/modules/">
      
      
        <link rel="prev" href="../toplevel/">
      
      
        <link rel="next" href="../../guide/">
      
      
      <link rel="icon" href="../../../assets/img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Modules Options - ejabberd Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22m10.5%2024-1.485-9.007-8.961-1.738L8.16%209.06%207.045%200l6.495%206.414%208.271-3.861-4.093%208.16%206.228%206.673-9.024-1.372z%22/%3E%3C/svg%3E');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M3%2021v-3.71l7.78-4.49%203.77%202.2L21%2011.25V21zM21%208.94l-6.45%203.73-3.77-2.17L3%2015v-2.21l7.78-4.49%203.77%202.2L21%206.75z%22/%3E%3C/svg%3E');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/mdversion.css">
    
      <link rel="stylesheet" href="../../../assets/css/notes.css">
    
      <link rel="stylesheet" href="../../../assets/css/status.css">
    
      <link rel="stylesheet" href="../../../assets/css/headers-underline.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#modules-options" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="ejabberd Docs" class="md-header__button md-logo" aria-label="ejabberd Docs" data-md-component="logo">
      
  <img src="../../../assets/img/logo-docs.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ejabberd Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Modules Options
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/processone/ejabberd" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    processone/ejabberd
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../get-started/" class="md-tabs__link">
          
  
  
    
  
  Overview

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../install/" class="md-tabs__link">
          
  
  
    
  
  Install

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  Configure

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../guide/" class="md-tabs__link">
          
  
  
    
  
  Advanced

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../developer/" class="md-tabs__link">
          
  
  
    
  
  Development

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../developer/ejabberd-api/" class="md-tabs__link">
          
  
  
    
  
  API

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../archive/" class="md-tabs__link">
          
  
  
    
  
  Archive

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../roadmap/" class="md-tabs__link">
          
  
  
    
  
  Roadmap

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ejabberd Docs" class="md-nav__button md-logo" aria-label="ejabberd Docs" data-md-component="logo">
      
  <img src="../../../assets/img/logo-docs.png" alt="logo">

    </a>
    ejabberd Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/processone/ejabberd" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    processone/ejabberd
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../get-started/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Features
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ejabberd-faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../use-cases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use Cases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../COPYING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../SECURITY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../README-GIT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../install/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Install
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Install
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CONTAINER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Containers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/binary-installer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Binary Installers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/os-package/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operating System Package
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/source/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compile Source Code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/homebrew/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Homebrew
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/install-osx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mac OSX
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/next-steps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Next Steps
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Configure
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Configure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../file-format/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    File Format
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Databases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ldap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LDAP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label=" ">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
       
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mod_adhoc" class="md-nav__link">
    <span class="md-ellipsis">
      mod_adhoc
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_adhoc_api" class="md-nav__link">
    <span class="md-ellipsis">
      mod_adhoc_api 🟤
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_admin_extra" class="md-nav__link">
    <span class="md-ellipsis">
      mod_admin_extra
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_admin_update_sql" class="md-nav__link">
    <span class="md-ellipsis">
      mod_admin_update_sql
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_announce" class="md-nav__link">
    <span class="md-ellipsis">
      mod_announce
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_auth_fast" class="md-nav__link">
    <span class="md-ellipsis">
      mod_auth_fast
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_avatar" class="md-nav__link">
    <span class="md-ellipsis">
      mod_avatar
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_block_strangers" class="md-nav__link">
    <span class="md-ellipsis">
      mod_block_strangers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_blocking" class="md-nav__link">
    <span class="md-ellipsis">
      mod_blocking
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_bosh" class="md-nav__link">
    <span class="md-ellipsis">
      mod_bosh
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_caps" class="md-nav__link">
    <span class="md-ellipsis">
      mod_caps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_carboncopy" class="md-nav__link">
    <span class="md-ellipsis">
      mod_carboncopy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_client_state" class="md-nav__link">
    <span class="md-ellipsis">
      mod_client_state
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_configure" class="md-nav__link">
    <span class="md-ellipsis">
      mod_configure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_conversejs" class="md-nav__link">
    <span class="md-ellipsis">
      mod_conversejs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_delegation" class="md-nav__link">
    <span class="md-ellipsis">
      mod_delegation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_disco" class="md-nav__link">
    <span class="md-ellipsis">
      mod_disco
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_fail2ban" class="md-nav__link">
    <span class="md-ellipsis">
      mod_fail2ban
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_host_meta" class="md-nav__link">
    <span class="md-ellipsis">
      mod_host_meta
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_http_api" class="md-nav__link">
    <span class="md-ellipsis">
      mod_http_api
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_http_fileserver" class="md-nav__link">
    <span class="md-ellipsis">
      mod_http_fileserver
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_http_upload" class="md-nav__link">
    <span class="md-ellipsis">
      mod_http_upload
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_http_upload_quota" class="md-nav__link">
    <span class="md-ellipsis">
      mod_http_upload_quota
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_jidprep" class="md-nav__link">
    <span class="md-ellipsis">
      mod_jidprep
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_last" class="md-nav__link">
    <span class="md-ellipsis">
      mod_last
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_legacy_auth" class="md-nav__link">
    <span class="md-ellipsis">
      mod_legacy_auth
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_mam" class="md-nav__link">
    <span class="md-ellipsis">
      mod_mam
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_matrix_gw" class="md-nav__link">
    <span class="md-ellipsis">
      mod_matrix_gw 🟤
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      mod_metrics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_mix" class="md-nav__link">
    <span class="md-ellipsis">
      mod_mix
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_mix_pam" class="md-nav__link">
    <span class="md-ellipsis">
      mod_mix_pam
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_mqtt" class="md-nav__link">
    <span class="md-ellipsis">
      mod_mqtt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_mqtt_bridge" class="md-nav__link">
    <span class="md-ellipsis">
      mod_mqtt_bridge
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_muc" class="md-nav__link">
    <span class="md-ellipsis">
      mod_muc
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_muc_admin" class="md-nav__link">
    <span class="md-ellipsis">
      mod_muc_admin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_muc_log" class="md-nav__link">
    <span class="md-ellipsis">
      mod_muc_log
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_muc_occupantid" class="md-nav__link">
    <span class="md-ellipsis">
      mod_muc_occupantid
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_muc_rtbl" class="md-nav__link">
    <span class="md-ellipsis">
      mod_muc_rtbl
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_multicast" class="md-nav__link">
    <span class="md-ellipsis">
      mod_multicast
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_offline" class="md-nav__link">
    <span class="md-ellipsis">
      mod_offline
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_ping" class="md-nav__link">
    <span class="md-ellipsis">
      mod_ping
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_pres_counter" class="md-nav__link">
    <span class="md-ellipsis">
      mod_pres_counter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_privacy" class="md-nav__link">
    <span class="md-ellipsis">
      mod_privacy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_private" class="md-nav__link">
    <span class="md-ellipsis">
      mod_private
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_privilege" class="md-nav__link">
    <span class="md-ellipsis">
      mod_privilege
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_proxy65" class="md-nav__link">
    <span class="md-ellipsis">
      mod_proxy65
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_pubsub" class="md-nav__link">
    <span class="md-ellipsis">
      mod_pubsub
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_push" class="md-nav__link">
    <span class="md-ellipsis">
      mod_push
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_push_keepalive" class="md-nav__link">
    <span class="md-ellipsis">
      mod_push_keepalive
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_register" class="md-nav__link">
    <span class="md-ellipsis">
      mod_register
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_register_web" class="md-nav__link">
    <span class="md-ellipsis">
      mod_register_web
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_roster" class="md-nav__link">
    <span class="md-ellipsis">
      mod_roster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_s2s_bidi" class="md-nav__link">
    <span class="md-ellipsis">
      mod_s2s_bidi
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_s2s_dialback" class="md-nav__link">
    <span class="md-ellipsis">
      mod_s2s_dialback
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_scram_upgrade" class="md-nav__link">
    <span class="md-ellipsis">
      mod_scram_upgrade
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_service_log" class="md-nav__link">
    <span class="md-ellipsis">
      mod_service_log
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_shared_roster" class="md-nav__link">
    <span class="md-ellipsis">
      mod_shared_roster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_shared_roster_ldap" class="md-nav__link">
    <span class="md-ellipsis">
      mod_shared_roster_ldap
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_sic" class="md-nav__link">
    <span class="md-ellipsis">
      mod_sic
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_sip" class="md-nav__link">
    <span class="md-ellipsis">
      mod_sip
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_stats" class="md-nav__link">
    <span class="md-ellipsis">
      mod_stats
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_stream_mgmt" class="md-nav__link">
    <span class="md-ellipsis">
      mod_stream_mgmt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_stun_disco" class="md-nav__link">
    <span class="md-ellipsis">
      mod_stun_disco
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_time" class="md-nav__link">
    <span class="md-ellipsis">
      mod_time
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_vcard" class="md-nav__link">
    <span class="md-ellipsis">
      mod_vcard
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_vcard_xupdate" class="md-nav__link">
    <span class="md-ellipsis">
      mod_vcard_xupdate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_version" class="md-nav__link">
    <span class="md-ellipsis">
      mod_version
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guide/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Advanced
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/extending-ejabberd/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/clustering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Clustering
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/managing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Managing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules / Contrib
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/mix-010/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
     MIX tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/mqtt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
     MQTT tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/muc-hats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
     MUC Hats
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/muc-vcard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
     MUC vCards
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/mysql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
     MySQL tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../developer/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developer Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/extending-ejabberd/pubsub/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
     Pubsub Dev
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/xmpp-clients-bots/extensions/roster-versioning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
     Simplified Roster Versioning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/extending-ejabberd/stanza-routing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
     Stanza Routing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/sql-schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
     SQL Schema
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
     Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/CODE_OF_CONDUCT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
     Contributor Convenant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/CONTRIBUTORS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
     Contributors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/repositories/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dependencies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../README-DOCS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/extending-ejabberd/elixir/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Elixir Dev
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../livebooks/ejabberd-developer-livebook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Livebook
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/extending-ejabberd/localization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Localization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/extending-ejabberd/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Development
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/xmpp-clients-bots/extensions/muc-sub/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MUC/Sub Extension
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/extending-ejabberd/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/vscode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VSCode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/xmpp-clients-bots/ios/getting-started-xmppframework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    XMPPFramework (iOS)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../developer/ejabberd-api/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/ejabberd-api/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/ejabberd-api/admin-tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/ejabberd-api/simple-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simple Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/ejabberd-api/permissions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Permissions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/ejabberd-api/oauth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OAuth Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/ejabberd-api/commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer/ejabberd-api/api_versioning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Versioning
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/25.04/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    25.04
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            25.04
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/25.04/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/25.04/admin-tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/25.04/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/25.04/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/25.04/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/25.04/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/25.04/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 25.04
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/25.03/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    25.03
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            25.03
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/25.03/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/25.03/admin-tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/25.03/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/25.03/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/25.03/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/25.03/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/25.03/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 25.03
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/24.12/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    24.12
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            24.12
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.12/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.12/admin-tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.12/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.12/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.12/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.12/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.12/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 24.12
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/24.10/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    24.10
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_5" id="__nav_7_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_5">
            <span class="md-nav__icon md-icon"></span>
            24.10
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.10/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.10/admin-tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.10/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.10/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.10/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.10/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.10/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 24.10
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/24.07/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    24.07
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_6" id="__nav_7_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_6">
            <span class="md-nav__icon md-icon"></span>
            24.07
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.07/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.07/admin-tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.07/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.07/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.07/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.07/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.07/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 24.07
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/24.06/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    24.06
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_7" id="__nav_7_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_7">
            <span class="md-nav__icon md-icon"></span>
            24.06
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.06/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.06/admin-tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.06/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.06/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.06/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.06/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.06/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 24.06
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/24.02/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    24.02
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_8" id="__nav_7_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_8">
            <span class="md-nav__icon md-icon"></span>
            24.02
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.02/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.02/admin-tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.02/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.02/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.02/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.02/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/24.02/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 24.02
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/23.10/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    23.10
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_9" id="__nav_7_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_9">
            <span class="md-nav__icon md-icon"></span>
            23.10
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.10/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.10/admin-tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.10/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Option
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.10/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.10/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.10/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.10/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 23.10
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_10" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/23.04/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    23.04
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_10" id="__nav_7_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_10">
            <span class="md-nav__icon md-icon"></span>
            23.04
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.04/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.04/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Option
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.04/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.04/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.04/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.04/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 23.04
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_11" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/23.01/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    23.01
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_11" id="__nav_7_11_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_11">
            <span class="md-nav__icon md-icon"></span>
            23.01
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.01/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.01/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Option
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.01/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.01/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.01/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/23.01/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 23.01
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_12" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/22.10/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    22.10
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_12" id="__nav_7_12_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_12">
            <span class="md-nav__icon md-icon"></span>
            22.10
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/22.10/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/22.10/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Option
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/22.10/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/22.10/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/22.10/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/22.10/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 22.10
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_13" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/22.05/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    22.05
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_13" id="__nav_7_13_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_13">
            <span class="md-nav__icon md-icon"></span>
            22.05
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/22.05/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/22.05/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Option
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/22.05/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/22.05/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/22.05/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/22.05/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 22.05
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_14" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/21.12/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    21.12
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_14" id="__nav_7_14_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_14">
            <span class="md-nav__icon md-icon"></span>
            21.12
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.12/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.12/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Option
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.12/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.12/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.12/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.12/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 21.12
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_15" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/21.07/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    21.07
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_15" id="__nav_7_15_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_15">
            <span class="md-nav__icon md-icon"></span>
            21.07
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.07/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.07/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Option
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.07/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.07/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.07/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.07/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 21.07
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_16" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/21.04/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    21.04
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_16" id="__nav_7_16_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_16">
            <span class="md-nav__icon md-icon"></span>
            21.04
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.04/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.04/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Option
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.04/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.04/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.04/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.04/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 21.04
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_17" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/21.01/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    21.01
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_17" id="__nav_7_17_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_17">
            <span class="md-nav__icon md-icon"></span>
            21.01
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.01/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.01/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Option
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.01/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.01/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/21.01/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_18" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/20.12/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    20.12
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_18" id="__nav_7_18_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_18">
            <span class="md-nav__icon md-icon"></span>
            20.12
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.12/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.12/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Option
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.12/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.12/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.12/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_19" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/20.07/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    20.07
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_19" id="__nav_7_19_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_19">
            <span class="md-nav__icon md-icon"></span>
            20.07
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.07/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.07/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.07/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.07/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.07/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_20" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/20.04/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    20.04
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_20" id="__nav_7_20_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_20_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_20">
            <span class="md-nav__icon md-icon"></span>
            20.04
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.04/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.04/listen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.04/listen-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listen Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.04/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules Options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.04/toplevel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Top-Level Options
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_21" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/20.03/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    20.03
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_21_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_21">
            <span class="md-nav__icon md-icon"></span>
            20.03
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_22" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/20.02/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    20.02
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_22_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_22">
            <span class="md-nav__icon md-icon"></span>
            20.02
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_23" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../archive/20.01/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    20.01
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_23" id="__nav_7_23_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_23_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_23">
            <span class="md-nav__icon md-icon"></span>
            20.01
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/20.01/upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 20.01
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_24" >
        
          
          <label class="md-nav__link" for="__nav_7_24" id="__nav_7_24_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Older releases
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_24_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_24">
            <span class="md-nav__icon md-icon"></span>
            Older releases
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_19.05_to_19.08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 19.08
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_19.02_to_19.05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 19.05
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_18.12_to_19.02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 19.02
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_18.09_to_18.12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 18.12
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_18.06_to_18.09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 18.09
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_18.04_to_18.06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 18.06
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_18.03_to_18.04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 18.04
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_18.01_to_18.03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 18.03
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_17.11_to_18.01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 18.01
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_17.09_to_17.11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 17.11
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_17.06_to_17.09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 17.09
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_17.03_to_17.06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 17.06
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_16.08_to_17.03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 17.03
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_16.06_to_16.08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 16.08
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_16.04_to_16.06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 16.06
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_16.03_to_16.04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 16.04
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_16.02_to_16.03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 16.03
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_15.11_to_16.02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade to ejabberd 16.02
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/older-releases/from_2.1.1x_to_16.02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade from 2.1.1x to 16.02
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../archive/old/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configure 20.03
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CHANGELOG/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ChangeLog
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../roadmap/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Roadmap
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Roadmap
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label=" ">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
       
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mod_adhoc" class="md-nav__link">
    <span class="md-ellipsis">
      mod_adhoc
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_adhoc_api" class="md-nav__link">
    <span class="md-ellipsis">
      mod_adhoc_api 🟤
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_admin_extra" class="md-nav__link">
    <span class="md-ellipsis">
      mod_admin_extra
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_admin_update_sql" class="md-nav__link">
    <span class="md-ellipsis">
      mod_admin_update_sql
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_announce" class="md-nav__link">
    <span class="md-ellipsis">
      mod_announce
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_auth_fast" class="md-nav__link">
    <span class="md-ellipsis">
      mod_auth_fast
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_avatar" class="md-nav__link">
    <span class="md-ellipsis">
      mod_avatar
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_block_strangers" class="md-nav__link">
    <span class="md-ellipsis">
      mod_block_strangers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_blocking" class="md-nav__link">
    <span class="md-ellipsis">
      mod_blocking
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_bosh" class="md-nav__link">
    <span class="md-ellipsis">
      mod_bosh
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_caps" class="md-nav__link">
    <span class="md-ellipsis">
      mod_caps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_carboncopy" class="md-nav__link">
    <span class="md-ellipsis">
      mod_carboncopy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_client_state" class="md-nav__link">
    <span class="md-ellipsis">
      mod_client_state
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_configure" class="md-nav__link">
    <span class="md-ellipsis">
      mod_configure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_conversejs" class="md-nav__link">
    <span class="md-ellipsis">
      mod_conversejs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_delegation" class="md-nav__link">
    <span class="md-ellipsis">
      mod_delegation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_disco" class="md-nav__link">
    <span class="md-ellipsis">
      mod_disco
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_fail2ban" class="md-nav__link">
    <span class="md-ellipsis">
      mod_fail2ban
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_host_meta" class="md-nav__link">
    <span class="md-ellipsis">
      mod_host_meta
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_http_api" class="md-nav__link">
    <span class="md-ellipsis">
      mod_http_api
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_http_fileserver" class="md-nav__link">
    <span class="md-ellipsis">
      mod_http_fileserver
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_http_upload" class="md-nav__link">
    <span class="md-ellipsis">
      mod_http_upload
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_http_upload_quota" class="md-nav__link">
    <span class="md-ellipsis">
      mod_http_upload_quota
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_jidprep" class="md-nav__link">
    <span class="md-ellipsis">
      mod_jidprep
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_last" class="md-nav__link">
    <span class="md-ellipsis">
      mod_last
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_legacy_auth" class="md-nav__link">
    <span class="md-ellipsis">
      mod_legacy_auth
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_mam" class="md-nav__link">
    <span class="md-ellipsis">
      mod_mam
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_matrix_gw" class="md-nav__link">
    <span class="md-ellipsis">
      mod_matrix_gw 🟤
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      mod_metrics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_mix" class="md-nav__link">
    <span class="md-ellipsis">
      mod_mix
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_mix_pam" class="md-nav__link">
    <span class="md-ellipsis">
      mod_mix_pam
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_mqtt" class="md-nav__link">
    <span class="md-ellipsis">
      mod_mqtt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_mqtt_bridge" class="md-nav__link">
    <span class="md-ellipsis">
      mod_mqtt_bridge
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_muc" class="md-nav__link">
    <span class="md-ellipsis">
      mod_muc
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_muc_admin" class="md-nav__link">
    <span class="md-ellipsis">
      mod_muc_admin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_muc_log" class="md-nav__link">
    <span class="md-ellipsis">
      mod_muc_log
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_muc_occupantid" class="md-nav__link">
    <span class="md-ellipsis">
      mod_muc_occupantid
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_muc_rtbl" class="md-nav__link">
    <span class="md-ellipsis">
      mod_muc_rtbl
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_multicast" class="md-nav__link">
    <span class="md-ellipsis">
      mod_multicast
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_offline" class="md-nav__link">
    <span class="md-ellipsis">
      mod_offline
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_ping" class="md-nav__link">
    <span class="md-ellipsis">
      mod_ping
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_pres_counter" class="md-nav__link">
    <span class="md-ellipsis">
      mod_pres_counter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_privacy" class="md-nav__link">
    <span class="md-ellipsis">
      mod_privacy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_private" class="md-nav__link">
    <span class="md-ellipsis">
      mod_private
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_privilege" class="md-nav__link">
    <span class="md-ellipsis">
      mod_privilege
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_proxy65" class="md-nav__link">
    <span class="md-ellipsis">
      mod_proxy65
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_pubsub" class="md-nav__link">
    <span class="md-ellipsis">
      mod_pubsub
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_push" class="md-nav__link">
    <span class="md-ellipsis">
      mod_push
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_push_keepalive" class="md-nav__link">
    <span class="md-ellipsis">
      mod_push_keepalive
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_register" class="md-nav__link">
    <span class="md-ellipsis">
      mod_register
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_register_web" class="md-nav__link">
    <span class="md-ellipsis">
      mod_register_web
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_roster" class="md-nav__link">
    <span class="md-ellipsis">
      mod_roster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_s2s_bidi" class="md-nav__link">
    <span class="md-ellipsis">
      mod_s2s_bidi
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_s2s_dialback" class="md-nav__link">
    <span class="md-ellipsis">
      mod_s2s_dialback
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_scram_upgrade" class="md-nav__link">
    <span class="md-ellipsis">
      mod_scram_upgrade
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_service_log" class="md-nav__link">
    <span class="md-ellipsis">
      mod_service_log
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_shared_roster" class="md-nav__link">
    <span class="md-ellipsis">
      mod_shared_roster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_shared_roster_ldap" class="md-nav__link">
    <span class="md-ellipsis">
      mod_shared_roster_ldap
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_sic" class="md-nav__link">
    <span class="md-ellipsis">
      mod_sic
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_sip" class="md-nav__link">
    <span class="md-ellipsis">
      mod_sip
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_stats" class="md-nav__link">
    <span class="md-ellipsis">
      mod_stats
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_stream_mgmt" class="md-nav__link">
    <span class="md-ellipsis">
      mod_stream_mgmt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_stun_disco" class="md-nav__link">
    <span class="md-ellipsis">
      mod_stun_disco
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_time" class="md-nav__link">
    <span class="md-ellipsis">
      mod_time
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_vcard" class="md-nav__link">
    <span class="md-ellipsis">
      mod_vcard
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_vcard_xupdate" class="md-nav__link">
    <span class="md-ellipsis">
      mod_vcard_xupdate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_version" class="md-nav__link">
    <span class="md-ellipsis">
      mod_version
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="modules-options">Modules Options<a class="headerlink" href="#modules-options" title="Permanent link">¶</a></h1>
<div class="admonition info">
<p class="admonition-title">Please note</p>
<p>This section describes modules options of ejabberd <a href="../../../archive/25.03/">25.03</a> and <a href="../../../archive/25.04/">25.04</a>.  If you are using an old ejabberd release, please refer to the corresponding archived version of this page in the <a href="../../../archive/">Archive</a>.</p>
<p>The modules that changed in this version are marked with 🟤.</p>
</div>
<a id="mod-adhoc"></a><h2 id="mod_adhoc">mod_adhoc<a class="headerlink" href="#mod_adhoc" title="Permanent link">¶</a></h2>
<p>This module implements <a href="https://xmpp.org/extensions/xep-0050.html">XEP-0050: Ad-Hoc
Commands</a>. It’s an auxiliary
module and is only needed by some of the other modules.</p>
<p><strong>Available options:</strong></p>
<ul>
<li><strong>report_commands_node</strong>: <code>true | false</code><br/>
Provide the Commands item in the Service Discovery. Default value:
<code>false</code>.</li>
</ul>
<a id="mod-adhoc-api"></a><h2 id="mod_adhoc_api">mod_adhoc_api 🟤<a class="headerlink" href="#mod_adhoc_api" title="Permanent link">¶</a></h2>
<p><span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/25.03/">25.03</a></span></span></p>
<p>Execute <a href="https://docs.ejabberd.im/developer/ejabberd-api/">API Commands</a>
in a XMPP client using <a href="https://xmpp.org/extensions/xep-0050.html">XEP-0050: Ad-Hoc
Commands</a>. This module
requires <a href="#mod_adhoc">mod_adhoc</a> (to execute the commands), and recommends
<a href="#mod_disco">mod_disco</a> (to discover the commands).</p>
<p><strong>Available options:</strong></p>
<ul>
<li><strong>default_version</strong>: <code>integer() | string()</code><br/>
What API version to use. If setting an ejabberd version, it will use the
latest API version that was available in that ejabberd version. For
example, setting <code>"24.06"</code> in this option implies <code>2</code>. The default value
is the latest version.</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="nt">acl</span><span class="p">:</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="w">  </span><span class="nt">admin</span><span class="p">:</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jan@localhost</span>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>
</span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="nt">api_permissions</span><span class="p">:</span>
</span><span id="__span-0-6"><a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">  </span><span class="s">"adhoc</span><span class="nv"> </span><span class="s">commands"</span><span class="p p-Indicator">:</span>
</span><span id="__span-0-7"><a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">    </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mod_adhoc_api</span>
</span><span id="__span-0-8"><a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">    </span><span class="nt">who</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
</span><span id="__span-0-9"><a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">    </span><span class="nt">what</span><span class="p">:</span>
</span><span id="__span-0-10"><a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">"[tag:roster]"</span>
</span><span id="__span-0-11"><a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">"[tag:session]"</span>
</span><span id="__span-0-12"><a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stats</span>
</span><span id="__span-0-13"><a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">status</span>
</span><span id="__span-0-14"><a href="#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a>
</span><span id="__span-0-15"><a href="#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-0-16"><a href="#__codelineno-0-16" id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">  </span><span class="nt">mod_adhoc_api</span><span class="p">:</span>
</span><span id="__span-0-17"><a href="#__codelineno-0-17" id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">    </span><span class="nt">default_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span></code></pre></div>
<a id="mod-admin-extra"></a><h2 id="mod_admin_extra">mod_admin_extra<a class="headerlink" href="#mod_admin_extra" title="Permanent link">¶</a></h2>
<p>This module provides additional administrative commands.</p>
<p>Details for some commands:</p>
<p><a href="../../../developer/ejabberd-api/admin-api/#ban_account">ban_account</a> API: This command kicks all the connected sessions of
the account from the server. It also changes their password to a
randomly generated one, so they can’t login anymore unless a server
administrator changes their password again. It is possible to define the
reason of the ban. The new password also includes the reason and the
date and time of the ban. See an example below.</p>
<p><a href="../../../developer/ejabberd-api/admin-api/#push_roster">push_roster</a> API (and <a href="../../../developer/ejabberd-api/admin-api/#push_roster_all">push_roster_all</a> API): The roster file must
be placed, if using Windows, on the directory where you installed
ejabberd: <code>C:/Program Files/ejabberd</code> or similar. If you use other
Operating System, place the file on the same directory where the .beam
files are installed. See below an example roster file.</p>
<p><a href="../../../developer/ejabberd-api/admin-api/#srg_create">srg_create</a> API: If you want to put a group Name with blank spaces,
use the characters <code>"</code>' and <code>'"</code> to define when the Name starts and
ends. See an example below.</p>
<p>The module has no options.</p>
<p><strong>Examples:</strong></p>
<p>With this configuration, vCards can only be modified with
mod_admin_extra commands:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="nt">acl</span><span class="p">:</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">  </span><span class="nt">adminextraresource</span><span class="p">:</span>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">resource</span><span class="p">:</span><span class="w"> </span><span class="s">"modadminextraf8x,31ad"</span>
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="nt">access_rules</span><span class="p">:</span>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">  </span><span class="nt">vcard_set</span><span class="p">:</span>
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">allow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">adminextraresource</span>
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-1-8"><a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">  </span><span class="nt">mod_admin_extra</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span><span id="__span-1-9"><a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">  </span><span class="nt">mod_vcard</span><span class="p">:</span>
</span><span id="__span-1-10"><a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">    </span><span class="nt">access_set</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vcard_set</span>
</span></code></pre></div>
<p>Content of roster file for <a href="../../../developer/ejabberd-api/admin-api/#push_roster">push_roster</a> API:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="p p-Indicator">[{</span><span class="nv">&lt;&lt;"bob"&gt;&gt;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">&lt;&lt;"example.org"&gt;&gt;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">&lt;&lt;"workers"&gt;&gt;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">&lt;&lt;"Bob"&gt;&gt;</span><span class="p p-Indicator">},</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="p p-Indicator">{</span><span class="nv">&lt;&lt;"mart"&gt;&gt;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">&lt;&lt;"example.org"&gt;&gt;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">&lt;&lt;"workers"&gt;&gt;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">&lt;&lt;"Mart"&gt;&gt;</span><span class="p p-Indicator">},</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="p p-Indicator">{</span><span class="nv">&lt;&lt;"Rich"&gt;&gt;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">&lt;&lt;"example.org"&gt;&gt;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">&lt;&lt;"bosses"&gt;&gt;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">&lt;&lt;"Rich"&gt;&gt;</span><span class="p p-Indicator">}]</span><span class="l l-Scalar l-Scalar-Plain">.</span>
</span></code></pre></div>
<p>With this call, the sessions of the local account which JID is
<code>boby@example.org</code> will be kicked, and its password will be set to
something like
<code>BANNED_ACCOUNT—20080425T21:45:07—2176635—Spammed_rooms</code></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="l l-Scalar l-Scalar-Plain">ejabberdctl vhost example.org ban_account boby "Spammed rooms"</span>
</span></code></pre></div>
<p>Call to <a href="../../../developer/ejabberd-api/admin-api/#srg_create">srg_create</a> API using double-quotes and single-quotes:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="l l-Scalar l-Scalar-Plain">ejabberdctl srg_create g1 example.org "'Group number 1'" this_is_g1 g1</span>
</span></code></pre></div>
<a id="mod-admin-update-sql"></a><h2 id="mod_admin_update_sql">mod_admin_update_sql<a class="headerlink" href="#mod_admin_update_sql" title="Permanent link">¶</a></h2>
<p>This module can be used to update existing SQL database from the default
to the new schema. Check the section
<a href="../database/#default-and-new-schemas">Default and New Schemas</a> for
details. Please note that only MS SQL, MySQL, and PostgreSQL are
supported. When the module is loaded use <a href="../../../developer/ejabberd-api/admin-api/#update_sql">update_sql</a> API.</p>
<p>The module has no options.</p>
<a id="mod-announce"></a><h2 id="mod_announce">mod_announce<a class="headerlink" href="#mod_announce" title="Permanent link">¶</a></h2>
<p>This module enables configured users to broadcast announcements and to
set the message of the day (MOTD). Configured users can perform these
actions with an XMPP client either using Ad-Hoc Commands or sending
messages to specific JIDs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This module can be resource intensive on large deployments as it may
broadcast a lot of messages. This module should be disabled for
instances of ejabberd with hundreds of thousands users.</p>
</div>
<p>To send announcements using <a href="https://xmpp.org/extensions/xep-0050.html">XEP-0050: Ad-Hoc
Commands</a>, this module
requires <a href="#mod_adhoc">mod_adhoc</a> (to execute the commands), and recommends
<a href="#mod_disco">mod_disco</a> (to discover the commands).</p>
<p>To send announcements by sending messages to specific JIDs, these are
the destination JIDs:</p>
<ul>
<li>
<p><code>example.org/announce/all</code>: Send the message to all registered users
    in that vhost. If the user is online and connected to several
    resources, only the resource with the highest priority will receive
    the message. If the registered user is not connected, the message is
    stored offline in assumption that offline storage (see
    <a href="#mod_offline">mod_offline</a>) is enabled.</p>
</li>
<li>
<p><code>example.org/announce/online</code>: Send the message to all connected
    users. If the user is online and connected to several resources, all
    resources will receive the message.</p>
</li>
<li>
<p><code>example.org/announce/motd</code>: Set the message of the day (MOTD) that
    is sent to users when they login. Also sends the message to all
    connected users (similar to <code>announce/online</code>).</p>
</li>
<li>
<p><code>example.org/announce/motd/update</code>: Set the message of the day
    (MOTD) that is sent to users when they login. This does not send the
    message to any currently connected user.</p>
</li>
<li>
<p><code>example.org/announce/motd/delete</code>: Remove the existing message of
    the day (MOTD) by sending a message to this JID.</p>
</li>
</ul>
<p>There are similar destination JIDs to apply to all virtual hosts in
ejabberd:</p>
<ul>
<li>
<p><code>example.org/announce/all-hosts/all</code>: send to all registered
    accounts</p>
</li>
<li>
<p><code>example.org/announce/all-hosts/online</code>: send to online sessions</p>
</li>
<li>
<p><code>example.org/announce/all-hosts/motd</code>: set MOTD and send to online</p>
</li>
<li>
<p><code>example.org/announce/all-hosts/motd/update</code>: update MOTD</p>
</li>
<li>
<p><code>example.org/announce/all-hosts/motd/delete</code>: delete MOTD</p>
</li>
</ul>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access</strong>: <code>AccessName</code><br/>
This option specifies who is allowed to send announcements and to set
the message of the day. The default value is <code>none</code> (i.e. nobody is able
to send such messages).</p>
</li>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_missed</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#cache_missed">cache_missed</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>use_cache</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
</ul>
<a id="mod-auth-fast"></a><h2 id="mod_auth_fast">mod_auth_fast<a class="headerlink" href="#mod_auth_fast" title="Permanent link">¶</a></h2>
<p><span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/24.12/">24.12</a></span></span></p>
<p>The module adds support for <a href="https://xmpp.org/extensions/xep-0484.html">XEP-0484: Fast Authentication Streamlining
Tokens</a> that allows users to
authenticate using self-managed tokens.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>db_type</strong>: <code>mnesia</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>token_lifetime</strong>: <code>timeout()</code><br/>
Time that tokens will be kept, measured from it’s creation time. Default
value set to 30 days</p>
</li>
<li>
<p><strong>token_refresh_age</strong>: <code>timeout()</code><br/>
This time determines age of token, that qualifies for automatic refresh.
Default value set to 1 day</p>
</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">  </span><span class="nt">mod_auth_fast</span><span class="p">:</span>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">    </span><span class="nt">token_lifetime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">14days</span>
</span></code></pre></div>
<a id="mod-avatar"></a><h2 id="mod_avatar">mod_avatar<a class="headerlink" href="#mod_avatar" title="Permanent link">¶</a></h2>
<p>The purpose of the module is to cope with legacy and modern XMPP clients
posting avatars. The process is described in <a href="https://xmpp.org/extensions/xep-0398.html">XEP-0398: User Avatar to
vCard-Based Avatars
Conversion</a>.</p>
<p>Also, the module supports conversion between avatar image formats on the
fly.</p>
<p>The module depends on <a href="#mod_vcard">mod_vcard</a>, <a href="#mod_vcard_xupdate">mod_vcard_xupdate</a> and
<a href="#mod_pubsub">mod_pubsub</a>.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>convert</strong>: <code>{From: To}</code><br/>
Defines image conversion rules: the format in <code>From</code> will be converted
to format in <code>To</code>. The value of <code>From</code> can also be <code>default</code>, which is
match-all rule. NOTE: the list of supported formats is detected at
compile time depending on the image libraries installed in the system.</p>
<p><strong>Example</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="nt">convert</span><span class="p">:</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">  </span><span class="nt">webp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jpg</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">  </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">png</span>
</span></code></pre></div>
</li>
<li>
<p><strong>rate_limit</strong>: <code>Number</code><br/>
Limit any given JID by the number of avatars it is able to convert per
minute. This is to protect the server from image conversion DoS. The
default value is <code>10</code>.</p>
</li>
</ul>
<a id="mod-block-strangers"></a><h2 id="mod_block_strangers">mod_block_strangers<a class="headerlink" href="#mod_block_strangers" title="Permanent link">¶</a></h2>
<p>This module blocks and logs any messages coming from an unknown entity.
If a writing entity is not in your roster, you can let this module drop
and/or log the message. By default you’ll just not receive message from
that entity. Enable this module if you want to drop SPAM messages.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access</strong>: <code>AccessName</code><br/>
The option is supposed to be used when <code>allow_local_users</code> and
<code>allow_transports</code> are not enough. It’s an ACL where <code>deny</code> means the
message will be rejected (or a CAPTCHA would be generated for a
presence, if configured), and <code>allow</code> means the sender is whitelisted
and the stanza will pass through. The default value is <code>none</code>, which
means nothing is whitelisted.</p>
</li>
<li>
<p><strong>allow_local_users</strong>: <code>true | false</code><br/>
This option specifies if strangers from the same local host should be
accepted or not. The default value is <code>true</code>.</p>
</li>
<li>
<p><strong>allow_transports</strong>: <code>true | false</code><br/>
If set to <code>true</code> and some server’s JID is in user’s roster, then
messages from any user of this server are accepted even if no
subscription present. The default value is <code>true</code>.</p>
</li>
<li>
<p><strong>captcha</strong>: <code>true | false</code><br/>
Whether to generate CAPTCHA or not in response to messages from
strangers. See also section <a href="../basic/#captcha">CAPTCHA</a> of the
Configuration Guide. The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>drop</strong>: <code>true | false</code><br/>
This option specifies if strangers messages should be dropped or not.
The default value is <code>true</code>.</p>
</li>
<li>
<p><strong>log</strong>: <code>true | false</code><br/>
This option specifies if strangers' messages should be logged (as info
message) in ejabberd.log. The default value is <code>false</code>.</p>
</li>
</ul>
<a id="mod-blocking"></a><h2 id="mod_blocking">mod_blocking<a class="headerlink" href="#mod_blocking" title="Permanent link">¶</a></h2>
<p>The module implements <a href="https://xmpp.org/extensions/xep-0191.html">XEP-0191: Blocking
Command</a>.</p>
<p>This module depends on <a href="#mod_privacy">mod_privacy</a> where all the configuration is
performed.</p>
<p>The module has no options.</p>
<a id="mod-bosh"></a><h2 id="mod_bosh">mod_bosh<a class="headerlink" href="#mod_bosh" title="Permanent link">¶</a></h2>
<p>This module implements XMPP over BOSH as defined in
<a href="https://xmpp.org/extensions/xep-0124.html">XEP-0124</a> and
<a href="https://xmpp.org/extensions/xep-0206.html">XEP-0206</a>. BOSH stands for
Bidirectional-streams Over Synchronous HTTP. It makes it possible to
simulate long lived connections required by XMPP over the HTTP protocol.
In practice, this module makes it possible to use XMPP in a browser
without WebSocket support and more generally to have a way to use XMPP
while having to get through an HTTP proxy.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_missed</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#cache_missed">cache_missed</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>json</strong>: <code>true | false</code><br/>
This option has no effect.</p>
</li>
<li>
<p><strong>max_concat</strong>: <code>pos_integer() | infinity</code><br/>
This option limits the number of stanzas that the server will send in a
single bosh request. The default value is <code>unlimited</code>.</p>
</li>
<li>
<p><strong>max_inactivity</strong>: <code>timeout()</code><br/>
The option defines the maximum inactivity period. The default value is
<code>30</code> seconds.</p>
</li>
<li>
<p><strong>max_pause</strong>: <code>pos_integer()</code><br/>
Indicate the maximum length of a temporary session pause (in seconds)
that a client can request. The default value is <code>120</code>.</p>
</li>
<li>
<p><strong>prebind</strong>: <code>true | false</code><br/>
If enabled, the client can create the session without going through
authentication. Basically, it creates a new session with anonymous
authentication. The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>queue_type</strong>: <code>ram | file</code><br/>
Same as top-level <a href="../toplevel/#queue_type">queue_type</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ram_db_type</strong>: <code>mnesia | sql | redis</code><br/>
Same as top-level <a href="../toplevel/#default_ram_db">default_ram_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>use_cache</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="nt">listen</span><span class="p">:</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5222</span>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">    </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ejabberd_c2s</span>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5443</span>
</span><span id="__span-7-7"><a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="w">    </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ejabberd_http</span>
</span><span id="__span-7-8"><a href="#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="w">    </span><span class="nt">request_handlers</span><span class="p">:</span>
</span><span id="__span-7-9"><a href="#__codelineno-7-9" id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="w">      </span><span class="nt">/bosh</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mod_bosh</span>
</span><span id="__span-7-10"><a href="#__codelineno-7-10" id="__codelineno-7-10" name="__codelineno-7-10"></a>
</span><span id="__span-7-11"><a href="#__codelineno-7-11" id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-7-12"><a href="#__codelineno-7-12" id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="w">  </span><span class="nt">mod_bosh</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span></code></pre></div>
<a id="mod-caps"></a><h2 id="mod_caps">mod_caps<a class="headerlink" href="#mod_caps" title="Permanent link">¶</a></h2>
<p>This module implements <a href="https://xmpp.org/extensions/xep-0115.html">XEP-0115: Entity
Capabilities</a>. The main
purpose of the module is to provide PEP functionality (see
<a href="#mod_pubsub">mod_pubsub</a>).</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_missed</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#cache_missed">cache_missed</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>use_cache</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
</ul>
<a id="mod-carboncopy"></a><h2 id="mod_carboncopy">mod_carboncopy<a class="headerlink" href="#mod_carboncopy" title="Permanent link">¶</a></h2>
<p>The module implements <a href="https://xmpp.org/extensions/xep-0280.html">XEP-0280: Message
Carbons</a>. The module
broadcasts messages on all connected user resources (devices).</p>
<p>The module has no options.</p>
<a id="mod-client-state"></a><h2 id="mod_client_state">mod_client_state<a class="headerlink" href="#mod_client_state" title="Permanent link">¶</a></h2>
<p>This module allows for queueing certain types of stanzas when a client
indicates that the user is not actively using the client right now (see
<a href="https://xmpp.org/extensions/xep-0352.html">XEP-0352: Client State
Indication</a>). This can save
bandwidth and resources.</p>
<p>A stanza is dropped from the queue if it’s effectively obsoleted by a
new one (e.g., a new presence stanza would replace an old one from the
same client). The queue is flushed if a stanza arrives that won’t be
queued, or if the queue size reaches a certain limit (currently 100
stanzas), or if the client becomes active again.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>queue_chat_states</strong>: <code>true | false</code><br/>
Queue "standalone" chat state notifications (as defined in <a href="https://xmpp.org/extensions/xep-0085.html">XEP-0085:
Chat State Notifications</a>)
while a client indicates inactivity. The default value is <code>true</code>.</p>
</li>
<li>
<p><strong>queue_pep</strong>: <code>true | false</code><br/>
Queue PEP notifications while a client is inactive. When the queue is
flushed, only the most recent notification of a given PEP node is
delivered. The default value is <code>true</code>.</p>
</li>
<li>
<p><strong>queue_presence</strong>: <code>true | false</code><br/>
While a client is inactive, queue presence stanzas that indicate
(un)availability. The default value is <code>true</code>.</p>
</li>
</ul>
<a id="mod-configure"></a><h2 id="mod_configure">mod_configure<a class="headerlink" href="#mod_configure" title="Permanent link">¶</a></h2>
<p>The module provides server configuration functionalities using
<a href="https://xmpp.org/extensions/xep-0030.html">XEP-0030: Service Discovery</a>
and <a href="https://xmpp.org/extensions/xep-0050.html">XEP-0050: Ad-Hoc
Commands</a>:</p>
<ul>
<li>
<p>List and discover outgoing s2s, online client sessions and all
    registered accounts</p>
</li>
<li>
<p>Most of the ad-hoc commands defined in <a href="https://xmpp.org/extensions/xep-0133.html">XEP-0133: Service
    Administration</a></p>
</li>
<li>
<p>Additional custom ad-hoc commands specific to ejabberd</p>
</li>
</ul>
<p>This module requires <a href="#mod_adhoc">mod_adhoc</a> (to execute the commands), and
recommends <a href="#mod_disco">mod_disco</a> (to discover the commands).</p>
<p>Please notice that all the ad-hoc commands implemented by this module
have an equivalent <a href="https://docs.ejabberd.im/developer/ejabberd-api/">API
Command</a> that you can
execute using <a href="#mod_adhoc_api">mod_adhoc_api</a> or any other API frontend.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>*<em>access 🟤<code>*:</code>AccessName</em><br/>
<span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/25.03/">25.03</a></span></span>
 This option defines which
access rule will be used to control who is allowed to access the
features provided by this module. The default value is <code>configure</code>.</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="nt">acl</span><span class="p">:</span>
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">  </span><span class="nt">admin</span><span class="p">:</span>
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sun@localhost</span>
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a>
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="nt">access_rules</span><span class="p">:</span>
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">  </span><span class="nt">configure</span><span class="p">:</span>
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">    </span><span class="nt">allow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
</span><span id="__span-8-8"><a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a>
</span><span id="__span-8-9"><a href="#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-8-10"><a href="#__codelineno-8-10" id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="w">  </span><span class="nt">mod_configure</span><span class="p">:</span>
</span><span id="__span-8-11"><a href="#__codelineno-8-11" id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="w">    </span><span class="nt">access</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">configure</span>
</span></code></pre></div>
<a id="mod-conversejs"></a><h2 id="mod_conversejs">mod_conversejs<a class="headerlink" href="#mod_conversejs" title="Permanent link">¶</a></h2>
<p><span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/21.12/">21.12</a> and improved in <a href="../../../archive/22.05/">22.05</a></span></span></p>
<p>This module serves a simple page for the
<a href="https://conversejs.org/">Converse</a> XMPP web browser client.</p>
<p>To use this module, in addition to adding it to the <code>modules</code> section,
you must also enable it in <code>listen</code> → <code>ejabberd_http</code> →
<a href="../listen-options/#request_handlers">request_handlers</a>.</p>
<p>Make sure either <a href="#mod_bosh">mod_bosh</a> or
<a href="../listen/#ejabberd_http_ws">ejabberd_http_ws</a> are enabled in at least
one <code>request_handlers</code>.</p>
<p>When <code>conversejs_css</code> and <code>conversejs_script</code> are <code>auto</code>, by default
they point to the public Converse client.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>bosh_service_url</strong>: <code>auto | BoshURL</code><br/>
BOSH service URL to which Converse can connect to. The keyword <em>@HOST@</em>
is replaced with the real virtual host name. If set to <code>auto</code>, it will
build the URL of the first configured BOSH request handler. The default
value is <code>auto</code>.</p>
</li>
<li>
<p><strong>conversejs_css</strong>: <code>auto | URL</code><br/>
Converse CSS URL. The keyword <code>@HOST@</code> is replaced with the hostname.
The default value is <code>auto</code>.</p>
</li>
<li>
<p><strong>conversejs_options</strong>: <code>{Name: Value}</code><br/>
<span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/22.05/">22.05</a></span></span>
 Specify additional options to
be passed to Converse. See <a href="https://conversejs.org/docs/html/configuration.html">Converse
configuration</a>.
Only boolean, integer and string values are supported; lists are not
supported.</p>
</li>
<li>
<p><strong>conversejs_resources</strong>: <code>Path</code><br/>
<span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/22.05/">22.05</a></span></span>
 Local path to the Converse
files. If not set, the public Converse client will be used instead.</p>
</li>
<li>
<p><strong>conversejs_script</strong>: <code>auto | URL</code><br/>
Converse main script URL. The keyword <code>@HOST@</code> is replaced with the
hostname. The default value is <code>auto</code>.</p>
</li>
<li>
<p><strong>default_domain</strong>: <code>Domain</code><br/>
Specify a domain to act as the default for user JIDs. The keyword
<code>@HOST@</code> is replaced with the hostname. The default value is <code>@HOST@</code>.</p>
</li>
<li>
<p><strong>websocket_url</strong>: <code>auto | WebSocketURL</code><br/>
A WebSocket URL to which Converse can connect to. The <code>@HOST@</code> keyword
is replaced with the real virtual host name. If set to <code>auto</code>, it will
build the URL of the first configured WebSocket request handler. The
default value is <code>auto</code>.</p>
</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Manually setup WebSocket url, and use the public Converse client:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="nt">listen</span><span class="p">:</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5280</span>
</span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">    </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ejabberd_http</span>
</span><span id="__span-9-5"><a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">    </span><span class="nt">request_handlers</span><span class="p">:</span>
</span><span id="__span-9-6"><a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">      </span><span class="nt">/bosh</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mod_bosh</span>
</span><span id="__span-9-7"><a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">      </span><span class="nt">/websocket</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ejabberd_http_ws</span>
</span><span id="__span-9-8"><a href="#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="w">      </span><span class="nt">/conversejs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mod_conversejs</span>
</span><span id="__span-9-9"><a href="#__codelineno-9-9" id="__codelineno-9-9" name="__codelineno-9-9"></a>
</span><span id="__span-9-10"><a href="#__codelineno-9-10" id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-9-11"><a href="#__codelineno-9-11" id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="w">  </span><span class="nt">mod_bosh</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span><span id="__span-9-12"><a href="#__codelineno-9-12" id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="w">  </span><span class="nt">mod_conversejs</span><span class="p">:</span>
</span><span id="__span-9-13"><a href="#__codelineno-9-13" id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="w">    </span><span class="nt">websocket_url</span><span class="p">:</span><span class="w"> </span><span class="s">"ws://@HOST@:5280/websocket"</span>
</span></code></pre></div>
<p>Host Converse locally and let auto detection of WebSocket and Converse
URLs:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="nt">listen</span><span class="p">:</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">    </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ejabberd_http</span>
</span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">    </span><span class="nt">tls</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-10-6"><a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">    </span><span class="nt">request_handlers</span><span class="p">:</span>
</span><span id="__span-10-7"><a href="#__codelineno-10-7" id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">      </span><span class="nt">/websocket</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ejabberd_http_ws</span>
</span><span id="__span-10-8"><a href="#__codelineno-10-8" id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="w">      </span><span class="nt">/conversejs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mod_conversejs</span>
</span><span id="__span-10-9"><a href="#__codelineno-10-9" id="__codelineno-10-9" name="__codelineno-10-9"></a>
</span><span id="__span-10-10"><a href="#__codelineno-10-10" id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-10-11"><a href="#__codelineno-10-11" id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="w">  </span><span class="nt">mod_conversejs</span><span class="p">:</span>
</span><span id="__span-10-12"><a href="#__codelineno-10-12" id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="w">    </span><span class="nt">conversejs_resources</span><span class="p">:</span><span class="w"> </span><span class="s">"/home/ejabberd/conversejs-9.0.0/package/dist"</span>
</span></code></pre></div>
<p>Configure some additional options for Converse</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">  </span><span class="nt">mod_conversejs</span><span class="p">:</span>
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">    </span><span class="nt">websocket_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">auto</span>
</span><span id="__span-11-4"><a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">    </span><span class="nt">conversejs_options</span><span class="p">:</span>
</span><span id="__span-11-5"><a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">      </span><span class="nt">auto_away</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</span><span id="__span-11-6"><a href="#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">      </span><span class="nt">clear_cache_on_logout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-11-7"><a href="#__codelineno-11-7" id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">      </span><span class="nt">i18n</span><span class="p">:</span><span class="w"> </span><span class="s">"pt"</span>
</span><span id="__span-11-8"><a href="#__codelineno-11-8" id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">      </span><span class="nt">locked_domain</span><span class="p">:</span><span class="w"> </span><span class="s">"@HOST@"</span>
</span><span id="__span-11-9"><a href="#__codelineno-11-9" id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">      </span><span class="nt">message_archiving</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span>
</span><span id="__span-11-10"><a href="#__codelineno-11-10" id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">      </span><span class="nt">theme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dracula</span>
</span></code></pre></div>
<a id="mod-delegation"></a><h2 id="mod_delegation">mod_delegation<a class="headerlink" href="#mod_delegation" title="Permanent link">¶</a></h2>
<p>This module is an implementation of <a href="https://xmpp.org/extensions/xep-0355.html">XEP-0355: Namespace
Delegation</a>. Only admin mode
has been implemented by now. Namespace delegation allows external
services to handle IQ using specific namespace. This may be applied for
external PEP service.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Security issue: Namespace delegation gives components access to
sensitive data, so permission should be granted carefully, only if you
trust the component.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This module is complementary to <a href="#mod_privilege">mod_privilege</a> but can also be used
separately.</p>
</div>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>namespaces</strong>: <code>{Namespace: Options}</code><br/>
If you want to delegate namespaces to a component, specify them in this
option, and associate them to an access rule. The <code>Options</code> are:</p>
<ul>
<li>
<p><strong>access</strong>: <code>AccessName</code><br/>
   The option defines which components are
allowed for namespace delegation. The default value is <code>none</code>.</p>
</li>
<li>
<p><strong>filtering</strong>: <code>Attributes</code><br/>
   The list of attributes. Currently not
used.</p>
</li>
</ul>
</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Make sure you do not delegate the same namespace to several services at
the same time. As in the example provided later, to have the
<code>sat-pubsub.example.org</code> component perform correctly disable the
<a href="#mod_pubsub">mod_pubsub</a> module.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="nt">access_rules</span><span class="p">:</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">  </span><span class="nt">external_pubsub</span><span class="p">:</span>
</span><span id="__span-12-3"><a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">    </span><span class="nt">allow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external_component</span>
</span><span id="__span-12-4"><a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">  </span><span class="nt">external_mam</span><span class="p">:</span>
</span><span id="__span-12-5"><a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">    </span><span class="nt">allow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external_component</span>
</span><span id="__span-12-6"><a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a>
</span><span id="__span-12-7"><a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="nt">acl</span><span class="p">:</span>
</span><span id="__span-12-8"><a href="#__codelineno-12-8" id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">  </span><span class="nt">external_component</span><span class="p">:</span>
</span><span id="__span-12-9"><a href="#__codelineno-12-9" id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="w">    </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sat-pubsub.example.org</span>
</span><span id="__span-12-10"><a href="#__codelineno-12-10" id="__codelineno-12-10" name="__codelineno-12-10"></a>
</span><span id="__span-12-11"><a href="#__codelineno-12-11" id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-12-12"><a href="#__codelineno-12-12" id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="w">  </span><span class="nt">mod_delegation</span><span class="p">:</span>
</span><span id="__span-12-13"><a href="#__codelineno-12-13" id="__codelineno-12-13" name="__codelineno-12-13"></a><span class="w">    </span><span class="nt">namespaces</span><span class="p">:</span>
</span><span id="__span-12-14"><a href="#__codelineno-12-14" id="__codelineno-12-14" name="__codelineno-12-14"></a><span class="w">      </span><span class="nt">urn:xmpp:mam:1</span><span class="p">:</span>
</span><span id="__span-12-15"><a href="#__codelineno-12-15" id="__codelineno-12-15" name="__codelineno-12-15"></a><span class="w">        </span><span class="nt">access</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external_mam</span>
</span><span id="__span-12-16"><a href="#__codelineno-12-16" id="__codelineno-12-16" name="__codelineno-12-16"></a><span class="w">      </span><span class="nt">http://jabber.org/protocol/pubsub</span><span class="p">:</span>
</span><span id="__span-12-17"><a href="#__codelineno-12-17" id="__codelineno-12-17" name="__codelineno-12-17"></a><span class="w">        </span><span class="nt">access</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external_pubsub</span>
</span></code></pre></div>
<a id="mod-disco"></a><h2 id="mod_disco">mod_disco<a class="headerlink" href="#mod_disco" title="Permanent link">¶</a></h2>
<p>This module adds support for <a href="https://xmpp.org/extensions/xep-0030.html">XEP-0030: Service
Discovery</a>. With this module
enabled, services on your server can be discovered by XMPP clients.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>extra_domains</strong>: <code>[Domain, ...]</code><br/>
With this option, you can specify a list of extra domains that are added
to the Service Discovery item list. The default value is an empty list.</p>
</li>
<li>
<p><strong>name</strong>: <code>Name</code><br/>
A name of the server in the Service Discovery. This will only be
displayed by special XMPP clients. The default value is <code>ejabberd</code>.</p>
</li>
<li>
<p><strong>server_info</strong>: <code>[Info, ...]</code><br/>
Specify additional information about the server, as described in
<a href="https://xmpp.org/extensions/xep-0157.html">XEP-0157: Contact Addresses for XMPP
Services</a>. Every <code>Info</code>
element in the list is constructed from the following options:</p>
<ul>
<li>
<p><strong>modules</strong>: <code>all | [Module, ...]</code><br/>
   The value can be the keyword
<code>all</code>, in which case the information is reported in all the
services, or a list of ejabberd modules, in which case the
information is only specified for the services provided by those
modules.</p>
</li>
<li>
<p><strong>name</strong>: <code>Name</code><br/>
   The field <code>var</code> name that will be defined. See
XEP-0157 for some standardized names.</p>
</li>
<li>
<p><strong>urls</strong>: <code>[URI, ...]</code><br/>
   A list of contact URIs, such as HTTP URLs,
XMPP URIs and so on.</p>
</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="nt">server_info</span><span class="p">:</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">    </span><span class="nt">modules</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">abuse-addresses</span>
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">    </span><span class="nt">urls</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">"mailto:abuse@shakespeare.lit"</span><span class="p p-Indicator">]</span>
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-13-7"><a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="w">    </span><span class="nt">modules</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">mod_muc</span><span class="p p-Indicator">]</span>
</span><span id="__span-13-8"><a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Web</span><span class="nv"> </span><span class="s">chatroom</span><span class="nv"> </span><span class="s">logs"</span>
</span><span id="__span-13-9"><a href="#__codelineno-13-9" id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">    </span><span class="nt">urls</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">"http://www.example.org/muc-logs"</span><span class="p p-Indicator">]</span>
</span><span id="__span-13-10"><a href="#__codelineno-13-10" id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-13-11"><a href="#__codelineno-13-11" id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="w">    </span><span class="nt">modules</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">mod_disco</span><span class="p p-Indicator">]</span>
</span><span id="__span-13-12"><a href="#__codelineno-13-12" id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feedback-addresses</span>
</span><span id="__span-13-13"><a href="#__codelineno-13-13" id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="w">    </span><span class="nt">urls</span><span class="p">:</span>
</span><span id="__span-13-14"><a href="#__codelineno-13-14" id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://shakespeare.lit/feedback.php</span>
</span><span id="__span-13-15"><a href="#__codelineno-13-15" id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mailto:feedback@shakespeare.lit</span>
</span><span id="__span-13-16"><a href="#__codelineno-13-16" id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xmpp:feedback@shakespeare.lit</span>
</span><span id="__span-13-17"><a href="#__codelineno-13-17" id="__codelineno-13-17" name="__codelineno-13-17"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-13-18"><a href="#__codelineno-13-18" id="__codelineno-13-18" name="__codelineno-13-18"></a><span class="w">    </span><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-13-19"><a href="#__codelineno-13-19" id="__codelineno-13-19" name="__codelineno-13-19"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mod_disco</span>
</span><span id="__span-13-20"><a href="#__codelineno-13-20" id="__codelineno-13-20" name="__codelineno-13-20"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mod_vcard</span>
</span><span id="__span-13-21"><a href="#__codelineno-13-21" id="__codelineno-13-21" name="__codelineno-13-21"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin-addresses</span>
</span><span id="__span-13-22"><a href="#__codelineno-13-22" id="__codelineno-13-22" name="__codelineno-13-22"></a><span class="w">    </span><span class="nt">urls</span><span class="p">:</span>
</span><span id="__span-13-23"><a href="#__codelineno-13-23" id="__codelineno-13-23" name="__codelineno-13-23"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mailto:xmpp@shakespeare.lit</span>
</span><span id="__span-13-24"><a href="#__codelineno-13-24" id="__codelineno-13-24" name="__codelineno-13-24"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xmpp:admins@shakespeare.lit</span>
</span></code></pre></div>
</li>
</ul>
<a id="mod-fail2ban"></a><h2 id="mod_fail2ban">mod_fail2ban<a class="headerlink" href="#mod_fail2ban" title="Permanent link">¶</a></h2>
<p>The module bans IPs that show the malicious signs. Currently only C2S
authentication failures are detected.</p>
<p>Unlike the standalone program, <code>mod_fail2ban</code> clears the record of
authentication failures after some time since the first failure or on a
successful authentication. It also does not simply block network
traffic, but provides the client with a descriptive error message.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You should not use this module behind a proxy or load balancer.
ejabberd will see the failures as coming from the load balancer and,
when the threshold of auth failures is reached, will reject all
connections coming from the load balancer. You can lock all your user
base out of ejabberd when using this module behind a proxy.</p>
</div>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access</strong>: <code>AccessName</code><br/>
Specify an access rule for whitelisting IP addresses or networks. If the
rule returns <code>allow</code> for a given IP address, that address will never be
banned. The <code>AccessName</code> should be of type <code>ip</code>. The default value is
<code>none</code>.</p>
</li>
<li>
<p><strong>c2s_auth_ban_lifetime</strong>: <code>timeout()</code><br/>
The lifetime of the IP ban caused by too many C2S authentication
failures. The default value is <code>1</code> hour.</p>
</li>
<li>
<p><strong>c2s_max_auth_failures</strong>: <code>Number</code><br/>
The number of C2S authentication failures to trigger the IP ban. The
default value is <code>20</code>.</p>
</li>
</ul>
<a id="mod-host-meta"></a><h2 id="mod_host_meta">mod_host_meta<a class="headerlink" href="#mod_host_meta" title="Permanent link">¶</a></h2>
<p><span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/22.05/">22.05</a></span></span></p>
<p>This module serves small <code>host-meta</code> files as described in <a href="https://xmpp.org/extensions/xep-0156.html">XEP-0156:
Discovering Alternative XMPP Connection
Methods</a>.</p>
<p>To use this module, in addition to adding it to the <code>modules</code> section,
you must also enable it in <code>listen</code> → <code>ejabberd_http</code> →
<a href="../listen-options/#request_handlers">request_handlers</a>.</p>
<p>Notice it only works if <a href="../listen/#ejabberd_http">ejabberd_http</a> has
<a href="../listen-options/#tls">tls</a> enabled.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>bosh_service_url</strong>: <code>undefined | auto | BoshURL</code><br/>
BOSH service URL to announce. The keyword <code>@HOST@</code> is replaced with the
real virtual host name. If set to <code>auto</code>, it will build the URL of the
first configured BOSH request handler. The default value is <code>auto</code>.</p>
</li>
<li>
<p><strong>websocket_url</strong>: <code>undefined | auto | WebSocketURL</code><br/>
WebSocket URL to announce. The keyword <code>@HOST@</code> is replaced with the
real virtual host name. If set to <code>auto</code>, it will build the URL of the
first configured WebSocket request handler. The default value is <code>auto</code>.</p>
</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="nt">listen</span><span class="p">:</span>
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-14-3"><a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
</span><span id="__span-14-4"><a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">    </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ejabberd_http</span>
</span><span id="__span-14-5"><a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">    </span><span class="nt">tls</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-14-6"><a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="w">    </span><span class="nt">request_handlers</span><span class="p">:</span>
</span><span id="__span-14-7"><a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">      </span><span class="nt">/bosh</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mod_bosh</span>
</span><span id="__span-14-8"><a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">      </span><span class="nt">/ws</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ejabberd_http_ws</span>
</span><span id="__span-14-9"><a href="#__codelineno-14-9" id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="w">      </span><span class="nt">/.well-known/host-meta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mod_host_meta</span>
</span><span id="__span-14-10"><a href="#__codelineno-14-10" id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="w">      </span><span class="nt">/.well-known/host-meta.json</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mod_host_meta</span>
</span><span id="__span-14-11"><a href="#__codelineno-14-11" id="__codelineno-14-11" name="__codelineno-14-11"></a>
</span><span id="__span-14-12"><a href="#__codelineno-14-12" id="__codelineno-14-12" name="__codelineno-14-12"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-14-13"><a href="#__codelineno-14-13" id="__codelineno-14-13" name="__codelineno-14-13"></a><span class="w">  </span><span class="nt">mod_bosh</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span><span id="__span-14-14"><a href="#__codelineno-14-14" id="__codelineno-14-14" name="__codelineno-14-14"></a><span class="w">  </span><span class="nt">mod_host_meta</span><span class="p">:</span>
</span><span id="__span-14-15"><a href="#__codelineno-14-15" id="__codelineno-14-15" name="__codelineno-14-15"></a><span class="w">    </span><span class="nt">bosh_service_url</span><span class="p">:</span><span class="w"> </span><span class="s">"https://@HOST@:5443/bosh"</span>
</span><span id="__span-14-16"><a href="#__codelineno-14-16" id="__codelineno-14-16" name="__codelineno-14-16"></a><span class="w">    </span><span class="nt">websocket_url</span><span class="p">:</span><span class="w"> </span><span class="s">"wss://@HOST@:5443/ws"</span>
</span></code></pre></div>
<a id="mod-http-api"></a><h2 id="mod_http_api">mod_http_api<a class="headerlink" href="#mod_http_api" title="Permanent link">¶</a></h2>
<p>This module provides a ReST interface to call
<a href="../../../developer/ejabberd-api/">ejabberd API</a> commands using
JSON data.</p>
<p>To use this module, in addition to adding it to the <code>modules</code> section,
you must also enable it in <code>listen</code> → <code>ejabberd_http</code> →
<a href="../listen-options/#request_handlers">request_handlers</a>.</p>
<p>To use a specific API version N, when defining the URL path in the
request_handlers, add a vN. For example: <code>/api/v2: mod_http_api</code>.</p>
<p>To run a command, send a POST request to the corresponding URL:
<code>http://localhost:5280/api/COMMAND-NAME</code></p>
<p><strong>Available options:</strong></p>
<ul>
<li><strong>default_version</strong>: <code>integer() | string()</code><br/>
<span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/24.12/">24.12</a></span></span>
 What API version to use when
none is specified in the URL path. If setting an ejabberd version, it
will use the latest API version that was available in that ejabberd
version. For example, setting <code>"24.06"</code> in this option implies <code>2</code>. The
default value is the latest version.</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="nt">listen</span><span class="p">:</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5280</span>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">    </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ejabberd_http</span>
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">    </span><span class="nt">request_handlers</span><span class="p">:</span>
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="w">      </span><span class="nt">/api</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mod_http_api</span>
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a>
</span><span id="__span-15-8"><a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-15-9"><a href="#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="w">  </span><span class="nt">mod_http_api</span><span class="p">:</span>
</span><span id="__span-15-10"><a href="#__codelineno-15-10" id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="w">    </span><span class="nt">default_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span></code></pre></div>
<a id="mod-http-fileserver"></a><h2 id="mod_http_fileserver">mod_http_fileserver<a class="headerlink" href="#mod_http_fileserver" title="Permanent link">¶</a></h2>
<p>This simple module serves files from the local disk over HTTP.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>accesslog</strong>: <code>Path</code><br/>
File to log accesses using an Apache-like format. No log will be
recorded if this option is not specified.</p>
</li>
<li>
<p><strong>content_types</strong>: <code>{Extension: Type}</code><br/>
Specify mappings of extension to content type. There are several content
types already defined. With this option you can add new definitions or
modify existing ones. The default values are:</p>
<p><strong>Example</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="nt">content_types</span><span class="p">:</span>
</span><span id="__span-16-2"><a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">  </span><span class="nt">.css</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">text/css</span>
</span><span id="__span-16-3"><a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">  </span><span class="nt">.gif</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">image/gif</span>
</span><span id="__span-16-4"><a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">  </span><span class="nt">.html</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">text/html</span>
</span><span id="__span-16-5"><a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">  </span><span class="nt">.jar</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">application/java-archive</span>
</span><span id="__span-16-6"><a href="#__codelineno-16-6" id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">  </span><span class="nt">.jpeg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">image/jpeg</span>
</span><span id="__span-16-7"><a href="#__codelineno-16-7" id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">  </span><span class="nt">.jpg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">image/jpeg</span>
</span><span id="__span-16-8"><a href="#__codelineno-16-8" id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">  </span><span class="nt">.js</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">text/javascript</span>
</span><span id="__span-16-9"><a href="#__codelineno-16-9" id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">  </span><span class="nt">.png</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">image/png</span>
</span><span id="__span-16-10"><a href="#__codelineno-16-10" id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">  </span><span class="nt">.svg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">image/svg+xml</span>
</span><span id="__span-16-11"><a href="#__codelineno-16-11" id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">  </span><span class="nt">.txt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">text/plain</span>
</span><span id="__span-16-12"><a href="#__codelineno-16-12" id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">  </span><span class="nt">.xml</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">application/xml</span>
</span><span id="__span-16-13"><a href="#__codelineno-16-13" id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">  </span><span class="nt">.xpi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">application/x-xpinstall</span>
</span><span id="__span-16-14"><a href="#__codelineno-16-14" id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">  </span><span class="nt">.xul</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">application/vnd.mozilla.xul+xml</span>
</span></code></pre></div>
</li>
<li>
<p><strong>custom_headers</strong>: <code>{Name: Value}</code><br/>
Indicate custom HTTP headers to be included in all responses. There are
no custom headers by default.</p>
</li>
<li>
<p><strong>default_content_type</strong>: <code>Type</code><br/>
Specify the content type to use for unknown extensions. The default
value is <code>application/octet-stream</code>.</p>
</li>
<li>
<p><strong>directory_indices</strong>: <code>[Index, ...]</code><br/>
Indicate one or more directory index files, similarly to Apache’s
<code>DirectoryIndex</code> variable. When an HTTP request hits a directory instead
of a regular file, those directory indices are looked in order, and the
first one found is returned. The default value is an empty list.</p>
</li>
<li>
<p><strong>docroot</strong>: <code>Path</code><br/>
Directory to serve the files from. This is a mandatory option.</p>
</li>
<li>
<p><strong>must_authenticate_with</strong>: <code>[{Username, Hostname}, ...]</code><br/>
List of accounts that are allowed to use this service. Default value:
<code>[]</code>.</p>
</li>
</ul>
<p><strong>Examples:</strong></p>
<p>This example configuration will serve the files from the local directory
<code>/var/www</code> in the address <code>http://example.org:5280/pub/content/</code>. In
this example a new content type <code>ogg</code> is defined, <code>png</code> is redefined,
and <code>jpg</code> definition is deleted:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="nt">listen</span><span class="p">:</span>
</span><span id="__span-17-2"><a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-17-3"><a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5280</span>
</span><span id="__span-17-4"><a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">    </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ejabberd_http</span>
</span><span id="__span-17-5"><a href="#__codelineno-17-5" id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">    </span><span class="nt">request_handlers</span><span class="p">:</span>
</span><span id="__span-17-6"><a href="#__codelineno-17-6" id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">      </span><span class="nt">/pub/content</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mod_http_fileserver</span>
</span><span id="__span-17-7"><a href="#__codelineno-17-7" id="__codelineno-17-7" name="__codelineno-17-7"></a>
</span><span id="__span-17-8"><a href="#__codelineno-17-8" id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-17-9"><a href="#__codelineno-17-9" id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="w">  </span><span class="nt">mod_http_fileserver</span><span class="p">:</span>
</span><span id="__span-17-10"><a href="#__codelineno-17-10" id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="w">    </span><span class="nt">docroot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/www</span>
</span><span id="__span-17-11"><a href="#__codelineno-17-11" id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="w">    </span><span class="nt">accesslog</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/ejabberd/access.log</span>
</span><span id="__span-17-12"><a href="#__codelineno-17-12" id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="w">    </span><span class="nt">directory_indices</span><span class="p">:</span>
</span><span id="__span-17-13"><a href="#__codelineno-17-13" id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">index.html</span>
</span><span id="__span-17-14"><a href="#__codelineno-17-14" id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main.htm</span>
</span><span id="__span-17-15"><a href="#__codelineno-17-15" id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="w">    </span><span class="nt">custom_headers</span><span class="p">:</span>
</span><span id="__span-17-16"><a href="#__codelineno-17-16" id="__codelineno-17-16" name="__codelineno-17-16"></a><span class="w">      </span><span class="nt">X-Powered-By</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Erlang/OTP</span>
</span><span id="__span-17-17"><a href="#__codelineno-17-17" id="__codelineno-17-17" name="__codelineno-17-17"></a><span class="w">      </span><span class="nt">X-Fry</span><span class="p">:</span><span class="w"> </span><span class="s">"It's</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">widely-believed</span><span class="nv"> </span><span class="s">fact!"</span>
</span><span id="__span-17-18"><a href="#__codelineno-17-18" id="__codelineno-17-18" name="__codelineno-17-18"></a><span class="w">    </span><span class="nt">content_types</span><span class="p">:</span>
</span><span id="__span-17-19"><a href="#__codelineno-17-19" id="__codelineno-17-19" name="__codelineno-17-19"></a><span class="w">      </span><span class="nt">.ogg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">audio/ogg</span>
</span><span id="__span-17-20"><a href="#__codelineno-17-20" id="__codelineno-17-20" name="__codelineno-17-20"></a><span class="w">      </span><span class="nt">.png</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">image/png</span>
</span><span id="__span-17-21"><a href="#__codelineno-17-21" id="__codelineno-17-21" name="__codelineno-17-21"></a><span class="w">    </span><span class="nt">default_content_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">text/html</span>
</span></code></pre></div>
<a id="mod-http-upload"></a><h2 id="mod_http_upload">mod_http_upload<a class="headerlink" href="#mod_http_upload" title="Permanent link">¶</a></h2>
<p>This module allows for requesting permissions to upload a file via HTTP
as described in <a href="https://xmpp.org/extensions/xep-0363.html">XEP-0363: HTTP File
Upload</a>. If the request is
accepted, the client receives a URL for uploading the file and another
URL from which that file can later be downloaded.</p>
<p>In order to use this module, it must be enabled in <code>listen</code> →
<code>ejabberd_http</code> →
<a href="../listen-options/#request_handlers">request_handlers</a>.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access</strong>: <code>AccessName</code><br/>
This option defines the access rule to limit who is permitted to use the
HTTP upload service. The default value is <code>local</code>. If no access rule of
that name exists, no user will be allowed to use the service.</p>
</li>
<li>
<p><strong>custom_headers</strong>: <code>{Name: Value}</code><br/>
This option specifies additional header fields to be included in all
HTTP responses. By default no custom headers are included.</p>
</li>
<li>
<p><strong>dir_mode</strong>: <code>Permission</code><br/>
This option defines the permission bits of the <code>docroot</code> directory and
any directories created during file uploads. The bits are specified as
an octal number (see the <code>chmod(1)</code> manual page) within double quotes.
For example: <code>"0755"</code>. The default is undefined, which means no explicit
permissions will be set.</p>
</li>
<li>
<p><strong>docroot</strong>: <code>Path</code><br/>
Uploaded files are stored below the directory specified (as an absolute
path) with this option. The keyword <code>@HOME@</code> is replaced with the home
directory of the user running ejabberd, and the keyword <code>@HOST@</code> with
the virtual host name. The default value is <code>"@HOME@/upload"</code>.</p>
</li>
<li>
<p><strong>external_secret</strong>: <code>Text</code><br/>
This option makes it possible to offload all HTTP Upload processing to a
separate HTTP server. Both ejabberd and the HTTP server should share
this secret and behave exactly as described at <a href="https://modules.prosody.im/mod_http_upload_external.html#implementation">Prosody’s
mod_http_upload_external:
Implementation</a>.
There is no default value.</p>
</li>
<li>
<p><strong>file_mode</strong>: <code>Permission</code><br/>
This option defines the permission bits of uploaded files. The bits are
specified as an octal number (see the <code>chmod(1)</code> manual page) within
double quotes. For example: <code>"0644"</code>. The default is undefined, which
means no explicit permissions will be set.</p>
</li>
<li>
<p><strong>get_url</strong>: <code>URL</code><br/>
This option specifies the initial part of the GET URLs used for
downloading the files. The default value is <code>undefined</code>. When this
option is <code>undefined</code>, this option is set to the same value as
<code>put_url</code>. The keyword <code>@HOST@</code> is replaced with the virtual host name.
NOTE: if GET requests are handled by this module, the <code>get_url</code> must
match the <code>put_url</code>. Setting it to a different value only makes sense
if an external web server or <a href="#mod_http_fileserver">mod_http_fileserver</a> is used to serve
the uploaded files.</p>
</li>
<li>
<p><strong>host</strong><br/>
Deprecated. Use <code>hosts</code> instead.</p>
</li>
<li>
<p><strong>hosts</strong>: <code>[Host, ...]</code><br/>
This option defines the Jabber IDs of the service. If the <code>hosts</code> option
is not specified, the only Jabber ID will be the hostname of the virtual
host with the prefix <code>"upload."</code>. The keyword <code>@HOST@</code> is replaced with
the real virtual host name.</p>
</li>
<li>
<p><strong>jid_in_url</strong>: <code>node | sha1</code><br/>
When this option is set to <code>node</code>, the node identifier of the user’s JID
(i.e., the user name) is included in the GET and PUT URLs generated by
<code>mod_http_upload</code>. Otherwise, a SHA-1 hash of the user’s bare JID is
included instead. The default value is <code>sha1</code>.</p>
</li>
<li>
<p><strong>max_size</strong>: <code>Size</code><br/>
This option limits the acceptable file size. Either a number of bytes
(larger than zero) or <code>infinity</code> must be specified. The default value is
<code>104857600</code>.</p>
</li>
<li>
<p><strong>name</strong>: <code>Name</code><br/>
A name of the service in the Service Discovery. The default value is
<code>"HTTP File Upload"</code>. Please note this will only be displayed by some
XMPP clients.</p>
</li>
<li>
<p><strong>put_url</strong>: <code>URL</code><br/>
This option specifies the initial part of the PUT URLs used for file
uploads. The keyword <code>@HOST@</code> is replaced with the virtual host name.
NOTE: different virtual hosts cannot use the same PUT URL. The default
value is <code>"https://@HOST@:5443/upload"</code>.</p>
</li>
<li>
<p><strong>rm_on_unregister</strong>: <code>true | false</code><br/>
This option specifies whether files uploaded by a user should be removed
when that user is unregistered. The default value is <code>true</code>.</p>
</li>
<li>
<p><strong>secret_length</strong>: <code>Length</code><br/>
This option defines the length of the random string included in the GET
and PUT URLs generated by <code>mod_http_upload</code>. The minimum length is <code>8</code>
characters, but it is recommended to choose a larger value. The default
value is <code>40</code>.</p>
</li>
<li>
<p><strong>service_url</strong><br/>
Deprecated.</p>
</li>
<li>
<p><strong>thumbnail</strong>: <code>true | false</code><br/>
This option specifies whether ejabberd should create thumbnails of
uploaded images. If a thumbnail is created, a &lt;thumbnail/&gt; element
that contains the download &lt;uri/&gt; and some metadata is returned
with the PUT response. The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>vcard</strong>: <code>vCard</code><br/>
A custom vCard of the service that will be displayed by some XMPP
clients in Service Discovery. The value of <code>vCard</code> is a YAML map
constructed from an XML representation of vCard. Since the
representation has no attributes, the mapping is straightforward.</p>
<p><strong>Example</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="c1"># This XML representation of vCard:</span>
</span><span id="__span-18-2"><a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="c1">#   &lt;vCard xmlns='vcard-temp'&gt;</span>
</span><span id="__span-18-3"><a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="c1">#     &lt;FN&gt;Conferences&lt;/FN&gt;</span>
</span><span id="__span-18-4"><a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="c1">#     &lt;ADR&gt;</span>
</span><span id="__span-18-5"><a href="#__codelineno-18-5" id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="c1">#       &lt;WORK/&gt;</span>
</span><span id="__span-18-6"><a href="#__codelineno-18-6" id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="c1">#       &lt;STREET&gt;Elm Street&lt;/STREET&gt;</span>
</span><span id="__span-18-7"><a href="#__codelineno-18-7" id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="c1">#     &lt;/ADR&gt;</span>
</span><span id="__span-18-8"><a href="#__codelineno-18-8" id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="c1">#   &lt;/vCard&gt;</span>
</span><span id="__span-18-9"><a href="#__codelineno-18-9" id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="c1">#</span>
</span><span id="__span-18-10"><a href="#__codelineno-18-10" id="__codelineno-18-10" name="__codelineno-18-10"></a><span class="c1"># is translated to:</span>
</span><span id="__span-18-11"><a href="#__codelineno-18-11" id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="nt">vcard</span><span class="p">:</span>
</span><span id="__span-18-12"><a href="#__codelineno-18-12" id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="w">  </span><span class="nt">fn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Conferences</span>
</span><span id="__span-18-13"><a href="#__codelineno-18-13" id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="w">  </span><span class="nt">adr</span><span class="p">:</span>
</span><span id="__span-18-14"><a href="#__codelineno-18-14" id="__codelineno-18-14" name="__codelineno-18-14"></a><span class="w">    </span><span class="p p-Indicator">-</span>
</span><span id="__span-18-15"><a href="#__codelineno-18-15" id="__codelineno-18-15" name="__codelineno-18-15"></a><span class="w">      </span><span class="nt">work</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-18-16"><a href="#__codelineno-18-16" id="__codelineno-18-16" name="__codelineno-18-16"></a><span class="w">      </span><span class="nt">street</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Elm Street</span>
</span></code></pre></div>
</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="nt">listen</span><span class="p">:</span>
</span><span id="__span-19-2"><a href="#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-19-3"><a href="#__codelineno-19-3" id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5443</span>
</span><span id="__span-19-4"><a href="#__codelineno-19-4" id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">    </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ejabberd_http</span>
</span><span id="__span-19-5"><a href="#__codelineno-19-5" id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w">    </span><span class="nt">tls</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-19-6"><a href="#__codelineno-19-6" id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="w">    </span><span class="nt">request_handlers</span><span class="p">:</span>
</span><span id="__span-19-7"><a href="#__codelineno-19-7" id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="w">      </span><span class="nt">/upload</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mod_http_upload</span>
</span><span id="__span-19-8"><a href="#__codelineno-19-8" id="__codelineno-19-8" name="__codelineno-19-8"></a>
</span><span id="__span-19-9"><a href="#__codelineno-19-9" id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-19-10"><a href="#__codelineno-19-10" id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="w">  </span><span class="nt">mod_http_upload</span><span class="p">:</span>
</span><span id="__span-19-11"><a href="#__codelineno-19-11" id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="w">    </span><span class="nt">docroot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/ejabberd/upload</span>
</span><span id="__span-19-12"><a href="#__codelineno-19-12" id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="w">    </span><span class="nt">put_url</span><span class="p">:</span><span class="w"> </span><span class="s">"https://@HOST@:5443/upload"</span>
</span></code></pre></div>
<a id="mod-http-upload-quota"></a><h2 id="mod_http_upload_quota">mod_http_upload_quota<a class="headerlink" href="#mod_http_upload_quota" title="Permanent link">¶</a></h2>
<p>This module adds quota support for mod_http_upload.</p>
<p>This module depends on <a href="#mod_http_upload">mod_http_upload</a>.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access_hard_quota</strong>: <code>AccessName</code><br/>
This option defines which access rule is used to specify the "hard
quota" for the matching JIDs. That rule must yield a positive number for
any JID that is supposed to have a quota limit. This is the number of
megabytes a corresponding user may upload. When this threshold is
exceeded, ejabberd deletes the oldest files uploaded by that user until
their disk usage equals or falls below the specified soft quota (see
also option <code>access_soft_quota</code>). The default value is
<code>hard_upload_quota</code>.</p>
</li>
<li>
<p><strong>access_soft_quota</strong>: <code>AccessName</code><br/>
This option defines which access rule is used to specify the "soft
quota" for the matching JIDs. That rule must yield a positive number of
megabytes for any JID that is supposed to have a quota limit. See the
description of the <code>access_hard_quota</code> option for details. The default
value is <code>soft_upload_quota</code>.</p>
</li>
<li>
<p><strong>max_days</strong>: <code>Days</code><br/>
If a number larger than zero is specified, any files (and directories)
older than this number of days are removed from the subdirectories of
the <code>docroot</code> directory, once per day. The default value is <code>infinity</code>.</p>
</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Notice it’s not necessary to specify the <code>access_hard_quota</code> and
<code>access_soft_quota</code> options in order to use the quota feature. You can
stick to the default names and just specify access rules such as those
in this example:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-20-1"><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="nt">shaper_rules</span><span class="p">:</span>
</span><span id="__span-20-2"><a href="#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="w">  </span><span class="nt">soft_upload_quota</span><span class="p">:</span>
</span><span id="__span-20-3"><a href="#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="w">    </span><span class="nt">1000</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"> </span><span class="c1"># MiB</span>
</span><span id="__span-20-4"><a href="#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">  </span><span class="nt">hard_upload_quota</span><span class="p">:</span>
</span><span id="__span-20-5"><a href="#__codelineno-20-5" id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">    </span><span class="nt">1100</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"> </span><span class="c1"># MiB</span>
</span><span id="__span-20-6"><a href="#__codelineno-20-6" id="__codelineno-20-6" name="__codelineno-20-6"></a>
</span><span id="__span-20-7"><a href="#__codelineno-20-7" id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-20-8"><a href="#__codelineno-20-8" id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="w">  </span><span class="nt">mod_http_upload</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span><span id="__span-20-9"><a href="#__codelineno-20-9" id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="w">  </span><span class="nt">mod_http_upload_quota</span><span class="p">:</span>
</span><span id="__span-20-10"><a href="#__codelineno-20-10" id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="w">    </span><span class="nt">max_days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</span></code></pre></div>
<a id="mod-jidprep"></a><h2 id="mod_jidprep">mod_jidprep<a class="headerlink" href="#mod_jidprep" title="Permanent link">¶</a></h2>
<p>This module allows XMPP clients to ask the server to normalize a JID as
per the rules specified in <a href="https://tools.ietf.org/html/rfc6122">RFC 6122: XMPP Address
Format</a>. This might be useful for
clients in certain constrained environments, or for testing purposes.</p>
<p><strong>Available options:</strong></p>
<ul>
<li><strong>access</strong>: <code>AccessName</code><br/>
This option defines which access rule will be used to control who is
allowed to use this service. The default value is <code>local</code>.</li>
</ul>
<a id="mod-last"></a><h2 id="mod_last">mod_last<a class="headerlink" href="#mod_last" title="Permanent link">¶</a></h2>
<p>This module adds support for <a href="https://xmpp.org/extensions/xep-0012.html">XEP-0012: Last
Activity</a>. It can be used to
discover when a disconnected user last accessed the server, to know when
a connected user was last active on the server, or to query the uptime
of the ejabberd server.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_missed</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#cache_missed">cache_missed</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>use_cache</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
</ul>
<a id="mod-legacy-auth"></a><h2 id="mod_legacy_auth">mod_legacy_auth<a class="headerlink" href="#mod_legacy_auth" title="Permanent link">¶</a></h2>
<p>The module implements <a href="https://xmpp.org/extensions/xep-0078.html">XEP-0078: Non-SASL
Authentication</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This type of authentication was obsoleted in 2008 and you unlikely
need this module unless you have something like outdated Jabber bots.</p>
</div>
<p>The module has no options.</p>
<a id="mod-mam"></a><h2 id="mod_mam">mod_mam<a class="headerlink" href="#mod_mam" title="Permanent link">¶</a></h2>
<p>This module implements <a href="https://xmpp.org/extensions/xep-0313.html">XEP-0313: Message Archive
Management</a> and <a href="https://xmpp.org/extensions/xep-0441.html">XEP-0441:
Message Archive Management
Preferences</a>. Compatible XMPP
clients can use it to store their chat history on the server.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Mnesia backend for mod_mam is not recommended: it’s limited to 2GB
and often gets corrupted when reaching this limit. SQL backend is
recommended. Namely, for small servers SQLite is a preferred choice
because it’s very easy to configure.</p>
</div>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access_preferences</strong>: <code>AccessName</code><br/>
This access rule defines who is allowed to modify the MAM preferences.
The default value is <code>all</code>.</p>
</li>
<li>
<p><strong>assume_mam_usage</strong>: <code>true | false</code><br/>
This option determines how ejabberd’s stream management code (see
<a href="#mod_stream_mgmt">mod_stream_mgmt</a>) handles unacknowledged messages when the connection
is lost. Usually, such messages are either bounced or resent. However,
neither is done for messages that were stored in the user’s MAM archive
if this option is set to <code>true</code>. In this case, ejabberd assumes those
messages will be retrieved from the archive. The default value is
<code>false</code>.</p>
</li>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_missed</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#cache_missed">cache_missed</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>clear_archive_on_room_destroy</strong>: <code>true | false</code><br/>
Whether to destroy message archive of a room (see <a href="#mod_muc">mod_muc</a>) when it
gets destroyed. The default value is <code>true</code>.</p>
</li>
<li>
<p><strong>compress_xml</strong>: <code>true | false</code><br/>
When enabled, new messages added to archives are compressed using a
custom compression algorithm. This feature works only with SQL backends.
The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>default</strong>: <code>always | never | roster</code><br/>
The option defines default policy for chat history. When <code>always</code> is set
every chat message is stored. With <code>roster</code> only chat history with
contacts from user’s roster is stored. And <code>never</code> fully disables chat
history. Note that a client can change its policy via protocol commands.
The default value is <code>never</code>.</p>
</li>
<li>
<p><strong>request_activates_archiving</strong>: <code>true | false</code><br/>
If the value is <code>true</code>, no messages are stored for a user until their
client issue a MAM request, regardless of the value of the <code>default</code>
option. Once the server received a request, that user’s messages are
archived as usual. The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>use_cache</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
<li>
<p><strong>user_mucsub_from_muc_archive</strong>: <code>true | false</code><br/>
When this option is disabled, for each individual subscriber a separate
mucsub message is stored. With this option enabled, when a user fetches
archive virtual mucsub, messages are generated from muc archives. The
default value is <code>false</code>.</p>
</li>
</ul>
<a id="mod-matrix-gw"></a><h2 id="mod_matrix_gw">mod_matrix_gw 🟤<a class="headerlink" href="#mod_matrix_gw" title="Permanent link">¶</a></h2>
<p><span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">improved in <a href="../../../archive/25.03/">25.03</a></span></span></p>
<p><a href="https://matrix.org/">Matrix</a> gateway. Erlang/OTP 25 or higher is
required to use this module. This module is available since ejabberd
24.02.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>host</strong>: <code>Host</code><br/>
This option defines the Jabber IDs of the service. If the <code>host</code> option
is not specified, the Jabber ID will be the hostname of the virtual host
with the prefix <code>"matrix."</code>. The keyword <code>@HOST@</code> is replaced with the
real virtual host name.</p>
</li>
<li>
<p><strong>key</strong>: <code>string()</code><br/>
Value of the matrix signing key, in base64.</p>
</li>
<li>
<p><strong>key_name</strong>: <code>string()</code><br/>
Name of the matrix signing key.</p>
</li>
<li>
<p><strong>matrix_domain</strong>: <code>Domain</code><br/>
Specify a domain in the Matrix federation. The keyword <code>@HOST@</code> is
replaced with the hostname. The default value is <code>@HOST@</code>.</p>
</li>
<li>
<p><strong>matrix_id_as_jid</strong>: <code>true | false</code><br/>
If set to <code>true</code>, all packets failing to be delivered via an XMPP
server-to-server connection will then be routed to the Matrix gateway by
translating a Jabber ID <code>user@matrixdomain.tld</code> to a Matrix user
identifier <code>@user:matrixdomain.tld</code>. When set to <code>false</code>, messages must
be explicitly sent to the matrix gateway service Jabber ID to be routed
to a remote Matrix server. In this case, to send a message to Matrix
user <code>@user:matrixdomain.tld</code>, the client must send a message to the JID
<code>user%&lt;matrixdomain.tld@matrix.myxmppdomain&gt;.tld</code>, where
<code>matrix.myxmppdomain.tld</code> is the JID of the gateway service as set by
the <code>host</code> option. The default is <code>false</code>.</p>
</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-21-1"><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="nt">listen</span><span class="p">:</span>
</span><span id="__span-21-2"><a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-21-3"><a href="#__codelineno-21-3" id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8448</span>
</span><span id="__span-21-4"><a href="#__codelineno-21-4" id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">    </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ejabberd_http</span>
</span><span id="__span-21-5"><a href="#__codelineno-21-5" id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="w">    </span><span class="nt">tls</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-21-6"><a href="#__codelineno-21-6" id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="w">    </span><span class="nt">request_handlers</span><span class="p">:</span>
</span><span id="__span-21-7"><a href="#__codelineno-21-7" id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="w">      </span><span class="s">"/_matrix"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mod_matrix_gw</span>
</span><span id="__span-21-8"><a href="#__codelineno-21-8" id="__codelineno-21-8" name="__codelineno-21-8"></a>
</span><span id="__span-21-9"><a href="#__codelineno-21-9" id="__codelineno-21-9" name="__codelineno-21-9"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-21-10"><a href="#__codelineno-21-10" id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="w">  </span><span class="nt">mod_matrix_gw</span><span class="p">:</span>
</span><span id="__span-21-11"><a href="#__codelineno-21-11" id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="w">    </span><span class="nt">key_name</span><span class="p">:</span><span class="w"> </span><span class="s">"key1"</span>
</span><span id="__span-21-12"><a href="#__codelineno-21-12" id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="w">    </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="s">"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span>
</span><span id="__span-21-13"><a href="#__codelineno-21-13" id="__codelineno-21-13" name="__codelineno-21-13"></a><span class="w">    </span><span class="nt">matrix_id_as_jid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div>
<a id="mod-metrics"></a><h2 id="mod_metrics">mod_metrics<a class="headerlink" href="#mod_metrics" title="Permanent link">¶</a></h2>
<p>This module sends events to external backend (by now only
<a href="https://github.com/processone/grapherl">grapherl</a> is supported).
Supported events are:</p>
<ul>
<li>
<p>sm_register_connection</p>
</li>
<li>
<p>sm_remove_connection</p>
</li>
<li>
<p>user_send_packet</p>
</li>
<li>
<p>user_receive_packet</p>
</li>
<li>
<p>s2s_send_packet</p>
</li>
<li>
<p>s2s_receive_packet</p>
</li>
<li>
<p>register_user</p>
</li>
<li>
<p>remove_user</p>
</li>
<li>
<p>offline_message</p>
</li>
</ul>
<p>When enabled, every call to these hooks triggers a counter event to be
sent to the external backend.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>ip</strong>: <code>IPv4Address</code><br/>
IPv4 address where the backend is located. The default value is
<code>127.0.0.1</code>.</p>
</li>
<li>
<p><strong>port</strong>: <code>Port</code><br/>
An internet port number at which the backend is listening for incoming
connections/packets. The default value is <code>11111</code>.</p>
</li>
</ul>
<a id="mod-mix"></a><h2 id="mod_mix">mod_mix<a class="headerlink" href="#mod_mix" title="Permanent link">¶</a></h2>
<p><span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in 16.03 and improved in 19.02</span></span></p>
<p>This module is an experimental implementation of <a href="https://xmpp.org/extensions/xep-0369.html">XEP-0369: Mediated
Information eXchange (MIX)</a>.
It’s asserted that the MIX protocol is going to replace the MUC protocol
in the future (see <a href="#mod_muc">mod_muc</a>).</p>
<p>To learn more about how to use that feature, you can refer to our
tutorial: <a href="../../../tutorials/mix-010/">Getting started with MIX</a></p>
<p>The module depends on <a href="#mod_mam">mod_mam</a>.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access_create</strong>: <code>AccessName</code><br/>
An access rule to control MIX channels creations. The default value is
<code>all</code>.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>host</strong><br/>
Deprecated. Use <code>hosts</code> instead.</p>
</li>
<li>
<p><strong>hosts</strong>: <code>[Host, ...]</code><br/>
This option defines the Jabber IDs of the service. If the <code>hosts</code> option
is not specified, the only Jabber ID will be the hostname of the virtual
host with the prefix <code>"mix."</code>. The keyword <code>@HOST@</code> is replaced with the
real virtual host name.</p>
</li>
<li>
<p><strong>name</strong>: <code>Name</code><br/>
A name of the service in the Service Discovery. This will only be
displayed by special XMPP clients. The default value is <code>Channels</code>.</p>
</li>
</ul>
<a id="mod-mix-pam"></a><h2 id="mod_mix_pam">mod_mix_pam<a class="headerlink" href="#mod_mix_pam" title="Permanent link">¶</a></h2>
<p>This module implements <a href="https://xmpp.org/extensions/xep-0405.html">XEP-0405: Mediated Information eXchange (MIX):
Participant Server
Requirements</a>. The module is
needed if MIX compatible clients on your server are going to join MIX
channels (either on your server or on any remote servers).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a href="#mod_mix">mod_mix</a> is not required for this module to work, however, without
<code>mod_mix_pam</code> the MIX functionality of your local XMPP clients will
be impaired.</p>
</div>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_missed</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#cache_missed">cache_missed</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>use_cache</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
</ul>
<a id="mod-mqtt"></a><h2 id="mod_mqtt">mod_mqtt<a class="headerlink" href="#mod_mqtt" title="Permanent link">¶</a></h2>
<p>This module adds <a href="../../guide/mqtt/">support for the MQTT</a>
protocol version <code>3.1.1</code> and <code>5.0</code>. Remember to configure <code>mod_mqtt</code> in
<code>modules</code> and <code>listen</code> sections.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access_publish</strong>: <code>{TopicFilter: AccessName}</code><br/>
Access rules to restrict access to topics for publishers. By default
there are no restrictions.</p>
</li>
<li>
<p><strong>access_subscribe</strong>: <code>{TopicFilter: AccessName}</code><br/>
Access rules to restrict access to topics for subscribers. By default
there are no restrictions.</p>
</li>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_missed</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#cache_missed">cache_missed</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>match_retained_limit</strong>: <code>pos_integer() | infinity</code><br/>
The option limits the number of retained messages returned to a client
when it subscribes to some topic filter. The default value is <code>1000</code>.</p>
</li>
<li>
<p><strong>max_queue</strong>: <code>Size</code><br/>
Maximum queue size for outgoing packets. The default value is <code>5000</code>.</p>
</li>
<li>
<p><strong>max_topic_aliases</strong>: <code>0..65535</code><br/>
The maximum number of aliases a client is able to associate with the
topics. The default value is <code>100</code>.</p>
</li>
<li>
<p><strong>max_topic_depth</strong>: <code>Depth</code><br/>
The maximum topic depth, i.e. the number of slashes (<code>/</code>) in the topic.
The default value is <code>8</code>.</p>
</li>
<li>
<p><strong>queue_type</strong>: <code>ram | file</code><br/>
Same as top-level <a href="../toplevel/#queue_type">queue_type</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ram_db_type</strong>: <code>mnesia</code><br/>
Same as top-level <a href="../toplevel/#default_ram_db">default_ram_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>session_expiry</strong>: <code>timeout()</code><br/>
The option specifies how long to wait for an MQTT session resumption.
When <code>0</code> is set, the session gets destroyed when the underlying client
connection is closed. The default value is <code>5</code> minutes.</p>
</li>
<li>
<p><strong>use_cache</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
</ul>
<a id="mod-mqtt-bridge"></a><h2 id="mod_mqtt_bridge">mod_mqtt_bridge<a class="headerlink" href="#mod_mqtt_bridge" title="Permanent link">¶</a></h2>
<p>This module adds ability to synchronize local MQTT topics with data on
remote servers It can update topics on remote servers when local user
updates local topic, or can subscribe for changes on remote server, and
update local copy when remote data is updated. It is available since
ejabberd <a href="../../../archive/23.01/">23.01</a>.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>replication_user</strong>: <code>JID</code><br/>
Identifier of a user that will be assigned as owner of local changes.</p>
</li>
<li>
<p><strong>servers</strong>: <code>{ServerUrl: {Key: Value}}</code><br/>
Declaration of data to share for each ServerUrl. Server URLs can use
schemas: <code>mqtt</code>, <code>mqtts</code> (mqtt with tls), <code>mqtt5</code>, <code>mqtt5s</code> (both to
trigger v5 protocol), <code>ws</code>, <code>wss</code>, <code>ws5</code>, <code>wss5</code>. Keys must be:</p>
<ul>
<li>
<p><strong>authentication</strong>: <code>{AuthKey: AuthValue}</code><br/>
   List of authentication
information, where AuthKey can be: <code>username</code> and <code>password</code> fields,
or <code>certfile</code> pointing to client certificate. Certificate
authentication can be used only with mqtts, mqtt5s, wss, wss5.</p>
</li>
<li>
<p><strong>publish</strong>: <code>{LocalTopic: RemoteTopic}</code><br/>
   Either publish or subscribe
must be set, or both.</p>
</li>
<li>
<p><strong>subscribe</strong>: <code>{RemoteTopic: LocalTopic}</code><br/>
   Either publish or
subscribe must be set, or both.</p>
</li>
</ul>
</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-22-1"><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-22-2"><a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="w">  </span><span class="nt">mod_mqtt_bridge</span><span class="p">:</span>
</span><span id="__span-22-3"><a href="#__codelineno-22-3" id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">    </span><span class="nt">replication_user</span><span class="p">:</span><span class="w"> </span><span class="s">"mqtt@xmpp.server.com"</span>
</span><span id="__span-22-4"><a href="#__codelineno-22-4" id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">    </span><span class="nt">servers</span><span class="p">:</span>
</span><span id="__span-22-5"><a href="#__codelineno-22-5" id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="w">      </span><span class="s">"mqtt://server.com"</span><span class="p p-Indicator">:</span>
</span><span id="__span-22-6"><a href="#__codelineno-22-6" id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="w">        </span><span class="nt">authentication</span><span class="p">:</span>
</span><span id="__span-22-7"><a href="#__codelineno-22-7" id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">          </span><span class="nt">certfile</span><span class="p">:</span><span class="w"> </span><span class="s">"/etc/ejabberd/mqtt_server.pem"</span>
</span><span id="__span-22-8"><a href="#__codelineno-22-8" id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="w">        </span><span class="nt">publish</span><span class="p">:</span>
</span><span id="__span-22-9"><a href="#__codelineno-22-9" id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">          </span><span class="s">"localA"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">"remoteA"</span><span class="w"> </span><span class="c1"># local changes to 'localA' will be replicated on remote server as 'remoteA'</span>
</span><span id="__span-22-10"><a href="#__codelineno-22-10" id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="w">          </span><span class="s">"topicB"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">"topicB"</span>
</span><span id="__span-22-11"><a href="#__codelineno-22-11" id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="w">        </span><span class="nt">subscribe</span><span class="p">:</span>
</span><span id="__span-22-12"><a href="#__codelineno-22-12" id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="w">          </span><span class="s">"remoteB"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">"localB"</span><span class="w"> </span><span class="c1"># changes to 'remoteB' on remote server will be stored as 'localB' on local server</span>
</span></code></pre></div>
<a id="mod-muc"></a><h2 id="mod_muc">mod_muc<a class="headerlink" href="#mod_muc" title="Permanent link">¶</a></h2>
<p>This module provides support for <a href="https://xmpp.org/extensions/xep-0045.html">XEP-0045: Multi-User
Chat</a>. Users can discover
existing rooms, join or create them. Occupants of a room can chat in
public or have private chats.</p>
<p>The MUC service allows any Jabber ID to register a nickname, so nobody
else can use that nickname in any room in the MUC service. To register a
nickname, open the Service Discovery in your XMPP client and register in
the MUC service.</p>
<p>It is also possible to register a nickname in a room, so nobody else can
use that nickname in that room. If a nick is registered in the MUC
service, that nick cannot be registered in any room, and vice versa: a
nick that is registered in a room cannot be registered at the MUC
service.</p>
<p>This module supports clustering and load balancing. One module can be
started per cluster node. Rooms are distributed at creation time on all
available MUC module instances. The multi-user chat module is clustered
but the rooms themselves are not clustered nor fault-tolerant: if the
node managing a set of rooms goes down, the rooms disappear and they
will be recreated on an available node on first connection attempt.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access</strong>: <code>AccessName</code><br/>
You can specify who is allowed to use the Multi-User Chat service. By
default everyone is allowed to use it.</p>
</li>
<li>
<p><strong>access_admin</strong>: <code>AccessName</code><br/>
This option specifies who is allowed to administrate the Multi-User Chat
service. The default value is <code>none</code>, which means that only the room
creator can administer their room. The administrators can send a normal
message to the service JID, and it will be shown in all active rooms as
a service message. The administrators can send a groupchat message to
the JID of an active room, and the message will be shown in the room as
a service message.</p>
</li>
<li>
<p><strong>access_create</strong>: <code>AccessName</code><br/>
To configure who is allowed to create new rooms at the Multi-User Chat
service, this option can be used. The default value is <code>all</code>, which
means everyone is allowed to create rooms.</p>
</li>
<li>
<p><strong>access_mam</strong>: <code>AccessName</code><br/>
To configure who is allowed to modify the <code>mam</code> room option. The default
value is <code>all</code>, which means everyone is allowed to modify that option.</p>
</li>
<li>
<p><strong>access_persistent</strong>: <code>AccessName</code><br/>
To configure who is allowed to modify the <code>persistent</code> room option. The
default value is <code>all</code>, which means everyone is allowed to modify that
option.</p>
</li>
<li>
<p><strong>access_register</strong>: <code>AccessName</code><br/>
<span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">improved in <a href="../../../archive/23.10/">23.10</a></span></span>
 This option specifies who
is allowed to register nickname within the Multi-User Chat service and
rooms. The default is <code>all</code> for backward compatibility, which means that
any user is allowed to register any free nick in the MUC service and in
the rooms.</p>
</li>
<li>
<p><strong>cleanup_affiliations_on_start</strong>: <code>true | false</code><br/>
<span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/22.05/">22.05</a></span></span>
 Remove affiliations for
non-existing local users on startup. The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>default_room_options</strong>: <code>Options</code><br/>
Define the default room options. Note that the creator of a room can
modify the options of his room at any time using an XMPP client with MUC
capability. The <code>Options</code> are:</p>
<ul>
<li>
<p><strong>allow_change_subj</strong>: <code>true | false</code><br/>
   Allow occupants to change
the subject. The default value is <code>true</code>.</p>
</li>
<li>
<p><strong>allow_private_messages_from_visitors</strong>: <em>anyone | moderators |
nobody</em> Visitors can send private messages to other occupants. The
default value is <code>anyone</code> which means visitors can send private
messages to any occupant.</p>
</li>
<li>
<p><strong>allow_query_users</strong>: <code>true | false</code><br/>
   Occupants can send IQ
queries to other occupants. The default value is <code>true</code>.</p>
</li>
<li>
<p><strong>allow_subscription</strong>: <code>true | false</code><br/>
   Allow users to subscribe to
room events as described in
<a href="../../../developer/xmpp-clients-bots/extensions/muc-sub/">Multi-User Chat Subscriptions</a>.
The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>allow_user_invites</strong>: <code>true | false</code><br/>
   Allow occupants to send
invitations. The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>allow_visitor_nickchange</strong>: <code>true | false</code><br/>
   Allow visitors to
change nickname. The default value is <code>true</code>.</p>
</li>
<li>
<p><strong>allow_visitor_status</strong>: <code>true | false</code><br/>
   Allow visitors to send
status text in presence updates. If disallowed, the status text is
stripped before broadcasting the presence update to all the room
occupants. The default value is <code>true</code>.</p>
</li>
<li>
<p><strong>allow_voice_requests</strong>: <code>true | false</code><br/>
   Allow visitors in a
moderated room to request voice. The default value is <code>true</code>.</p>
</li>
<li>
<p><strong>allowpm</strong>: <code>anyone | participants | moderators | none</code><br/>
   Who can
send private messages. The default value is <code>anyone</code>.</p>
</li>
<li>
<p><strong>anonymous</strong>: <code>true | false</code><br/>
   The room is anonymous: occupants don’t
see the real JIDs of other occupants. Note that the room moderators
can always see the real JIDs of the occupants. The default value is
<code>true</code>.</p>
</li>
<li>
<p><strong>captcha_protected</strong>: <code>true | false</code><br/>
   When a user tries to join a
room where they have no affiliation (not owner, admin or member),
the room requires them to fill a CAPTCHA challenge (see section
<a href="../basic/#captcha">CAPTCHA</a> in order to accept their join in the
room. The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>description</strong>: <code>Room Description</code><br/>
   Short description of the room.
The default value is an empty string.</p>
</li>
<li>
<p>*<em>enable_hats 🟤<code>*:</code>true | false</em><br/>
<code>Note</code> about this option:
improved in <a href="../../../archive/25.03/">25.03</a>. Allow extended roles as defined in XEP-0317 Hats.
Check the <a href="../../../tutorials/muc-hats/">MUC Hats</a> tutorial. The
default value is <code>false</code>.</p>
</li>
<li>
<p><strong>lang</strong>: <code>Language</code><br/>
   Preferred language for the discussions in the
room. The language format should conform to RFC 5646. There is no
value by default.</p>
</li>
<li>
<p><strong>logging</strong>: <code>true | false</code><br/>
   The public messages are logged using
<a href="#mod_muc_log">mod_muc_log</a>. The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>mam</strong>: <code>true | false</code><br/>
   Enable message archiving. Implies mod_mam
is enabled. The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>max_users</strong>: <code>Number</code><br/>
   Maximum number of occupants in the room.
The default value is <code>200</code>.</p>
</li>
<li>
<p><strong>members_by_default</strong>: <code>true | false</code><br/>
   The occupants that enter
the room are participants by default, so they have "voice". The
default value is <code>true</code>.</p>
</li>
<li>
<p><strong>members_only</strong>: <code>true | false</code><br/>
   Only members of the room can
enter. The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>moderated</strong>: <code>true | false</code><br/>
   Only occupants with "voice" can send
public messages. The default value is <code>true</code>.</p>
</li>
<li>
<p><strong>password</strong>: <code>Password</code><br/>
   Password of the room. Implies option
<code>password_protected</code> set to <code>true</code>. There is no default value.</p>
</li>
<li>
<p><strong>password_protected</strong>: <code>true | false</code><br/>
   The password is required to
enter the room. The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>persistent</strong>: <code>true | false</code><br/>
   The room persists even if the last
participant leaves. The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>presence_broadcast</strong>: <code>[Role]</code><br/>
   List of roles for which presence
is broadcasted. The list can contain one or several of: <code>moderator</code>,
<code>participant</code>, <code>visitor</code>. The default value is shown in the example
below:</p>
<p><strong>Example</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-23-1"><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="nt">presence_broadcast</span><span class="p">:</span>
</span><span id="__span-23-2"><a href="#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">moderator</span>
</span><span id="__span-23-3"><a href="#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">participant</span>
</span><span id="__span-23-4"><a href="#__codelineno-23-4" id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">visitor</span>
</span></code></pre></div>
</li>
<li>
<p><strong>public</strong>: <code>true | false</code><br/>
   The room is public in the list of the MUC
service, so it can be discovered. MUC admins and room participants
will see private rooms in Service Discovery if their XMPP client
supports this feature. The default value is <code>true</code>.</p>
</li>
<li>
<p><strong>public_list</strong>: <code>true | false</code><br/>
   The list of participants is public,
without requiring to enter the room. The default value is <code>true</code>.</p>
</li>
<li>
<p><strong>pubsub</strong>: <code>PubSub Node</code><br/>
   XMPP URI of associated Publish/Subscribe
node. The default value is an empty string.</p>
</li>
<li>
<p><strong>title</strong>: <code>Room Title</code><br/>
   A human-readable title of the room. There is
no default value</p>
</li>
<li>
<p><strong>vcard</strong>: <code>vCard</code><br/>
   A custom vCard for the room. See the equivalent
mod_muc option.The default value is an empty string.</p>
</li>
<li>
<p><strong>vcard_xupdate</strong>: <code>undefined | external | AvatarHash</code><br/>
   Set the hash
of the avatar image. The default value is <code>undefined</code>.</p>
</li>
<li>
<p><strong>voice_request_min_interval</strong>: <code>Number</code><br/>
   Minimum interval between
voice requests, in seconds. The default value is <code>1800</code>.</p>
</li>
</ul>
</li>
<li>
<p><strong>hibernation_timeout</strong>: <code>infinity | Seconds</code><br/>
Timeout before hibernating the room process, expressed in seconds. The
default value is <code>infinity</code>.</p>
</li>
<li>
<p><strong>history_size</strong>: <code>Size</code><br/>
A small history of the current discussion is sent to users when they
enter the room. With this option you can define the number of history
messages to keep and send to users joining the room. The value is a
non-negative integer. Setting the value to <code>0</code> disables the history
feature and, as a result, nothing is kept in memory. The default value
is <code>20</code>. This value affects all rooms on the service. NOTE: modern XMPP
clients rely on Message Archives (XEP-0313), so feel free to disable the
history feature if you’re only using modern clients and have <a href="#mod_mam">mod_mam</a>
module loaded.</p>
</li>
<li>
<p><strong>host</strong><br/>
Deprecated. Use <code>hosts</code> instead.</p>
</li>
<li>
<p><strong>hosts</strong>: <code>[Host, ...]</code><br/>
This option defines the Jabber IDs of the service. If the <code>hosts</code> option
is not specified, the only Jabber ID will be the hostname of the virtual
host with the prefix "conference.". The keyword <code>@HOST@</code> is replaced
with the real virtual host name.</p>
</li>
<li>
<p><strong>max_captcha_whitelist</strong>: <code>Number</code><br/>
<span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/21.01/">21.01</a></span></span>
 This option defines the
maximum number of characters that Captcha Whitelist can have when
configuring the room. The default value is <code>infinity</code>.</p>
</li>
<li>
<p><strong>max_password</strong>: <code>Number</code><br/>
<span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/21.01/">21.01</a></span></span>
 This option defines the
maximum number of characters that Password can have when configuring the
room. The default value is <code>infinity</code>.</p>
</li>
<li>
<p><strong>max_room_desc</strong>: <code>Number</code><br/>
This option defines the maximum number of characters that Room
Description can have when configuring the room. The default value is
<code>infinity</code>.</p>
</li>
<li>
<p><strong>max_room_id</strong>: <code>Number</code><br/>
This option defines the maximum number of characters that Room ID can
have when creating a new room. The default value is <code>infinity</code>.</p>
</li>
<li>
<p><strong>max_room_name</strong>: <code>Number</code><br/>
This option defines the maximum number of characters that Room Name can
have when configuring the room. The default value is <code>infinity</code>.</p>
</li>
<li>
<p><strong>max_rooms_discoitems</strong>: <code>Number</code><br/>
When there are more rooms than this <code>Number</code>, only the non-empty ones
are returned in a Service Discovery query. The default value is <code>100</code>.</p>
</li>
<li>
<p><strong>max_user_conferences</strong>: <code>Number</code><br/>
This option defines the maximum number of rooms that any given user can
join. The default value is <code>100</code>. This option is used to prevent
possible abuses. Note that this is a soft limit: some users can
sometimes join more conferences in cluster configurations.</p>
</li>
<li>
<p><strong>max_users</strong>: <code>Number</code><br/>
This option defines at the service level, the maximum number of users
allowed per room. It can be lowered in each room configuration but
cannot be increased in individual room configuration. The default value
is <code>200</code>.</p>
</li>
<li>
<p><strong>max_users_admin_threshold</strong>: <code>Number</code><br/>
This option defines the number of service admins or room owners allowed
to enter the room when the maximum number of allowed occupants was
reached. The default limit is <code>5</code>.</p>
</li>
<li>
<p><strong>max_users_presence</strong>: <code>Number</code><br/>
This option defines after how many users in the room, it is considered
overcrowded. When a MUC room is considered overcrowded, presence
broadcasts are limited to reduce load, traffic and excessive presence
"storm" received by participants. The default value is <code>1000</code>.</p>
</li>
<li>
<p><strong>min_message_interval</strong>: <code>Number</code><br/>
This option defines the minimum interval between two messages send by an
occupant in seconds. This option is global and valid for all rooms. A
decimal value can be used. When this option is not defined, message rate
is not limited. This feature can be used to protect a MUC service from
occupant abuses and limit number of messages that will be broadcasted by
the service. A good value for this minimum message interval is <code>0.4</code>
second. If an occupant tries to send messages faster, an error is send
back explaining that the message has been discarded and describing the
reason why the message is not acceptable.</p>
</li>
<li>
<p><strong>min_presence_interval</strong>: <code>Number</code><br/>
This option defines the minimum of time between presence changes coming
from a given occupant in seconds. This option is global and valid for
all rooms. A decimal value can be used. When this option is not defined,
no restriction is applied. This option can be used to protect a MUC
service for occupants abuses. If an occupant tries to change its
presence more often than the specified interval, the presence is cached
by ejabberd and only the last presence is broadcasted to all occupants
in the room after expiration of the interval delay. Intermediate
presence packets are silently discarded. A good value for this option is
<code>4</code> seconds.</p>
</li>
<li>
<p><strong>name</strong>: <code>string()</code><br/>
The value of the service name. This name is only visible in some clients
that support <a href="https://xmpp.org/extensions/xep-0030.html">XEP-0030: Service
Discovery</a>. The default is
<code>Chatrooms</code>.</p>
</li>
<li>
<p><strong>preload_rooms</strong>: <code>true | false</code><br/>
Whether to load all persistent rooms in memory on startup. If disabled,
the room is only loaded on first participant join. The default is
<code>true</code>. It makes sense to disable room preloading when the number of
rooms is high: this will improve server startup time and memory
consumption.</p>
</li>
<li>
<p><strong>queue_type</strong>: <code>ram | file</code><br/>
Same as top-level <a href="../toplevel/#queue_type">queue_type</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ram_db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_ram_db">default_ram_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>regexp_room_id</strong>: <code>string()</code><br/>
This option defines the regular expression that a Room ID must satisfy
to allow the room creation. The default value is the empty string.</p>
</li>
<li>
<p><strong>room_shaper</strong>: <code>none | ShaperName</code><br/>
This option defines shaper for the MUC rooms. The default value is
<code>none</code>.</p>
</li>
<li>
<p><strong>user_message_shaper</strong>: <code>none | ShaperName</code><br/>
This option defines shaper for the users messages. The default value is
<code>none</code>.</p>
</li>
<li>
<p><strong>user_presence_shaper</strong>: <code>none | ShaperName</code><br/>
This option defines shaper for the users presences. The default value is
<code>none</code>.</p>
</li>
<li>
<p><strong>vcard</strong>: <code>vCard</code><br/>
A custom vCard of the service that will be displayed by some XMPP
clients in Service Discovery. The value of <code>vCard</code> is a YAML map
constructed from an XML representation of vCard. Since the
representation has no attributes, the mapping is straightforward.</p>
<p><strong>Example</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-24-1"><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="c1"># This XML representation of vCard:</span>
</span><span id="__span-24-2"><a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="c1">#   &lt;vCard xmlns='vcard-temp'&gt;</span>
</span><span id="__span-24-3"><a href="#__codelineno-24-3" id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="c1">#     &lt;FN&gt;Conferences&lt;/FN&gt;</span>
</span><span id="__span-24-4"><a href="#__codelineno-24-4" id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="c1">#     &lt;ADR&gt;</span>
</span><span id="__span-24-5"><a href="#__codelineno-24-5" id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="c1">#       &lt;WORK/&gt;</span>
</span><span id="__span-24-6"><a href="#__codelineno-24-6" id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="c1">#       &lt;STREET&gt;Elm Street&lt;/STREET&gt;</span>
</span><span id="__span-24-7"><a href="#__codelineno-24-7" id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="c1">#     &lt;/ADR&gt;</span>
</span><span id="__span-24-8"><a href="#__codelineno-24-8" id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="c1">#   &lt;/vCard&gt;</span>
</span><span id="__span-24-9"><a href="#__codelineno-24-9" id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="c1">#</span>
</span><span id="__span-24-10"><a href="#__codelineno-24-10" id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="c1"># is translated to:</span>
</span><span id="__span-24-11"><a href="#__codelineno-24-11" id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="nt">vcard</span><span class="p">:</span>
</span><span id="__span-24-12"><a href="#__codelineno-24-12" id="__codelineno-24-12" name="__codelineno-24-12"></a><span class="w">  </span><span class="nt">fn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Conferences</span>
</span><span id="__span-24-13"><a href="#__codelineno-24-13" id="__codelineno-24-13" name="__codelineno-24-13"></a><span class="w">  </span><span class="nt">adr</span><span class="p">:</span>
</span><span id="__span-24-14"><a href="#__codelineno-24-14" id="__codelineno-24-14" name="__codelineno-24-14"></a><span class="w">    </span><span class="p p-Indicator">-</span>
</span><span id="__span-24-15"><a href="#__codelineno-24-15" id="__codelineno-24-15" name="__codelineno-24-15"></a><span class="w">      </span><span class="nt">work</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-24-16"><a href="#__codelineno-24-16" id="__codelineno-24-16" name="__codelineno-24-16"></a><span class="w">      </span><span class="nt">street</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Elm Street</span>
</span></code></pre></div>
</li>
</ul>
<a id="mod-muc-admin"></a><h2 id="mod_muc_admin">mod_muc_admin<a class="headerlink" href="#mod_muc_admin" title="Permanent link">¶</a></h2>
<p>This module provides commands to administer local MUC services and their
MUC rooms. It also provides simple WebAdmin pages to view the existing
rooms.</p>
<p>This module depends on <a href="#mod_muc">mod_muc</a>.</p>
<p><strong>Available options:</strong></p>
<ul>
<li><strong>subscribe_room_many_max_users</strong>: <code>Number</code><br/>
<span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/22.05/">22.05</a></span></span>
 How many users can be
subscribed to a room at once using the <a href="../../../developer/ejabberd-api/admin-api/#subscribe_room_many">subscribe_room_many</a> API. The
default value is <code>50</code>.</li>
</ul>
<a id="mod-muc-log"></a><h2 id="mod_muc_log">mod_muc_log<a class="headerlink" href="#mod_muc_log" title="Permanent link">¶</a></h2>
<p>This module enables optional logging of Multi-User Chat (MUC) public
conversations to HTML. Once you enable this module, users can join a
room using a MUC capable XMPP client, and if they have enough
privileges, they can request the configuration form in which they can
set the option to enable room logging.</p>
<p>Features:</p>
<ul>
<li>
<p>Room details are added on top of each page: room title, JID, author,
    subject and configuration.</p>
</li>
<li>
<p>The room JID in the generated HTML is a link to join the room (using
    XMPP URI).</p>
</li>
<li>
<p>Subject and room configuration changes are tracked and displayed.</p>
</li>
<li>
<p>Joins, leaves, nick changes, kicks, bans and <code>/me</code> are tracked and
    displayed, including the reason if available.</p>
</li>
<li>
<p>Generated HTML files are XHTML 1.0 Transitional and CSS compliant.</p>
</li>
<li>
<p>Timestamps are self-referencing links.</p>
</li>
<li>
<p>Links on top for quicker navigation: Previous day, Next day, Up.</p>
</li>
<li>
<p>CSS is used for style definition, and a custom CSS file can be used.</p>
</li>
<li>
<p>URLs on messages and subjects are converted to hyperlinks.</p>
</li>
<li>
<p>Timezone used on timestamps is shown on the log files.</p>
</li>
<li>
<p>A custom link can be added on top of each page.</p>
</li>
</ul>
<p>The module depends on <a href="#mod_muc">mod_muc</a>.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access_log</strong>: <code>AccessName</code><br/>
This option restricts which occupants are allowed to enable or disable
room logging. The default value is <code>muc_admin</code>. NOTE: for this default
setting you need to have an access rule for <code>muc_admin</code> in order to
take effect.</p>
</li>
<li>
<p><strong>cssfile</strong>: <code>Path | URL</code><br/>
With this option you can set whether the HTML files should have a custom
CSS file or if they need to use the embedded CSS. Allowed values are
either <code>Path</code> to local file or an <code>URL</code> to a remote file. By default a
predefined CSS will be embedded into the HTML page.</p>
</li>
<li>
<p><strong>dirname</strong>: <code>room_jid | room_name</code><br/>
Configure the name of the room directory. If set to <code>room_jid</code>, the
room directory name will be the full room JID. Otherwise, the room
directory name will be only the room name, not including the MUC service
name. The default value is <code>room_jid</code>.</p>
</li>
<li>
<p><strong>dirtype</strong>: <code>subdirs | plain</code><br/>
The type of the created directories can be specified with this option.
If set to <code>subdirs</code>, subdirectories are created for each year and month.
Otherwise, the names of the log files contain the full date, and there
are no subdirectories. The default value is <code>subdirs</code>.</p>
</li>
<li>
<p><strong>file_format</strong>: <code>html | plaintext</code><br/>
Define the format of the log files: <code>html</code> stores in HTML format,
<code>plaintext</code> stores in plain text. The default value is <code>html</code>.</p>
</li>
<li>
<p><strong>file_permissions</strong>: <code>{mode: Mode, group: Group}</code><br/>
Define the permissions that must be used when creating the log files:
the number of the mode, and the numeric id of the group that will own
the files. The default value is shown in the example below:</p>
<p><strong>Example</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-25-1"><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="nt">file_permissions</span><span class="p">:</span>
</span><span id="__span-25-2"><a href="#__codelineno-25-2" id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="w">  </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">644</span>
</span><span id="__span-25-3"><a href="#__codelineno-25-3" id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">33</span>
</span></code></pre></div>
</li>
<li>
<p><strong>outdir</strong>: <code>Path</code><br/>
This option sets the full path to the directory in which the HTML files
should be stored. Make sure the ejabberd daemon user has write access on
that directory. The default value is <code>www/muc</code>.</p>
</li>
<li>
<p><strong>spam_prevention</strong>: <code>true | false</code><br/>
If set to <code>true</code>, a special attribute is added to links that prevent
their indexation by search engines. The default value is <code>true</code>, which
mean that <code>nofollow</code> attributes will be added to user submitted links.</p>
</li>
<li>
<p><strong>timezone</strong>: <code>local | universal</code><br/>
The time zone for the logs is configurable with this option. If set to
<code>local</code>, the local time, as reported to Erlang emulator by the operating
system, will be used. Otherwise, UTC time will be used. The default
value is <code>local</code>.</p>
</li>
<li>
<p><strong>top_link</strong>: <code>{URL: Text}</code><br/>
With this option you can customize the link on the top right corner of
each log file. The default value is shown in the example below:</p>
<p><strong>Example</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-26-1"><a href="#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="nt">top_link</span><span class="p">:</span>
</span><span id="__span-26-2"><a href="#__codelineno-26-2" id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="w">  </span><span class="nt">/</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Home</span>
</span></code></pre></div>
</li>
<li>
<p><strong>url</strong>: <code>URL</code><br/>
A top level <code>URL</code> where a client can access logs of a particular
conference. The conference name is appended to the URL if <code>dirname</code>
option is set to <code>room_name</code> or a conference JID is appended to the
<code>URL</code> otherwise. There is no default value.</p>
</li>
</ul>
<a id="mod-muc-occupantid"></a><h2 id="mod_muc_occupantid">mod_muc_occupantid<a class="headerlink" href="#mod_muc_occupantid" title="Permanent link">¶</a></h2>
<p><span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/23.10/">23.10</a></span></span></p>
<p>This module implements <a href="https://xmpp.org/extensions/xep-0421.html">XEP-0421: Anonymous unique occupant identifiers
for MUCs</a>.</p>
<p>When the module is enabled, the feature is enabled in all semi-anonymous
rooms.</p>
<p>The module has no options.</p>
<a id="mod-muc-rtbl"></a><h2 id="mod_muc_rtbl">mod_muc_rtbl<a class="headerlink" href="#mod_muc_rtbl" title="Permanent link">¶</a></h2>
<p><span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/23.04/">23.04</a></span></span></p>
<p>This module implement Real-time blocklists for MUC rooms.</p>
<p>It works by observing remote pubsub node conforming with specification
described in <a href="https://xmppbl.org/">https://xmppbl.org/</a>.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>rtbl_node</strong>: <code>PubsubNodeName</code><br/>
Name of pubsub node that should be used to track blocked users. The
default value is <code>muc_bans_sha256</code>.</p>
</li>
<li>
<p><strong>rtbl_server</strong>: <code>Domain</code><br/>
Domain of xmpp server that serves block list. The default value is
<code>xmppbl.org</code></p>
</li>
</ul>
<a id="mod-multicast"></a><h2 id="mod_multicast">mod_multicast<a class="headerlink" href="#mod_multicast" title="Permanent link">¶</a></h2>
<p>This module implements a service for <a href="https://xmpp.org/extensions/xep-0033.html">XEP-0033: Extended Stanza
Addressing</a>.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access</strong>: <code>Access</code><br/>
The access rule to restrict who can send packets to the multicast
service. Default value: <code>all</code>.</p>
</li>
<li>
<p><strong>host</strong><br/>
Deprecated. Use <code>hosts</code> instead.</p>
</li>
<li>
<p><strong>hosts</strong>: <code>[Host, ...]</code><br/>
This option defines the Jabber IDs of the service. If the <code>hosts</code> option
is not specified, the only Jabber ID will be the hostname of the virtual
host with the prefix "multicast.". The keyword <code>@HOST@</code> is replaced with
the real virtual host name. The default value is <code>multicast.@HOST@</code>.</p>
</li>
<li>
<p><strong>limits</strong>: <code>Sender: Stanza: Number</code><br/>
Specify a list of custom limits which override the default ones defined
in XEP-0033. Limits are defined per sender type and stanza type, where:</p>
<ul>
<li>
<p><code>sender</code> can be: <code>local</code> or <code>remote</code>.</p>
</li>
<li>
<p><code>stanza</code> can be: <code>message</code> or <code>presence</code>.</p>
</li>
<li>
<p><code>number</code> can be a positive integer or <code>infinite</code>.</p>
<p><strong>Example</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-27-1"><a href="#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="c1"># Default values:</span>
</span><span id="__span-27-2"><a href="#__codelineno-27-2" id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="nt">local</span><span class="p">:</span>
</span><span id="__span-27-3"><a href="#__codelineno-27-3" id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="w">  </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</span><span id="__span-27-4"><a href="#__codelineno-27-4" id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="w">  </span><span class="nt">presence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</span><span id="__span-27-5"><a href="#__codelineno-27-5" id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="nt">remote</span><span class="p">:</span>
</span><span id="__span-27-6"><a href="#__codelineno-27-6" id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="w">  </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
</span><span id="__span-27-7"><a href="#__codelineno-27-7" id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="w">  </span><span class="nt">presence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
</span></code></pre></div>
</li>
</ul>
</li>
<li>
<p><strong>name</strong><br/>
Service name to provide in the Info query to the Service Discovery.
Default is <code>"Multicast"</code>.</p>
</li>
<li>
<p><strong>vcard</strong><br/>
vCard element to return when queried. Default value is <code>undefined</code>.</p>
</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-28-1"><a href="#__codelineno-28-1" id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="c1"># Only admins can send packets to multicast service</span>
</span><span id="__span-28-2"><a href="#__codelineno-28-2" id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="nt">access_rules</span><span class="p">:</span>
</span><span id="__span-28-3"><a href="#__codelineno-28-3" id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="w">  </span><span class="nt">multicast</span><span class="p">:</span>
</span><span id="__span-28-4"><a href="#__codelineno-28-4" id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">allow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
</span><span id="__span-28-5"><a href="#__codelineno-28-5" id="__codelineno-28-5" name="__codelineno-28-5"></a>
</span><span id="__span-28-6"><a href="#__codelineno-28-6" id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="c1"># If you want to allow all your users:</span>
</span><span id="__span-28-7"><a href="#__codelineno-28-7" id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="nt">access_rules</span><span class="p">:</span>
</span><span id="__span-28-8"><a href="#__codelineno-28-8" id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="w">  </span><span class="nt">multicast</span><span class="p">:</span>
</span><span id="__span-28-9"><a href="#__codelineno-28-9" id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">allow</span>
</span><span id="__span-28-10"><a href="#__codelineno-28-10" id="__codelineno-28-10" name="__codelineno-28-10"></a>
</span><span id="__span-28-11"><a href="#__codelineno-28-11" id="__codelineno-28-11" name="__codelineno-28-11"></a><span class="c1"># This allows both admins and remote users to send packets,</span>
</span><span id="__span-28-12"><a href="#__codelineno-28-12" id="__codelineno-28-12" name="__codelineno-28-12"></a><span class="c1"># but does not allow local users</span>
</span><span id="__span-28-13"><a href="#__codelineno-28-13" id="__codelineno-28-13" name="__codelineno-28-13"></a><span class="nt">acl</span><span class="p">:</span>
</span><span id="__span-28-14"><a href="#__codelineno-28-14" id="__codelineno-28-14" name="__codelineno-28-14"></a><span class="w">  </span><span class="nt">allservers</span><span class="p">:</span>
</span><span id="__span-28-15"><a href="#__codelineno-28-15" id="__codelineno-28-15" name="__codelineno-28-15"></a><span class="w">    </span><span class="nt">server_glob</span><span class="p">:</span><span class="w"> </span><span class="s">"*"</span>
</span><span id="__span-28-16"><a href="#__codelineno-28-16" id="__codelineno-28-16" name="__codelineno-28-16"></a><span class="nt">access_rules</span><span class="p">:</span>
</span><span id="__span-28-17"><a href="#__codelineno-28-17" id="__codelineno-28-17" name="__codelineno-28-17"></a><span class="w">  </span><span class="nt">multicast</span><span class="p">:</span>
</span><span id="__span-28-18"><a href="#__codelineno-28-18" id="__codelineno-28-18" name="__codelineno-28-18"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">allow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
</span><span id="__span-28-19"><a href="#__codelineno-28-19" id="__codelineno-28-19" name="__codelineno-28-19"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">deny</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span>
</span><span id="__span-28-20"><a href="#__codelineno-28-20" id="__codelineno-28-20" name="__codelineno-28-20"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">allow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">allservers</span>
</span><span id="__span-28-21"><a href="#__codelineno-28-21" id="__codelineno-28-21" name="__codelineno-28-21"></a>
</span><span id="__span-28-22"><a href="#__codelineno-28-22" id="__codelineno-28-22" name="__codelineno-28-22"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-28-23"><a href="#__codelineno-28-23" id="__codelineno-28-23" name="__codelineno-28-23"></a><span class="w">  </span><span class="nt">mod_multicast</span><span class="p">:</span>
</span><span id="__span-28-24"><a href="#__codelineno-28-24" id="__codelineno-28-24" name="__codelineno-28-24"></a><span class="w">     </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">multicast.example.org</span>
</span><span id="__span-28-25"><a href="#__codelineno-28-25" id="__codelineno-28-25" name="__codelineno-28-25"></a><span class="w">     </span><span class="nt">access</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">multicast</span>
</span><span id="__span-28-26"><a href="#__codelineno-28-26" id="__codelineno-28-26" name="__codelineno-28-26"></a><span class="w">     </span><span class="nt">limits</span><span class="p">:</span>
</span><span id="__span-28-27"><a href="#__codelineno-28-27" id="__codelineno-28-27" name="__codelineno-28-27"></a><span class="w">       </span><span class="nt">local</span><span class="p">:</span>
</span><span id="__span-28-28"><a href="#__codelineno-28-28" id="__codelineno-28-28" name="__codelineno-28-28"></a><span class="w">         </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span>
</span><span id="__span-28-29"><a href="#__codelineno-28-29" id="__codelineno-28-29" name="__codelineno-28-29"></a><span class="w">         </span><span class="nt">presence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infinite</span>
</span><span id="__span-28-30"><a href="#__codelineno-28-30" id="__codelineno-28-30" name="__codelineno-28-30"></a><span class="w">       </span><span class="nt">remote</span><span class="p">:</span>
</span><span id="__span-28-31"><a href="#__codelineno-28-31" id="__codelineno-28-31" name="__codelineno-28-31"></a><span class="w">         </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150</span>
</span></code></pre></div>
<a id="mod-offline"></a><h2 id="mod_offline">mod_offline<a class="headerlink" href="#mod_offline" title="Permanent link">¶</a></h2>
<p>This module implements <a href="https://xmpp.org/extensions/xep-0160.html">XEP-0160: Best Practices for Handling Offline
Messages</a> and <a href="https://xmpp.org/extensions/xep-0013.html">XEP-0013:
Flexible Offline Message
Retrieval</a>. This means that
all messages sent to an offline user will be stored on the server until
that user comes online again. Thus it is very similar to how email
works. A user is considered offline if no session presence priority &gt;
0 are currently open.</p>
<p>The <a href="../../../developer/ejabberd-api/admin-api/#delete_expired_messages">delete_expired_messages</a> API allows to delete expired messages,
and <a href="../../../developer/ejabberd-api/admin-api/#delete_old_messages">delete_old_messages</a> API deletes older ones.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access_max_user_messages</strong>: <code>AccessName</code><br/>
This option defines which access rule will be enforced to limit the
maximum number of offline messages that a user can have (quota). When a
user has too many offline messages, any new messages that they receive
are discarded, and a <em>&lt;resource-constraint/&gt;</em> error is returned to
the sender. The default value is <code>max_user_offline_messages</code>.</p>
</li>
<li>
<p><strong>bounce_groupchat</strong>: <code>true | false</code><br/>
This option is use the disable an optimization that avoids bouncing
error messages when groupchat messages could not be stored as offline.
It will reduce chat room load, without any drawback in standard use
cases. You may change default value only if you have a custom module
which uses offline hook after <code>mod_offline</code>. This option can be useful
for both standard MUC and MucSub, but the bounce is much more likely to
happen in the context of MucSub, so it is even more important to have it
on large MucSub services. The default value is <code>false</code>, meaning the
optimization is enabled.</p>
</li>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>store_empty_body</strong>: <code>true | false | unless_chat_state</code><br/>
Whether or not to store messages that lack a <em>&lt;body/&gt;</em> element.
The default value is <code>unless_chat_state</code>, which tells ejabberd to
store messages even if they lack the <em>&lt;body/&gt;</em> element, unless
they only contain a chat state notification (as defined in <a href="https://xmpp.org/extensions/xep-0085.html">XEP-0085:
Chat State Notifications</a>.</p>
</li>
<li>
<p><strong>store_groupchat</strong>: <code>true | false</code><br/>
Whether or not to store groupchat messages. The default value is
<code>false</code>.</p>
</li>
<li>
<p><strong>use_cache</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
<li>
<p><strong>use_mam_for_storage</strong>: <code>true | false</code><br/>
This is an experimental option. By enabling the option, this module uses
the <code>archive</code> table from <a href="#mod_mam">mod_mam</a> instead of its own spool table to
retrieve the messages received when the user was offline. This allows
client developers to slowly drop XEP-0160 and rely on XEP-0313 instead.
It also further reduces the storage required when you enable MucSub.
Enabling this option has a known drawback for the moment: most of
flexible message retrieval queries don’t work (those that allow
retrieval/deletion of messages by id), but this specification is not
widely used. The default value is <code>false</code> to keep former behaviour as
default.</p>
</li>
</ul>
<p><strong>Examples:</strong></p>
<p>This example allows power users to have as much as 5000 offline
messages, administrators up to 2000, and all the other users up to 100:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-29-1"><a href="#__codelineno-29-1" id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="nt">acl</span><span class="p">:</span>
</span><span id="__span-29-2"><a href="#__codelineno-29-2" id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="w">  </span><span class="nt">admin</span><span class="p">:</span>
</span><span id="__span-29-3"><a href="#__codelineno-29-3" id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">    </span><span class="nt">user</span><span class="p">:</span>
</span><span id="__span-29-4"><a href="#__codelineno-29-4" id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin1@localhost</span>
</span><span id="__span-29-5"><a href="#__codelineno-29-5" id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin2@example.org</span>
</span><span id="__span-29-6"><a href="#__codelineno-29-6" id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="w">  </span><span class="nt">poweruser</span><span class="p">:</span>
</span><span id="__span-29-7"><a href="#__codelineno-29-7" id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="w">    </span><span class="nt">user</span><span class="p">:</span>
</span><span id="__span-29-8"><a href="#__codelineno-29-8" id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bob@example.org</span>
</span><span id="__span-29-9"><a href="#__codelineno-29-9" id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jane@example.org</span>
</span><span id="__span-29-10"><a href="#__codelineno-29-10" id="__codelineno-29-10" name="__codelineno-29-10"></a>
</span><span id="__span-29-11"><a href="#__codelineno-29-11" id="__codelineno-29-11" name="__codelineno-29-11"></a><span class="nt">shaper_rules</span><span class="p">:</span>
</span><span id="__span-29-12"><a href="#__codelineno-29-12" id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="w">  </span><span class="nt">max_user_offline_messages</span><span class="p">:</span>
</span><span id="__span-29-13"><a href="#__codelineno-29-13" id="__codelineno-29-13" name="__codelineno-29-13"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">5000</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">poweruser</span>
</span><span id="__span-29-14"><a href="#__codelineno-29-14" id="__codelineno-29-14" name="__codelineno-29-14"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">2000</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
</span><span id="__span-29-15"><a href="#__codelineno-29-15" id="__codelineno-29-15" name="__codelineno-29-15"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</span><span id="__span-29-16"><a href="#__codelineno-29-16" id="__codelineno-29-16" name="__codelineno-29-16"></a>
</span><span id="__span-29-17"><a href="#__codelineno-29-17" id="__codelineno-29-17" name="__codelineno-29-17"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-29-18"><a href="#__codelineno-29-18" id="__codelineno-29-18" name="__codelineno-29-18"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span><span id="__span-29-19"><a href="#__codelineno-29-19" id="__codelineno-29-19" name="__codelineno-29-19"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">mod_offline</span><span class="p p-Indicator">:</span>
</span><span id="__span-29-20"><a href="#__codelineno-29-20" id="__codelineno-29-20" name="__codelineno-29-20"></a><span class="w">    </span><span class="nt">access_max_user_messages</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">max_user_offline_messages</span>
</span><span id="__span-29-21"><a href="#__codelineno-29-21" id="__codelineno-29-21" name="__codelineno-29-21"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span></code></pre></div>
<a id="mod-ping"></a><h2 id="mod_ping">mod_ping<a class="headerlink" href="#mod_ping" title="Permanent link">¶</a></h2>
<p>This module implements support for <a href="https://xmpp.org/extensions/xep-0199.html">XEP-0199: XMPP
Ping</a> and periodic
keepalives. When this module is enabled ejabberd responds correctly to
ping requests, as defined by the protocol.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>ping_ack_timeout</strong>: <code>timeout()</code><br/>
How long to wait before deeming that a client has not answered a given
server ping request. NOTE: when <a href="#mod_stream_mgmt">mod_stream_mgmt</a> is loaded and stream
management is enabled by a client, this value is ignored, and the
<code>ack_timeout</code> applies instead. The default value is <code>undefined</code>.</p>
</li>
<li>
<p><strong>ping_interval</strong>: <code>timeout()</code><br/>
How often to send pings to connected clients, if option <code>send_pings</code> is
set to <code>true</code>. If a client connection does not send or receive any
stanza within this interval, a ping request is sent to the client. The
default value is <code>1</code> minute.</p>
</li>
<li>
<p><strong>send_pings</strong>: <code>true | false</code><br/>
If this option is set to <code>true</code>, the server sends pings to connected
clients that are not active in a given interval defined in
<code>ping_interval</code> option. This is useful to keep client connections alive
or checking availability. The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>timeout_action</strong>: <code>none | kill</code><br/>
What to do when a client does not answer to a server ping request in
less than period defined in <code>ping_ack_timeout</code> option: <code>kill</code> means
destroying the underlying connection, <code>none</code> means to do nothing. NOTE:
when <a href="#mod_stream_mgmt">mod_stream_mgmt</a> is loaded and stream management is enabled by a
client, killing the client connection doesn’t mean killing the client
session - the session will be kept alive in order to give the client a
chance to resume it. The default value is <code>none</code>.</p>
</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-30-1"><a href="#__codelineno-30-1" id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-30-2"><a href="#__codelineno-30-2" id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="w">  </span><span class="nt">mod_ping</span><span class="p">:</span>
</span><span id="__span-30-3"><a href="#__codelineno-30-3" id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="w">    </span><span class="nt">send_pings</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-30-4"><a href="#__codelineno-30-4" id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="w">    </span><span class="nt">ping_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4 min</span>
</span><span id="__span-30-5"><a href="#__codelineno-30-5" id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="w">    </span><span class="nt">timeout_action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kill</span>
</span></code></pre></div>
<a id="mod-pres-counter"></a><h2 id="mod_pres_counter">mod_pres_counter<a class="headerlink" href="#mod_pres_counter" title="Permanent link">¶</a></h2>
<p>This module detects flood/spam in presence subscriptions traffic. If a
user sends or receives more of those stanzas in a given time interval,
the exceeding stanzas are silently dropped, and a warning is logged.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>count</strong>: <code>Number</code><br/>
The number of subscription presence stanzas (subscribe, unsubscribe,
subscribed, unsubscribed) allowed for any direction (input or output)
per time defined in <code>interval</code> option. Please note that two users
subscribing to each other usually generate 4 stanzas, so the recommended
value is <code>4</code> or more. The default value is <code>5</code>.</p>
</li>
<li>
<p><strong>interval</strong>: <code>timeout()</code><br/>
The time interval. The default value is <code>1</code> minute.</p>
</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-31-1"><a href="#__codelineno-31-1" id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-31-2"><a href="#__codelineno-31-2" id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="w">  </span><span class="nt">mod_pres_counter</span><span class="p">:</span>
</span><span id="__span-31-3"><a href="#__codelineno-31-3" id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-31-4"><a href="#__codelineno-31-4" id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="w">    </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30 secs</span>
</span></code></pre></div>
<a id="mod-privacy"></a><h2 id="mod_privacy">mod_privacy<a class="headerlink" href="#mod_privacy" title="Permanent link">¶</a></h2>
<p>This module implements <a href="https://xmpp.org/extensions/xep-0016.html">XEP-0016: Privacy
Lists</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Nowadays modern XMPP clients rely on <a href="https://xmpp.org/extensions/xep-0191.html">XEP-0191: Blocking
Command</a> which is
implemented by <a href="#mod_blocking">mod_blocking</a>. However, you still need
<code>mod_privacy</code> loaded in order for <code>mod_blocking</code> to work.</p>
</div>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_missed</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#cache_missed">cache_missed</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>use_cache</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
</ul>
<a id="mod-private"></a><h2 id="mod_private">mod_private<a class="headerlink" href="#mod_private" title="Permanent link">¶</a></h2>
<p>This module adds support for <a href="https://xmpp.org/extensions/xep-0049.html">XEP-0049: Private XML
Storage</a>.</p>
<p>Using this method, XMPP entities can store private data on the server,
retrieve it whenever necessary and share it between multiple connected
clients of the same user. The data stored might be anything, as long as
it is a valid XML. One typical usage is storing a bookmark of all user’s
conferences (<a href="https://xmpp.org/extensions/xep-0048.html">XEP-0048:
Bookmarks</a>).</p>
<p>It also implements the bookmark conversion described in <a href="https://xmpp.org/extensions/xep-0402.html">XEP-0402: PEP
Native Bookmarks</a>, see
<a href="../../../developer/ejabberd-api/admin-api/#bookmarks_to_pep">bookmarks_to_pep</a> API.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_missed</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#cache_missed">cache_missed</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>use_cache</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
</ul>
<a id="mod-privilege"></a><h2 id="mod_privilege">mod_privilege<a class="headerlink" href="#mod_privilege" title="Permanent link">¶</a></h2>
<p><span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">improved in <a href="../../../archive/24.10/">24.10</a></span></span></p>
<p>This module is an implementation of <a href="https://xmpp.org/extensions/xep-0356.html">XEP-0356: Privileged
Entity</a>. This extension
allows components to have privileged access to other entity data (send
messages on behalf of the server or on behalf of a user, get/set user
roster, access presence information, etc.). This may be used to write
powerful external components, for example implementing an external
<a href="https://xmpp.org/extensions/xep-0163.html">PEP</a> or
<a href="https://xmpp.org/extensions/xep-0313.html">MAM</a> service.</p>
<p>By default a component does not have any privileged access. It is worth
noting that the permissions grant access to the component to a specific
data type for all users of the virtual host on which <code>mod_privilege</code> is
loaded.</p>
<p>Make sure you have a listener configured to connect your component.
Check the section about listening ports for more information.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Security issue: Privileged access gives components access to sensitive
data, so permission should be granted carefully, only if you trust a
component.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This module is complementary to <a href="#mod_delegation">mod_delegation</a>, but can also be
used separately.</p>
</div>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>iq</strong>: <code>{Namespace: Options}</code><br/>
This option defines namespaces and their IQ permissions. By default no
permissions are given. The <code>Options</code> are:</p>
<ul>
<li>
<p><strong>both</strong>: <code>AccessName</code><br/>
   Allows sending IQ stanzas of type <code>get</code> and
<code>set</code>. The default value is <code>none</code>.</p>
</li>
<li>
<p><strong>get</strong>: <code>AccessName</code><br/>
   Allows sending IQ stanzas of type <code>get</code>. The
default value is <code>none</code>.</p>
</li>
<li>
<p><strong>set</strong>: <code>AccessName</code><br/>
   Allows sending IQ stanzas of type <code>set</code>. The
default value is <code>none</code>.</p>
</li>
</ul>
</li>
<li>
<p><strong>message</strong>: <code>Options</code><br/>
This option defines permissions for messages. By default no permissions
are given. The <code>Options</code> are:</p>
<ul>
<li><strong>outgoing</strong>: <code>AccessName</code><br/>
   The option defines an access rule for
sending outgoing messages by the component. The default value is
<code>none</code>.</li>
</ul>
</li>
<li>
<p><strong>presence</strong>: <code>Options</code><br/>
This option defines permissions for presences. By default no permissions
are given. The <code>Options</code> are:</p>
<ul>
<li>
<p><strong>managed_entity</strong>: <code>AccessName</code><br/>
   An access rule that gives
permissions to the component to receive server presences. The
default value is <code>none</code>.</p>
</li>
<li>
<p><strong>roster</strong>: <code>AccessName</code><br/>
   An access rule that gives permissions to
the component to receive the presence of both the users and the
contacts in their roster. The default value is <code>none</code>.</p>
</li>
</ul>
</li>
<li>
<p><strong>roster</strong>: <code>Options</code><br/>
This option defines roster permissions. By default no permissions are
given. The <code>Options</code> are:</p>
<ul>
<li>
<p><strong>both</strong>: <code>AccessName</code><br/>
   Sets read/write access to a user’s roster.
The default value is <code>none</code>.</p>
</li>
<li>
<p><strong>get</strong>: <code>AccessName</code><br/>
   Sets read access to a user’s roster. The
default value is <code>none</code>.</p>
</li>
<li>
<p><strong>set</strong>: <code>AccessName</code><br/>
   Sets write access to a user’s roster. The
default value is <code>none</code>.</p>
</li>
</ul>
</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-32-1"><a href="#__codelineno-32-1" id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-32-2"><a href="#__codelineno-32-2" id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="w">  </span><span class="nt">mod_privilege</span><span class="p">:</span>
</span><span id="__span-32-3"><a href="#__codelineno-32-3" id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="w">    </span><span class="nt">iq</span><span class="p">:</span>
</span><span id="__span-32-4"><a href="#__codelineno-32-4" id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="w">      </span><span class="nt">http://jabber.org/protocol/pubsub</span><span class="p">:</span>
</span><span id="__span-32-5"><a href="#__codelineno-32-5" id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="w">        </span><span class="nt">get</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span>
</span><span id="__span-32-6"><a href="#__codelineno-32-6" id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="w">    </span><span class="nt">roster</span><span class="p">:</span>
</span><span id="__span-32-7"><a href="#__codelineno-32-7" id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="w">      </span><span class="nt">get</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span>
</span><span id="__span-32-8"><a href="#__codelineno-32-8" id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">    </span><span class="nt">presence</span><span class="p">:</span>
</span><span id="__span-32-9"><a href="#__codelineno-32-9" id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="w">      </span><span class="nt">managed_entity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span>
</span><span id="__span-32-10"><a href="#__codelineno-32-10" id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="w">    </span><span class="nt">message</span><span class="p">:</span>
</span><span id="__span-32-11"><a href="#__codelineno-32-11" id="__codelineno-32-11" name="__codelineno-32-11"></a><span class="w">      </span><span class="nt">outgoing</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span>
</span></code></pre></div>
<a id="mod-proxy65"></a><h2 id="mod_proxy65">mod_proxy65<a class="headerlink" href="#mod_proxy65" title="Permanent link">¶</a></h2>
<p>This module implements <a href="https://xmpp.org/extensions/xep-0065.html">XEP-0065: SOCKS5
Bytestreams</a>. It allows
ejabberd to act as a file transfer proxy between two XMPP clients.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access</strong>: <code>AccessName</code><br/>
Defines an access rule for file transfer initiators. The default value
is <code>all</code>. You may want to restrict access to the users of your server
only, in order to avoid abusing your proxy by the users of remote
servers.</p>
</li>
<li>
<p><strong>auth_type</strong>: <code>anonymous | plain</code><br/>
SOCKS5 authentication type. The default value is <code>anonymous</code>. If set to
<code>plain</code>, ejabberd will use authentication backend as it would for SASL
PLAIN.</p>
</li>
<li>
<p><strong>host</strong><br/>
Deprecated. Use <code>hosts</code> instead.</p>
</li>
<li>
<p><strong>hostname</strong>: <code>Host</code><br/>
Defines a hostname offered by the proxy when establishing a session with
clients. This is useful when you run the proxy behind a NAT. The keyword
<code>@HOST@</code> is replaced with the virtual host name. The default is to use
the value of <code>ip</code> option. Examples: <code>proxy.mydomain.org</code>,
<code>200.150.100.50</code>.</p>
</li>
<li>
<p><strong>hosts</strong>: <code>[Host, ...]</code><br/>
This option defines the Jabber IDs of the service. If the <code>hosts</code> option
is not specified, the only Jabber ID will be the hostname of the virtual
host with the prefix "proxy.". The keyword <code>@HOST@</code> is replaced with the
real virtual host name.</p>
</li>
<li>
<p><strong>ip</strong>: <code>IPAddress</code><br/>
This option specifies which network interface to listen for. The default
value is an IP address of the service’s DNS name, or, if fails,
<code>127.0.0.1</code>.</p>
</li>
<li>
<p><strong>max_connections</strong>: <code>pos_integer() | infinity</code><br/>
Maximum number of active connections per file transfer initiator. The
default value is <code>infinity</code>.</p>
</li>
<li>
<p><strong>name</strong>: <code>Name</code><br/>
The value of the service name. This name is only visible in some clients
that support <a href="https://xmpp.org/extensions/xep-0030.html">XEP-0030: Service
Discovery</a>. The default is
"SOCKS5 Bytestreams".</p>
</li>
<li>
<p><strong>port</strong>: <code>1..65535</code><br/>
A port number to listen for incoming connections. The default value is
<code>7777</code>.</p>
</li>
<li>
<p><strong>ram_db_type</strong>: <code>mnesia | redis | sql</code><br/>
Same as top-level <a href="../toplevel/#default_ram_db">default_ram_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>recbuf</strong>: <code>Size</code><br/>
A size of the buffer for incoming packets. If you define a shaper, set
the value of this option to the size of the shaper in order to avoid
traffic spikes in file transfers. The default value is <code>65536</code> bytes.</p>
</li>
<li>
<p><strong>shaper</strong>: <code>Shaper</code><br/>
This option defines a shaper for the file transfer peers. A shaper with
the maximum bandwidth will be selected. The default is <code>none</code>, i.e. no
shaper.</p>
</li>
<li>
<p><strong>sndbuf</strong>: <code>Size</code><br/>
A size of the buffer for outgoing packets. If you define a shaper, set
the value of this option to the size of the shaper in order to avoid
traffic spikes in file transfers. The default value is <code>65536</code> bytes.</p>
</li>
<li>
<p><strong>vcard</strong>: <code>vCard</code><br/>
A custom vCard of the service that will be displayed by some XMPP
clients in Service Discovery. The value of <code>vCard</code> is a YAML map
constructed from an XML representation of vCard. Since the
representation has no attributes, the mapping is straightforward.</p>
</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-33-1"><a href="#__codelineno-33-1" id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="nt">acl</span><span class="p">:</span>
</span><span id="__span-33-2"><a href="#__codelineno-33-2" id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="w">  </span><span class="nt">admin</span><span class="p">:</span>
</span><span id="__span-33-3"><a href="#__codelineno-33-3" id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin@example.org</span>
</span><span id="__span-33-4"><a href="#__codelineno-33-4" id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="w">  </span><span class="nt">proxy_users</span><span class="p">:</span>
</span><span id="__span-33-5"><a href="#__codelineno-33-5" id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="w">    </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.org</span>
</span><span id="__span-33-6"><a href="#__codelineno-33-6" id="__codelineno-33-6" name="__codelineno-33-6"></a>
</span><span id="__span-33-7"><a href="#__codelineno-33-7" id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="nt">access_rules</span><span class="p">:</span>
</span><span id="__span-33-8"><a href="#__codelineno-33-8" id="__codelineno-33-8" name="__codelineno-33-8"></a><span class="w">  </span><span class="nt">proxy65_access</span><span class="p">:</span>
</span><span id="__span-33-9"><a href="#__codelineno-33-9" id="__codelineno-33-9" name="__codelineno-33-9"></a><span class="w">    </span><span class="nt">allow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">proxy_users</span>
</span><span id="__span-33-10"><a href="#__codelineno-33-10" id="__codelineno-33-10" name="__codelineno-33-10"></a>
</span><span id="__span-33-11"><a href="#__codelineno-33-11" id="__codelineno-33-11" name="__codelineno-33-11"></a><span class="nt">shaper_rules</span><span class="p">:</span>
</span><span id="__span-33-12"><a href="#__codelineno-33-12" id="__codelineno-33-12" name="__codelineno-33-12"></a><span class="w">  </span><span class="nt">proxy65_shaper</span><span class="p">:</span>
</span><span id="__span-33-13"><a href="#__codelineno-33-13" id="__codelineno-33-13" name="__codelineno-33-13"></a><span class="w">    </span><span class="nt">none</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
</span><span id="__span-33-14"><a href="#__codelineno-33-14" id="__codelineno-33-14" name="__codelineno-33-14"></a><span class="w">  </span><span class="nt">proxyrate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">proxy_users</span>
</span><span id="__span-33-15"><a href="#__codelineno-33-15" id="__codelineno-33-15" name="__codelineno-33-15"></a>
</span><span id="__span-33-16"><a href="#__codelineno-33-16" id="__codelineno-33-16" name="__codelineno-33-16"></a><span class="nt">shaper</span><span class="p">:</span>
</span><span id="__span-33-17"><a href="#__codelineno-33-17" id="__codelineno-33-17" name="__codelineno-33-17"></a><span class="w">  </span><span class="nt">proxyrate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10240</span>
</span><span id="__span-33-18"><a href="#__codelineno-33-18" id="__codelineno-33-18" name="__codelineno-33-18"></a>
</span><span id="__span-33-19"><a href="#__codelineno-33-19" id="__codelineno-33-19" name="__codelineno-33-19"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-33-20"><a href="#__codelineno-33-20" id="__codelineno-33-20" name="__codelineno-33-20"></a><span class="w">  </span><span class="nt">mod_proxy65</span><span class="p">:</span>
</span><span id="__span-33-21"><a href="#__codelineno-33-21" id="__codelineno-33-21" name="__codelineno-33-21"></a><span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">proxy1.example.org</span>
</span><span id="__span-33-22"><a href="#__codelineno-33-22" id="__codelineno-33-22" name="__codelineno-33-22"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"File</span><span class="nv"> </span><span class="s">Transfer</span><span class="nv"> </span><span class="s">Proxy"</span>
</span><span id="__span-33-23"><a href="#__codelineno-33-23" id="__codelineno-33-23" name="__codelineno-33-23"></a><span class="w">    </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">200.150.100.1</span>
</span><span id="__span-33-24"><a href="#__codelineno-33-24" id="__codelineno-33-24" name="__codelineno-33-24"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7778</span>
</span><span id="__span-33-25"><a href="#__codelineno-33-25" id="__codelineno-33-25" name="__codelineno-33-25"></a><span class="w">    </span><span class="nt">max_connections</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-33-26"><a href="#__codelineno-33-26" id="__codelineno-33-26" name="__codelineno-33-26"></a><span class="w">    </span><span class="nt">access</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">proxy65_access</span>
</span><span id="__span-33-27"><a href="#__codelineno-33-27" id="__codelineno-33-27" name="__codelineno-33-27"></a><span class="w">    </span><span class="nt">shaper</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">proxy65_shaper</span>
</span><span id="__span-33-28"><a href="#__codelineno-33-28" id="__codelineno-33-28" name="__codelineno-33-28"></a><span class="w">    </span><span class="nt">recbuf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10240</span>
</span><span id="__span-33-29"><a href="#__codelineno-33-29" id="__codelineno-33-29" name="__codelineno-33-29"></a><span class="w">    </span><span class="nt">sndbuf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10240</span>
</span></code></pre></div>
<a id="mod-pubsub"></a><h2 id="mod_pubsub">mod_pubsub<a class="headerlink" href="#mod_pubsub" title="Permanent link">¶</a></h2>
<p>This module offers a service for <a href="https://xmpp.org/extensions/xep-0060.html">XEP-0060:
Publish-Subscribe</a>. The
functionality in <code>mod_pubsub</code> can be extended using plugins. The plugin
that implements PEP (<a href="https://xmpp.org/extensions/xep-0163.html">XEP-0163: Personal Eventing via
Pubsub</a>) is enabled in the
default ejabberd configuration file, and it requires <a href="#mod_caps">mod_caps</a>.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access_createnode</strong>: <code>AccessName</code><br/>
This option restricts which users are allowed to create pubsub nodes
using <code>acl</code> and <code>access</code>. By default any account in the local ejabberd
server is allowed to create pubsub nodes. The default value is: <code>all</code>.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>default_node_config</strong>: <code>List of Key:Value</code><br/>
To override default node configuration, regardless of node plugin. Value
is a list of key-value definition. Node configuration still uses default
configuration defined by node plugin, and overrides any items by value
defined in this configurable list.</p>
</li>
<li>
<p><strong>force_node_config</strong>: <code>List of Node and the list of its Key:Value</code><br/>
Define the configuration for given nodes. The default value is: <code>[]</code>.</p>
<p><strong>Example</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-34-1"><a href="#__codelineno-34-1" id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="nt">force_node_config</span><span class="p">:</span>
</span><span id="__span-34-2"><a href="#__codelineno-34-2" id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="w">  </span><span class="c1">## Avoid buggy clients to make their bookmarks public</span>
</span><span id="__span-34-3"><a href="#__codelineno-34-3" id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="w">  </span><span class="nt">storage:bookmarks</span><span class="p">:</span>
</span><span id="__span-34-4"><a href="#__codelineno-34-4" id="__codelineno-34-4" name="__codelineno-34-4"></a><span class="w">    </span><span class="nt">access_model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">whitelist</span>
</span></code></pre></div>
</li>
<li>
<p><strong>host</strong><br/>
Deprecated. Use <code>hosts</code> instead.</p>
</li>
<li>
<p><strong>hosts</strong>: <code>[Host, ...]</code><br/>
This option defines the Jabber IDs of the service. If the <code>hosts</code> option
is not specified, the only Jabber ID will be the hostname of the virtual
host with the prefix "pubsub.". The keyword <code>@HOST@</code> is replaced with
the real virtual host name.</p>
</li>
<li>
<p><strong>ignore_pep_from_offline</strong>: <code>false | true</code><br/>
To specify whether or not we should get last published PEP items from
users in our roster which are offline when we connect. Value is <code>true</code>
or <code>false</code>. If not defined, pubsub assumes true so we only get last
items of online contacts.</p>
</li>
<li>
<p><strong>last_item_cache</strong>: <code>false | true</code><br/>
To specify whether or not pubsub should cache last items. Value is
<code>true</code> or <code>false</code>. If not defined, pubsub does not cache last items. On
systems with not so many nodes, caching last items speeds up pubsub and
allows you to raise the user connection rate. The cost is memory usage,
as every item is stored in memory.</p>
</li>
<li>
<p><strong>max_item_expire_node</strong>: <code>timeout() | infinity</code><br/>
<span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/21.12/">21.12</a></span></span>
 Specify the maximum item epiry
time. Default value is: <code>infinity</code>.</p>
</li>
<li>
<p><strong>max_items_node</strong>: <code>non_neg_integer() | infinity</code><br/>
Define the maximum number of items that can be stored in a node. Default
value is: <code>1000</code>.</p>
</li>
<li>
<p><strong>max_nodes_discoitems</strong>: <code>pos_integer() | infinity</code><br/>
The maximum number of nodes to return in a discoitem response. The
default value is: <code>100</code>.</p>
</li>
<li>
<p><strong>max_subscriptions_node</strong>: <code>MaxSubs</code><br/>
Define the maximum number of subscriptions managed by a node. Default
value is no limitation: <code>undefined</code>.</p>
</li>
<li>
<p><strong>name</strong>: <code>Name</code><br/>
The value of the service name. This name is only visible in some clients
that support <a href="https://xmpp.org/extensions/xep-0030.html">XEP-0030: Service
Discovery</a>. The default is
<code>vCard User Search</code>.</p>
</li>
<li>
<p><strong>nodetree</strong>: <code>Nodetree</code><br/>
To specify which nodetree to use. If not defined, the default pubsub
nodetree is used: <code>tree</code>. Only one nodetree can be used per host, and is
shared by all node plugins.</p>
<ul>
<li>
<p><code>tree</code> nodetree store node configuration and relations on the
database. <code>flat</code> nodes are stored without any relationship, and
<code>hometree</code> nodes can have child nodes.</p>
</li>
<li>
<p><code>virtual</code> nodetree does not store nodes on database. This saves
resources on systems with tons of nodes. If using the <code>virtual</code>
nodetree, you can only enable those node plugins: <code>[flat, pep]</code> or
<code>[flat]</code>; any other plugins configuration will not work. Also, all
nodes will have the default configuration, and this can not be
changed. Using <code>virtual</code> nodetree requires to start from a clean
database, it will not work if you used the default <code>tree</code> nodetree
before.</p>
</li>
</ul>
</li>
<li>
<p><strong>pep_mapping</strong>: <code>List of Key:Value</code><br/>
In this option you can provide a list of key-value to choose defined
node plugins on given PEP namespace. The following example will use
<code>node_tune</code> instead of <code>node_pep</code> for every PEP node with the tune
namespace:</p>
<p><strong>Example</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-35-1"><a href="#__codelineno-35-1" id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-35-2"><a href="#__codelineno-35-2" id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span><span id="__span-35-3"><a href="#__codelineno-35-3" id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">mod_pubsub</span><span class="p p-Indicator">:</span>
</span><span id="__span-35-4"><a href="#__codelineno-35-4" id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="w">    </span><span class="nt">pep_mapping</span><span class="p">:</span>
</span><span id="__span-35-5"><a href="#__codelineno-35-5" id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="w">      </span><span class="nt">http://jabber.org/protocol/tune</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tune</span>
</span><span id="__span-35-6"><a href="#__codelineno-35-6" id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span></code></pre></div>
</li>
<li>
<p><strong>plugins</strong>: <code>[Plugin, ...]</code><br/>
To specify which pubsub node plugins to use. The first one in the list
is used by default. If this option is not defined, the default plugins
list is: <code>[flat]</code>. PubSub clients can define which plugin to use when
creating a node: add <em>type='plugin-name<code>' attribute to the</code>create</em>
stanza element.</p>
<ul>
<li>
<p><code>flat</code> plugin handles the default behaviour and follows standard
XEP-0060 implementation.</p>
</li>
<li>
<p><code>pep</code> plugin adds extension to handle Personal Eventing Protocol
(XEP-0163) to the PubSub engine. When enabled, PEP is handled
automatically.</p>
</li>
</ul>
</li>
<li>
<p><strong>vcard</strong>: <code>vCard</code><br/>
A custom vCard of the server that will be displayed by some XMPP clients
in Service Discovery. The value of <code>vCard</code> is a YAML map constructed
from an XML representation of vCard. Since the representation has no
attributes, the mapping is straightforward.</p>
<p><strong>Example</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-36-1"><a href="#__codelineno-36-1" id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="c1"># This XML representation of vCard:</span>
</span><span id="__span-36-2"><a href="#__codelineno-36-2" id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="c1">#   &lt;vCard xmlns='vcard-temp'&gt;</span>
</span><span id="__span-36-3"><a href="#__codelineno-36-3" id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="c1">#     &lt;FN&gt;Conferences&lt;/FN&gt;</span>
</span><span id="__span-36-4"><a href="#__codelineno-36-4" id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="c1">#     &lt;ADR&gt;</span>
</span><span id="__span-36-5"><a href="#__codelineno-36-5" id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="c1">#       &lt;WORK/&gt;</span>
</span><span id="__span-36-6"><a href="#__codelineno-36-6" id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="c1">#       &lt;STREET&gt;Elm Street&lt;/STREET&gt;</span>
</span><span id="__span-36-7"><a href="#__codelineno-36-7" id="__codelineno-36-7" name="__codelineno-36-7"></a><span class="c1">#     &lt;/ADR&gt;</span>
</span><span id="__span-36-8"><a href="#__codelineno-36-8" id="__codelineno-36-8" name="__codelineno-36-8"></a><span class="c1">#   &lt;/vCard&gt;</span>
</span><span id="__span-36-9"><a href="#__codelineno-36-9" id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="c1">#</span>
</span><span id="__span-36-10"><a href="#__codelineno-36-10" id="__codelineno-36-10" name="__codelineno-36-10"></a><span class="c1"># is translated to:</span>
</span><span id="__span-36-11"><a href="#__codelineno-36-11" id="__codelineno-36-11" name="__codelineno-36-11"></a><span class="nt">vcard</span><span class="p">:</span>
</span><span id="__span-36-12"><a href="#__codelineno-36-12" id="__codelineno-36-12" name="__codelineno-36-12"></a><span class="w">  </span><span class="nt">fn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Conferences</span>
</span><span id="__span-36-13"><a href="#__codelineno-36-13" id="__codelineno-36-13" name="__codelineno-36-13"></a><span class="w">  </span><span class="nt">adr</span><span class="p">:</span>
</span><span id="__span-36-14"><a href="#__codelineno-36-14" id="__codelineno-36-14" name="__codelineno-36-14"></a><span class="w">    </span><span class="p p-Indicator">-</span>
</span><span id="__span-36-15"><a href="#__codelineno-36-15" id="__codelineno-36-15" name="__codelineno-36-15"></a><span class="w">      </span><span class="nt">work</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-36-16"><a href="#__codelineno-36-16" id="__codelineno-36-16" name="__codelineno-36-16"></a><span class="w">      </span><span class="nt">street</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Elm Street</span>
</span></code></pre></div>
</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Example of configuration that uses flat nodes as default, and allows use
of flat, hometree and pep nodes:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-37-1"><a href="#__codelineno-37-1" id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-37-2"><a href="#__codelineno-37-2" id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="w">  </span><span class="nt">mod_pubsub</span><span class="p">:</span>
</span><span id="__span-37-3"><a href="#__codelineno-37-3" id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="w">    </span><span class="nt">access_createnode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pubsub_createnode</span>
</span><span id="__span-37-4"><a href="#__codelineno-37-4" id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="w">    </span><span class="nt">max_subscriptions_node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</span><span id="__span-37-5"><a href="#__codelineno-37-5" id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="w">    </span><span class="nt">default_node_config</span><span class="p">:</span>
</span><span id="__span-37-6"><a href="#__codelineno-37-6" id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="w">      </span><span class="nt">notification_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">normal</span>
</span><span id="__span-37-7"><a href="#__codelineno-37-7" id="__codelineno-37-7" name="__codelineno-37-7"></a><span class="w">      </span><span class="nt">notify_retract</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id="__span-37-8"><a href="#__codelineno-37-8" id="__codelineno-37-8" name="__codelineno-37-8"></a><span class="w">      </span><span class="nt">max_items</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
</span><span id="__span-37-9"><a href="#__codelineno-37-9" id="__codelineno-37-9" name="__codelineno-37-9"></a><span class="w">    </span><span class="nt">plugins</span><span class="p">:</span>
</span><span id="__span-37-10"><a href="#__codelineno-37-10" id="__codelineno-37-10" name="__codelineno-37-10"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flat</span>
</span><span id="__span-37-11"><a href="#__codelineno-37-11" id="__codelineno-37-11" name="__codelineno-37-11"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pep</span>
</span></code></pre></div>
<p>Using relational database requires using mod_pubsub with db_type
<code>sql</code>. Only flat, hometree and pep plugins supports SQL. The following
example shows previous configuration with SQL usage:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-38-1"><a href="#__codelineno-38-1" id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-38-2"><a href="#__codelineno-38-2" id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="w">  </span><span class="nt">mod_pubsub</span><span class="p">:</span>
</span><span id="__span-38-3"><a href="#__codelineno-38-3" id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="w">    </span><span class="nt">db_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sql</span>
</span><span id="__span-38-4"><a href="#__codelineno-38-4" id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="w">    </span><span class="nt">access_createnode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pubsub_createnode</span>
</span><span id="__span-38-5"><a href="#__codelineno-38-5" id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="w">    </span><span class="nt">ignore_pep_from_offline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-38-6"><a href="#__codelineno-38-6" id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="w">    </span><span class="nt">last_item_cache</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id="__span-38-7"><a href="#__codelineno-38-7" id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="w">    </span><span class="nt">plugins</span><span class="p">:</span>
</span><span id="__span-38-8"><a href="#__codelineno-38-8" id="__codelineno-38-8" name="__codelineno-38-8"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flat</span>
</span><span id="__span-38-9"><a href="#__codelineno-38-9" id="__codelineno-38-9" name="__codelineno-38-9"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pep</span>
</span></code></pre></div>
<a id="mod-push"></a><h2 id="mod_push">mod_push<a class="headerlink" href="#mod_push" title="Permanent link">¶</a></h2>
<p>This module implements the XMPP server’s part of the push notification
solution specified in <a href="https://xmpp.org/extensions/xep-0357.html">XEP-0357: Push
Notifications</a>. It does not
generate, for example, APNS or FCM notifications directly. Instead, it’s
designed to work with so-called "app servers" operated by third-party
vendors of mobile apps. Those app servers will usually trigger
notification delivery to the user’s mobile device using
platform-dependent backend services such as FCM or APNS.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_missed</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#cache_missed">cache_missed</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>include_body</strong>: <code>true | false | Text</code><br/>
If this option is set to <code>true</code>, the message text is included with push
notifications generated for incoming messages with a body. The option
can instead be set to a static <code>Text</code>, in which case the specified text
will be included in place of the actual message body. This can be useful
to signal the app server whether the notification was triggered by a
message with body (as opposed to other types of traffic) without leaking
actual message contents. The default value is "New message".</p>
</li>
<li>
<p><strong>include_sender</strong>: <code>true | false</code><br/>
If this option is set to <code>true</code>, the sender’s JID is included with push
notifications generated for incoming messages with a body. The default
value is <code>false</code>.</p>
</li>
<li>
<p><strong>notify_on</strong>: <code>messages | all</code><br/>
<span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/23.10/">23.10</a></span></span>
 If this option is set to
<code>messages</code>, notifications are generated only for actual chat messages
with a body text (or some encrypted payload). If it’s set to <code>all</code>, any
kind of XMPP stanza will trigger a notification. If unsure, it’s
strongly recommended to stick to <code>all</code>, which is the default value.</p>
</li>
<li>
<p><strong>use_cache</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
</ul>
<a id="mod-push-keepalive"></a><h2 id="mod_push_keepalive">mod_push_keepalive<a class="headerlink" href="#mod_push_keepalive" title="Permanent link">¶</a></h2>
<p>This module tries to keep the stream management session (see
<a href="#mod_stream_mgmt">mod_stream_mgmt</a>) of a disconnected mobile client alive if the client
enabled push notifications for that session. However, the normal session
resumption timeout is restored once a push notification is issued, so
the session will be closed if the client doesn’t respond to push
notifications.</p>
<p>The module depends on <a href="#mod_push">mod_push</a>.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>resume_timeout</strong>: <code>timeout()</code><br/>
This option specifies the period of time until the session of a
disconnected push client times out. This timeout is only in effect as
long as no push notification is issued. Once that happened, the
resumption timeout configured for <a href="#mod_stream_mgmt">mod_stream_mgmt</a> is restored. The
default value is <code>72</code> hours.</p>
</li>
<li>
<p><strong>wake_on_start</strong>: <code>true | false</code><br/>
If this option is set to <code>true</code>, notifications are generated for <strong>all</strong>
registered push clients during server startup. This option should not be
enabled on servers with many push clients as it can generate significant
load on the involved push services and the server itself. The default
value is <code>false</code>.</p>
</li>
<li>
<p><strong>wake_on_timeout</strong>: <code>true | false</code><br/>
If this option is set to <code>true</code>, a notification is generated shortly
before the session would time out as per the <code>resume_timeout</code> option.
The default value is <code>true</code>.</p>
</li>
</ul>
<a id="mod-register"></a><h2 id="mod_register">mod_register<a class="headerlink" href="#mod_register" title="Permanent link">¶</a></h2>
<p>This module adds support for <a href="https://xmpp.org/extensions/xep-0077.html">XEP-0077: In-Band
Registration</a>. This protocol
enables end users to use an XMPP client to:</p>
<ul>
<li>
<p>Register a new account on the server.</p>
</li>
<li>
<p>Change the password from an existing account on the server.</p>
</li>
<li>
<p>Delete an existing account on the server.</p>
</li>
</ul>
<p>This module reads also the top-level <a href="../toplevel/#registration_timeout">registration_timeout</a> option
defined globally for the server, so please check that option
documentation too.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access</strong>: <code>AccessName</code><br/>
Specify rules to restrict what usernames can be registered. If a rule
returns <code>deny</code> on the requested username, registration of that user name
is denied. There are no restrictions by default. If <code>AccessName</code> is
<code>none</code>, then registering new accounts using In-Band Registration is
disabled and the corresponding stream feature is not announced to
clients.</p>
</li>
<li>
<p><strong>access_from</strong>: <code>AccessName</code><br/>
By default, ejabberd doesn’t allow the client to register new accounts
from s2s or existing c2s sessions. You can change it by defining access
rule in this option. Use with care: allowing registration from s2s leads
to uncontrolled massive accounts creation by rogue users.</p>
</li>
<li>
<p><strong>access_remove</strong>: <code>AccessName</code><br/>
Specify rules to restrict access for user unregistration. By default any
user is able to unregister their account.</p>
</li>
<li>
<p><strong>allow_modules</strong>: <code>all | [Module, ...]</code><br/>
<span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/21.12/">21.12</a></span></span>
 List of modules that can
register accounts, or <code>all</code>. The default value is <code>all</code>, which is
equivalent to something like <code>\[mod\_register, mod_register_web]</code>.</p>
</li>
<li>
<p><strong>captcha_protected</strong>: <code>true | false</code><br/>
Protect registrations with <a href="../basic/#captcha">CAPTCHA</a>. The default is
<code>false</code>.</p>
</li>
<li>
<p><strong>ip_access</strong>: <code>AccessName</code><br/>
Define rules to allow or deny account registration depending on the IP
address of the XMPP client. The <code>AccessName</code> should be of type <code>ip</code>. The
default value is <code>all</code>.</p>
</li>
<li>
<p><strong>password_strength</strong>: <code>Entropy</code><br/>
This option sets the minimum <a href="https://en.wikipedia.org/wiki/Entropy_(information_theory)">Shannon
entropy</a> for
passwords. The value <code>Entropy</code> is a number of bits of entropy. The
recommended minimum is 32 bits. The default is <code>0</code>, i.e. no checks are
performed.</p>
</li>
<li>
<p><strong>redirect_url</strong>: <code>URL</code><br/>
This option enables registration redirection as described in <a href="https://xmpp.org/extensions/xep-0077.html#redirect">XEP-0077:
In-Band Registration:
Redirection</a>.</p>
</li>
<li>
<p><strong>registration_watchers</strong>: <code>[JID, ...]</code><br/>
This option defines a list of JIDs which will be notified each time a
new account is registered.</p>
</li>
<li>
<p><strong>welcome_message</strong>: <code>{subject: Subject, body: Body}</code><br/>
Set a welcome message that is sent to each newly registered account. The
message will have subject <code>Subject</code> and text <code>Body</code>.</p>
<p><strong>Example</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-39-1"><a href="#__codelineno-39-1" id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-39-2"><a href="#__codelineno-39-2" id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="w">  </span><span class="nt">mod_register</span><span class="p">:</span>
</span><span id="__span-39-3"><a href="#__codelineno-39-3" id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="w">    </span><span class="nt">welcome_message</span><span class="p">:</span>
</span><span id="__span-39-4"><a href="#__codelineno-39-4" id="__codelineno-39-4" name="__codelineno-39-4"></a><span class="w">      </span><span class="nt">subject</span><span class="p">:</span><span class="w"> </span><span class="s">"Welcome!"</span>
</span><span id="__span-39-5"><a href="#__codelineno-39-5" id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="w">      </span><span class="nt">body</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span>
</span><span id="__span-39-6"><a href="#__codelineno-39-6" id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="w">        </span><span class="no">Hi!</span>
</span><span id="__span-39-7"><a href="#__codelineno-39-7" id="__codelineno-39-7" name="__codelineno-39-7"></a><span class="w">        </span><span class="no">Welcome to this XMPP server</span>
</span></code></pre></div>
</li>
</ul>
<a id="mod-register-web"></a><h2 id="mod_register_web">mod_register_web<a class="headerlink" href="#mod_register_web" title="Permanent link">¶</a></h2>
<p>This module provides a web page where users can:</p>
<ul>
<li>
<p>Register a new account on the server.</p>
</li>
<li>
<p>Change the password from an existing account on the server.</p>
</li>
<li>
<p>Unregister an existing account on the server.</p>
</li>
</ul>
<p>This module supports <a href="../basic/#captcha">CAPTCHA</a> to register a new
account. To enable this feature, configure the top-level <a href="../toplevel/#captcha_cmd">captcha_cmd</a>
and top-level <a href="../toplevel/#captcha_url">captcha_url</a> options.</p>
<p>As an example usage, the users of the host <code>localhost</code> can visit the
page: <code>https://localhost:5280/register/</code> It is important to include the
last / character in the URL, otherwise the subpages URL will be
incorrect.</p>
<p>This module is enabled in <code>listen</code> → <code>ejabberd_http</code> →
<a href="../listen-options/#request_handlers">request_handlers</a>, no need to
enable in <code>modules</code>. The module depends on <a href="#mod_register">mod_register</a> where all
the configuration is performed.</p>
<p>The module has no options.</p>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-40-1"><a href="#__codelineno-40-1" id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="nt">listen</span><span class="p">:</span>
</span><span id="__span-40-2"><a href="#__codelineno-40-2" id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-40-3"><a href="#__codelineno-40-3" id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5280</span>
</span><span id="__span-40-4"><a href="#__codelineno-40-4" id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="w">    </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ejabberd_http</span>
</span><span id="__span-40-5"><a href="#__codelineno-40-5" id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="w">    </span><span class="nt">request_handlers</span><span class="p">:</span>
</span><span id="__span-40-6"><a href="#__codelineno-40-6" id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="w">      </span><span class="nt">/register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mod_register_web</span>
</span><span id="__span-40-7"><a href="#__codelineno-40-7" id="__codelineno-40-7" name="__codelineno-40-7"></a>
</span><span id="__span-40-8"><a href="#__codelineno-40-8" id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-40-9"><a href="#__codelineno-40-9" id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="w">  </span><span class="nt">mod_register</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span></code></pre></div>
<a id="mod-roster"></a><h2 id="mod_roster">mod_roster<a class="headerlink" href="#mod_roster" title="Permanent link">¶</a></h2>
<p>This module implements roster management as defined in <a href="https://tools.ietf.org/html/rfc6121#section-2">RFC6121 Section
2</a>. The module also adds
support for <a href="https://xmpp.org/extensions/xep-0237.html">XEP-0237: Roster
Versioning</a>.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access</strong>: <code>AccessName</code><br/>
This option can be configured to specify rules to restrict roster
management. If the rule returns <code>deny</code> on the requested user name, that
user cannot modify their personal roster, i.e. they cannot
add/remove/modify contacts or send presence subscriptions. The default
value is <code>all</code>, i.e. no restrictions.</p>
</li>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_missed</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#cache_missed">cache_missed</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>store_current_id</strong>: <code>true | false</code><br/>
If this option is set to <code>true</code>, the current roster version number is
stored on the database. If set to <code>false</code>, the roster version number is
calculated on the fly each time. Enabling this option reduces the load
for both ejabberd and the database. This option does not affect the
client in any way. This option is only useful if option <code>versioning</code> is
set to <code>true</code>. The default value is <code>false</code>. IMPORTANT: if you use
<a href="#mod_shared_roster">mod_shared_roster</a> or <a href="#mod_shared_roster_ldap">mod_shared_roster_ldap</a>, you must set the
value of the option to <code>false</code>.</p>
</li>
<li>
<p><strong>use_cache</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
<li>
<p><strong>versioning</strong>: <code>true | false</code><br/>
Enables/disables Roster Versioning. The default value is <code>false</code>.</p>
</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-41-1"><a href="#__codelineno-41-1" id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-41-2"><a href="#__codelineno-41-2" id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="w">  </span><span class="nt">mod_roster</span><span class="p">:</span>
</span><span id="__span-41-3"><a href="#__codelineno-41-3" id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="w">    </span><span class="nt">versioning</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-41-4"><a href="#__codelineno-41-4" id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="w">    </span><span class="nt">store_current_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span></code></pre></div>
<a id="mod-s2s-bidi"></a><h2 id="mod_s2s_bidi">mod_s2s_bidi<a class="headerlink" href="#mod_s2s_bidi" title="Permanent link">¶</a></h2>
<p><span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/24.10/">24.10</a></span></span></p>
<p>The module adds support for <a href="https://xmpp.org/extensions/xep-0288.html">XEP-0288: Bidirectional Server-to-Server
Connections</a> that allows
using single s2s connection to communicate in both directions.</p>
<p>The module has no options.</p>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-42-1"><a href="#__codelineno-42-1" id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-42-2"><a href="#__codelineno-42-2" id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="w">  </span><span class="nt">mod_s2s_bidi</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span></code></pre></div>
<a id="mod-s2s-dialback"></a><h2 id="mod_s2s_dialback">mod_s2s_dialback<a class="headerlink" href="#mod_s2s_dialback" title="Permanent link">¶</a></h2>
<p>The module adds support for <a href="https://xmpp.org/extensions/xep-0220.html">XEP-0220: Server
Dialback</a> to provide server
identity verification based on DNS.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>DNS-based verification is vulnerable to <a href="https://en.wikipedia.org/wiki/DNS_spoofing">DNS cache
poisoning</a>, so modern
servers rely on verification based on PKIX certificates.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This
module is only recommended for backward compatibility with servers
running outdated software or non-TLS servers, or those with invalid
certificates (as long as you accept the risks, e.g. you assume that
the remote server has an invalid certificate due to poor
administration and not because it’s compromised).</p>
</div>
<p><strong>Available options:</strong></p>
<ul>
<li><strong>access</strong>: <code>AccessName</code><br/>
An access rule that can be used to restrict dialback for some servers.
The default value is <code>all</code>.</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-43-1"><a href="#__codelineno-43-1" id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-43-2"><a href="#__codelineno-43-2" id="__codelineno-43-2" name="__codelineno-43-2"></a><span class="w">  </span><span class="nt">mod_s2s_dialback</span><span class="p">:</span>
</span><span id="__span-43-3"><a href="#__codelineno-43-3" id="__codelineno-43-3" name="__codelineno-43-3"></a><span class="w">    </span><span class="nt">access</span><span class="p">:</span>
</span><span id="__span-43-4"><a href="#__codelineno-43-4" id="__codelineno-43-4" name="__codelineno-43-4"></a><span class="w">      </span><span class="nt">allow</span><span class="p">:</span>
</span><span id="__span-43-5"><a href="#__codelineno-43-5" id="__codelineno-43-5" name="__codelineno-43-5"></a><span class="w">        </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">legacy.domain.tld</span>
</span><span id="__span-43-6"><a href="#__codelineno-43-6" id="__codelineno-43-6" name="__codelineno-43-6"></a><span class="w">        </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">invalid-cert.example.org</span>
</span><span id="__span-43-7"><a href="#__codelineno-43-7" id="__codelineno-43-7" name="__codelineno-43-7"></a><span class="w">      </span><span class="nt">deny</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span>
</span></code></pre></div>
<a id="mod-scram-upgrade"></a><h2 id="mod_scram_upgrade">mod_scram_upgrade<a class="headerlink" href="#mod_scram_upgrade" title="Permanent link">¶</a></h2>
<p><span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/24.10/">24.10</a></span></span></p>
<p>The module adds support for <a href="https://xmpp.org/extensions/xep-0480.html">XEP-0480: SASL Upgrade
Tasks</a> that allows users to
upgrade passwords to more secure representation.</p>
<p><strong>Available options:</strong></p>
<ul>
<li><strong>offered_upgrades</strong>: <code>list(sha256, sha512)</code><br/>
List with upgrade types that should be offered</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-44-1"><a href="#__codelineno-44-1" id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-44-2"><a href="#__codelineno-44-2" id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="w">  </span><span class="nt">mod_scram_upgrade</span><span class="p">:</span>
</span><span id="__span-44-3"><a href="#__codelineno-44-3" id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="w">    </span><span class="nt">offered_upgrades</span><span class="p">:</span>
</span><span id="__span-44-4"><a href="#__codelineno-44-4" id="__codelineno-44-4" name="__codelineno-44-4"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sha256</span>
</span><span id="__span-44-5"><a href="#__codelineno-44-5" id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sha512</span>
</span></code></pre></div>
<a id="mod-service-log"></a><h2 id="mod_service_log">mod_service_log<a class="headerlink" href="#mod_service_log" title="Permanent link">¶</a></h2>
<p>This module forwards copies of all stanzas to remote XMPP servers or
components. Every stanza is encapsulated into &lt;forwarded/&gt; element
as described in <a href="https://xmpp.org/extensions/xep-0297.html">XEP-0297: Stanza
Forwarding</a>.</p>
<p><strong>Available options:</strong></p>
<ul>
<li><strong>loggers</strong>: <code>[Domain, ...]</code><br/>
A list of servers or connected components to which stanzas will be
forwarded.</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-45-1"><a href="#__codelineno-45-1" id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-45-2"><a href="#__codelineno-45-2" id="__codelineno-45-2" name="__codelineno-45-2"></a><span class="w">  </span><span class="nt">mod_service_log</span><span class="p">:</span>
</span><span id="__span-45-3"><a href="#__codelineno-45-3" id="__codelineno-45-3" name="__codelineno-45-3"></a><span class="w">    </span><span class="nt">loggers</span><span class="p">:</span>
</span><span id="__span-45-4"><a href="#__codelineno-45-4" id="__codelineno-45-4" name="__codelineno-45-4"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xmpp-server.tld</span>
</span><span id="__span-45-5"><a href="#__codelineno-45-5" id="__codelineno-45-5" name="__codelineno-45-5"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">component.domain.tld</span>
</span></code></pre></div>
<a id="mod-shared-roster"></a><h2 id="mod_shared_roster">mod_shared_roster<a class="headerlink" href="#mod_shared_roster" title="Permanent link">¶</a></h2>
<p>This module enables you to create shared roster groups: groups of
accounts that can see members from (other) groups in their rosters.</p>
<p>The big advantages of this feature are that end users do not need to
manually add all users to their rosters, and that they cannot
permanently delete users from the shared roster groups. A shared roster
group can have members from any XMPP server, but the presence will only
be available from and to members of the same virtual host where the
group is created. It still allows the users to have / add their own
contacts, as it does not replace the standard roster. Instead, the
shared roster contacts are merged to the relevant users at retrieval
time. The standard user rosters thus stay unmodified.</p>
<p>Shared roster groups can be edited via the Web Admin, and some API
commands called <code>srg_</code>, for example <a href="../../../developer/ejabberd-api/admin-api/#srg_add">srg_add</a> API. Each group has a
unique name and those parameters:</p>
<ul>
<li>
<p>Label: Used in the rosters where this group is displayed.</p>
</li>
<li>
<p>Description: of the group, which has no effect.</p>
</li>
<li>
<p>Members: A list of JIDs of group members, entered one per line in
    the Web Admin. The special member directive <code>@all@</code> represents all
    the registered users in the virtual host; which is only recommended
    for a small server with just a few hundred users. The special member
    directive <code>@online@</code> represents the online users in the virtual
    host. With those two directives, the actual list of members in those
    shared rosters is generated dynamically at retrieval time.</p>
</li>
<li>
<p>Displayed: A list of groups that will be in the rosters of this
    group’s members. A group of other vhost can be identified with
    <code>groupid@vhost</code>.</p>
</li>
</ul>
<p>This module depends on <a href="#mod_roster">mod_roster</a>. If not enabled, roster queries
will return 503 errors.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_missed</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#cache_missed">cache_missed</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>use_cache</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
</ul>
<p><strong>Examples:</strong></p>
<p>Take the case of a computer club that wants all its members seeing each
other in their rosters. To achieve this, they need to create a shared
roster group similar to this one:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-46-1"><a href="#__codelineno-46-1" id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">club_members</span>
</span><span id="__span-46-2"><a href="#__codelineno-46-2" id="__codelineno-46-2" name="__codelineno-46-2"></a><span class="nt">Label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Club Members</span>
</span><span id="__span-46-3"><a href="#__codelineno-46-3" id="__codelineno-46-3" name="__codelineno-46-3"></a><span class="nt">Description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Members from the computer club</span>
</span><span id="__span-46-4"><a href="#__codelineno-46-4" id="__codelineno-46-4" name="__codelineno-46-4"></a><span class="nt">Members</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">member1@example.org, member2@example.org, member3@example.org</span>
</span><span id="__span-46-5"><a href="#__codelineno-46-5" id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="nt">Displayed Groups</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">club_members</span>
</span></code></pre></div>
<p>In another case we have a company which has three divisions: Management,
Marketing and Sales. All group members should see all other members in
their rosters. Additionally, all managers should have all marketing and
sales people in their roster. Simultaneously, all marketeers and the
whole sales team should see all managers. This scenario can be achieved
by creating shared roster groups as shown in the following lists:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-47-1"><a href="#__codelineno-47-1" id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="nt">First list</span><span class="p">:</span>
</span><span id="__span-47-2"><a href="#__codelineno-47-2" id="__codelineno-47-2" name="__codelineno-47-2"></a><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">management</span>
</span><span id="__span-47-3"><a href="#__codelineno-47-3" id="__codelineno-47-3" name="__codelineno-47-3"></a><span class="nt">Label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Management</span>
</span><span id="__span-47-4"><a href="#__codelineno-47-4" id="__codelineno-47-4" name="__codelineno-47-4"></a><span class="nt">Description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Management</span>
</span><span id="__span-47-5"><a href="#__codelineno-47-5" id="__codelineno-47-5" name="__codelineno-47-5"></a><span class="nt">Members</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">manager1@example.org, manager2@example.org</span>
</span><span id="__span-47-6"><a href="#__codelineno-47-6" id="__codelineno-47-6" name="__codelineno-47-6"></a><span class="nt">Displayed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">management, marketing, sales</span>
</span><span id="__span-47-7"><a href="#__codelineno-47-7" id="__codelineno-47-7" name="__codelineno-47-7"></a>
</span><span id="__span-47-8"><a href="#__codelineno-47-8" id="__codelineno-47-8" name="__codelineno-47-8"></a><span class="nt">Second list</span><span class="p">:</span>
</span><span id="__span-47-9"><a href="#__codelineno-47-9" id="__codelineno-47-9" name="__codelineno-47-9"></a><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">marketing</span>
</span><span id="__span-47-10"><a href="#__codelineno-47-10" id="__codelineno-47-10" name="__codelineno-47-10"></a><span class="nt">Label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Marketing</span>
</span><span id="__span-47-11"><a href="#__codelineno-47-11" id="__codelineno-47-11" name="__codelineno-47-11"></a><span class="nt">Description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Marketing</span>
</span><span id="__span-47-12"><a href="#__codelineno-47-12" id="__codelineno-47-12" name="__codelineno-47-12"></a><span class="nt">Members</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">marketeer1@example.org, marketeer2@example.org, marketeer3@example.org</span>
</span><span id="__span-47-13"><a href="#__codelineno-47-13" id="__codelineno-47-13" name="__codelineno-47-13"></a><span class="nt">Displayed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">management, marketing</span>
</span><span id="__span-47-14"><a href="#__codelineno-47-14" id="__codelineno-47-14" name="__codelineno-47-14"></a>
</span><span id="__span-47-15"><a href="#__codelineno-47-15" id="__codelineno-47-15" name="__codelineno-47-15"></a><span class="nt">Third list</span><span class="p">:</span>
</span><span id="__span-47-16"><a href="#__codelineno-47-16" id="__codelineno-47-16" name="__codelineno-47-16"></a><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sales</span>
</span><span id="__span-47-17"><a href="#__codelineno-47-17" id="__codelineno-47-17" name="__codelineno-47-17"></a><span class="nt">Label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sales</span>
</span><span id="__span-47-18"><a href="#__codelineno-47-18" id="__codelineno-47-18" name="__codelineno-47-18"></a><span class="nt">Description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sales</span>
</span><span id="__span-47-19"><a href="#__codelineno-47-19" id="__codelineno-47-19" name="__codelineno-47-19"></a><span class="nt">Members</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">salesman1@example.org, salesman2@example.org, salesman3@example.org</span>
</span><span id="__span-47-20"><a href="#__codelineno-47-20" id="__codelineno-47-20" name="__codelineno-47-20"></a><span class="nt">Displayed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">management, sales</span>
</span></code></pre></div>
<a id="mod-shared-roster-ldap"></a><h2 id="mod_shared_roster_ldap">mod_shared_roster_ldap<a class="headerlink" href="#mod_shared_roster_ldap" title="Permanent link">¶</a></h2>
<p>This module lets the server administrator automatically populate users'
rosters (contact lists) with entries based on users and groups defined
in an LDAP-based directory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>mod\_shared_roster_ldap</code> depends on <code>mod_roster</code> being enabled.
Roster queries will return <code>503</code> errors if <code>mod_roster</code> is not
enabled.</p>
</div>
<p>The module accepts many configuration options. Some of them, if
unspecified, default to the values specified for the top level of
configuration. This lets you avoid specifying, for example, the bind
password in multiple places.</p>
<ul>
<li>
<p>Filters: <code>ldap_rfilter</code>, <code>ldap_ufilter</code>, <code>ldap_gfilter</code>,
    <code>ldap_filter</code>. These options specify LDAP filters used to query for
    shared roster information. All of them are run against the
    ldap_base.</p>
</li>
<li>
<p>Attributes: <code>ldap_groupattr</code>, <code>ldap_groupdesc</code>,
    <code>ldap_memberattr</code>, <code>ldap_userdesc</code>, <code>ldap_useruid</code>. These options
    specify the names of the attributes which hold interesting data in
    the entries returned by running filters specified with the filter
    options.</p>
</li>
<li>
<p>Control parameters: <code>ldap_auth_check</code>,
    <code>ldap\_group\_cache_validity</code>, <code>ldap_memberattr_format</code>,
    <code>ldap\_memberattr\_format\_re</code>, <code>ldap_user_cache_validity</code>. These
    parameters control the behaviour of the module.</p>
</li>
<li>
<p>Connection parameters: The module also accepts the connection
    parameters, all of which default to the top-level parameter of the
    same name, if unspecified. See
    <a href="../ldap/#ldap-connection">LDAP Connection</a> section for more
    information about them.</p>
</li>
</ul>
<p>Check also the <a href="../ldap/#ldap-examples">Configuration examples</a> section
to get details about retrieving the roster, and configuration examples
including Flat DIT and Deep DIT.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>cache_life_time</strong><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_missed</strong><br/>
Same as top-level <a href="../toplevel/#cache_missed">cache_missed</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_auth_check</strong>: <code>true | false</code><br/>
Whether the module should check (via the ejabberd authentication
subsystem) for existence of each user in the shared LDAP roster. Set to
<code>false</code> if you want to disable the check. Default value is <code>true</code>.</p>
</li>
<li>
<p><strong>ldap_backups</strong><br/>
Same as top-level <a href="../toplevel/#ldap_backups">ldap_backups</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_base</strong><br/>
Same as top-level <a href="../toplevel/#ldap_base">ldap_base</a> option, but applied to this module only.</p>
</li>
<li>
<p><strong>ldap_deref_aliases</strong><br/>
Same as top-level <a href="../toplevel/#ldap_deref_aliases">ldap_deref_aliases</a> option, but applied to this
module only.</p>
</li>
<li>
<p><strong>ldap_encrypt</strong><br/>
Same as top-level <a href="../toplevel/#ldap_encrypt">ldap_encrypt</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_filter</strong><br/>
Additional filter which is AND-ed together with "User Filter" and "Group
Filter". For more information check the LDAP <a href="../ldap/#filters">Filters</a>
section.</p>
</li>
<li>
<p><strong>ldap_gfilter</strong><br/>
"Group Filter", used when retrieving human-readable name (a.k.a.
"Display Name") and the members of a group. See also the parameters
<code>ldap_groupattr</code>, <code>ldap_groupdesc</code> and <code>ldap_memberattr</code>. If
unspecified, defaults to the top-level parameter of the same name. If
that one also is unspecified, then the filter is constructed exactly
like "User Filter".</p>
</li>
<li>
<p><strong>ldap_groupattr</strong><br/>
The name of the attribute that holds the group name, and that is used to
differentiate between them. Retrieved from results of the "Roster
Filter" and "Group Filter". Defaults to <code>cn</code>.</p>
</li>
<li>
<p><strong>ldap_groupdesc</strong><br/>
The name of the attribute which holds the human-readable group name in
the objects you use to represent groups. Retrieved from results of the
"Group Filter". Defaults to whatever <code>ldap_groupattr</code> is set.</p>
</li>
<li>
<p><strong>ldap_memberattr</strong><br/>
The name of the attribute which holds the IDs of the members of a group.
Retrieved from results of the "Group Filter". Defaults to <code>memberUid</code>.
The name of the attribute differs depending on the objectClass you use
for your group objects, for example: <code>posixGroup</code> → <code>memberUid</code>;
<code>groupOfNames</code> → <code>member</code>; <code>groupOfUniqueNames</code> → <code>uniqueMember</code>.</p>
</li>
<li>
<p><strong>ldap_memberattr_format</strong><br/>
A globbing format for extracting user ID from the value of the attribute
named by <code>ldap_memberattr</code>. Defaults to <code>%u</code>, which means that the
whole value is the member ID. If you change it to something different,
you may also need to specify the User and Group Filters manually; see
section Filters.</p>
</li>
<li>
<p><strong>ldap_memberattr_format_re</strong><br/>
A regex for extracting user ID from the value of the attribute named by
<code>ldap_memberattr</code>. Check the LDAP
<a href="../ldap/#control-parameters">Control Parameters</a> section.</p>
</li>
<li>
<p><strong>ldap_password</strong><br/>
Same as top-level <a href="../toplevel/#ldap_password">ldap_password</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_port</strong><br/>
Same as top-level <a href="../toplevel/#ldap_port">ldap_port</a> option, but applied to this module only.</p>
</li>
<li>
<p><strong>ldap_rfilter</strong><br/>
So called "Roster Filter". Used to find names of all "shared roster"
groups. See also the <code>ldap_groupattr</code> parameter. If unspecified,
defaults to the top-level parameter of the same name. You must specify
it in some place in the configuration, there is no default.</p>
</li>
<li>
<p><strong>ldap_rootdn</strong><br/>
Same as top-level <a href="../toplevel/#ldap_rootdn">ldap_rootdn</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_servers</strong><br/>
Same as top-level <a href="../toplevel/#ldap_servers">ldap_servers</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_tls_cacertfile</strong><br/>
Same as top-level <a href="../toplevel/#ldap_tls_cacertfile">ldap_tls_cacertfile</a> option, but applied to this
module only.</p>
</li>
<li>
<p><strong>ldap_tls_certfile</strong><br/>
Same as top-level <a href="../toplevel/#ldap_tls_certfile">ldap_tls_certfile</a> option, but applied to this
module only.</p>
</li>
<li>
<p><strong>ldap_tls_depth</strong><br/>
Same as top-level <a href="../toplevel/#ldap_tls_depth">ldap_tls_depth</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_tls_verify</strong><br/>
Same as top-level <a href="../toplevel/#ldap_tls_verify">ldap_tls_verify</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_ufilter</strong><br/>
"User Filter", used for retrieving the human-readable name of roster
entries (usually full names of people in the roster). See also the
parameters <code>ldap_userdesc</code> and <code>ldap_useruid</code>. For more information
check the LDAP <a href="../ldap/#filters">Filters</a> section.</p>
</li>
<li>
<p><strong>ldap_uids</strong><br/>
Same as top-level <a href="../toplevel/#ldap_uids">ldap_uids</a> option, but applied to this module only.</p>
</li>
<li>
<p><strong>ldap_userdesc</strong><br/>
The name of the attribute which holds the human-readable user name.
Retrieved from results of the "User Filter". Defaults to <code>cn</code>.</p>
</li>
<li>
<p><strong>ldap_userjidattr</strong><br/>
The name of the attribute which is used to map user id to XMPP jid. If
not specified (and that is default value of this option), user jid will
be created from user id and this module host.</p>
</li>
<li>
<p><strong>ldap_useruid</strong><br/>
The name of the attribute which holds the ID of a roster item. Value of
this attribute in the roster item objects needs to match the ID
retrieved from the <code>ldap_memberattr</code> attribute of a group object.
Retrieved from results of the "User Filter". Defaults to <code>cn</code>.</p>
</li>
<li>
<p><strong>use_cache</strong><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
</ul>
<a id="mod-sic"></a><h2 id="mod_sic">mod_sic<a class="headerlink" href="#mod_sic" title="Permanent link">¶</a></h2>
<p>This module adds support for <a href="https://xmpp.org/extensions/xep-0279.html">XEP-0279: Server IP
Check</a>. This protocol enables
a client to discover its external IP address.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The protocol extension is deferred and seems like there are no clients
supporting it, so using this module is not recommended and,
furthermore, the module might be removed in the future.</p>
</div>
<p>The module has no options.</p>
<a id="mod-sip"></a><h2 id="mod_sip">mod_sip<a class="headerlink" href="#mod_sip" title="Permanent link">¶</a></h2>
<p>This module adds SIP proxy/registrar support for the corresponding
virtual host.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is not enough to just load this module. You should also configure
listeners and DNS records properly. For details see the section about
the <a href="../listen/#ejabberd_sip">ejabberd_sip</a> listen module in the
ejabberd Documentation.</p>
</div>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>always_record_route</strong>: <code>true | false</code><br/>
Always insert "Record-Route" header into SIP messages. With this
approach it is possible to bypass NATs/firewalls a bit more easily. The
default value is <code>true</code>.</p>
</li>
<li>
<p><strong>flow_timeout_tcp</strong>: <code>timeout()</code><br/>
The option sets a keep-alive timer for <a href="https://tools.ietf.org/html/rfc5626">SIP
outbound</a> TCP connections. The
default value is <code>2</code> minutes.</p>
</li>
<li>
<p><strong>flow_timeout_udp</strong>: <code>timeout()</code><br/>
The options sets a keep-alive timer for <a href="https://tools.ietf.org/html/rfc5626">SIP
outbound</a> UDP connections. The
default value is <code>29</code> seconds.</p>
</li>
<li>
<p><strong>record_route</strong>: <code>URI</code><br/>
When the option <code>always_record_route</code> is set to <code>true</code> or when <a href="https://tools.ietf.org/html/rfc5626">SIP
outbound</a> is utilized, ejabberd
inserts "Record-Route" header field with this <code>URI</code> into a SIP message.
The default is a SIP URI constructed from the virtual host on which the
module is loaded.</p>
</li>
<li>
<p><strong>routes</strong>: <code>[URI, ...]</code><br/>
You can set a list of SIP URIs of routes pointing to this SIP proxy
server. The default is a list containing a single SIP URI constructed
from the virtual host on which the module is loaded.</p>
</li>
<li>
<p><strong>via</strong>: <code>[URI, ...]</code><br/>
A list to construct "Via" headers for inserting them into outgoing SIP
messages. This is useful if you’re running your SIP proxy in a
non-standard network topology. Every <code>URI</code> element in the list must be
in the form of "scheme://host:port", where "transport" must be <code>tls</code>,
<code>tcp</code>, or <code>udp</code>, "host" must be a domain name or an IP address and
"port" must be an internet port number. Note that all parts of the <code>URI</code>
are mandatory (e.g. you cannot omit "port" or "scheme").</p>
</li>
</ul>
<p><strong><strong>Example</strong>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-48-1"><a href="#__codelineno-48-1" id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="nt">modules</span><span class="p">:</span>
</span><span id="__span-48-2"><a href="#__codelineno-48-2" id="__codelineno-48-2" name="__codelineno-48-2"></a><span class="w">  </span><span class="nt">mod_sip</span><span class="p">:</span>
</span><span id="__span-48-3"><a href="#__codelineno-48-3" id="__codelineno-48-3" name="__codelineno-48-3"></a><span class="w">    </span><span class="nt">always_record_route</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id="__span-48-4"><a href="#__codelineno-48-4" id="__codelineno-48-4" name="__codelineno-48-4"></a><span class="w">    </span><span class="nt">record_route</span><span class="p">:</span><span class="w"> </span><span class="s">"sip:example.com;lr"</span>
</span><span id="__span-48-5"><a href="#__codelineno-48-5" id="__codelineno-48-5" name="__codelineno-48-5"></a><span class="w">    </span><span class="nt">routes</span><span class="p">:</span>
</span><span id="__span-48-6"><a href="#__codelineno-48-6" id="__codelineno-48-6" name="__codelineno-48-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">"sip:example.com;lr"</span>
</span><span id="__span-48-7"><a href="#__codelineno-48-7" id="__codelineno-48-7" name="__codelineno-48-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">"sip:sip.example.com;lr"</span>
</span><span id="__span-48-8"><a href="#__codelineno-48-8" id="__codelineno-48-8" name="__codelineno-48-8"></a><span class="w">    </span><span class="nt">flow_timeout_udp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30 sec</span>
</span><span id="__span-48-9"><a href="#__codelineno-48-9" id="__codelineno-48-9" name="__codelineno-48-9"></a><span class="w">    </span><span class="nt">flow_timeout_tcp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1 min</span>
</span><span id="__span-48-10"><a href="#__codelineno-48-10" id="__codelineno-48-10" name="__codelineno-48-10"></a><span class="w">    </span><span class="nt">via</span><span class="p">:</span>
</span><span id="__span-48-11"><a href="#__codelineno-48-11" id="__codelineno-48-11" name="__codelineno-48-11"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls://sip-tls.example.com:5061</span>
</span><span id="__span-48-12"><a href="#__codelineno-48-12" id="__codelineno-48-12" name="__codelineno-48-12"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp://sip-tcp.example.com:5060</span>
</span><span id="__span-48-13"><a href="#__codelineno-48-13" id="__codelineno-48-13" name="__codelineno-48-13"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">udp://sip-udp.example.com:5060</span>
</span></code></pre></div>
<a id="mod-stats"></a><h2 id="mod_stats">mod_stats<a class="headerlink" href="#mod_stats" title="Permanent link">¶</a></h2>
<p>This module adds support for <a href="https://xmpp.org/extensions/xep-0039.html">XEP-0039: Statistics
Gathering</a>. This protocol
allows you to retrieve the following statistics from your ejabberd
server:</p>
<ul>
<li>
<p>Total number of registered users on the current virtual host
    (users/total).</p>
</li>
<li>
<p>Total number of registered users on all virtual hosts
    (users/all-hosts/total).</p>
</li>
<li>
<p>Total number of online users on the current virtual host
    (users/online).</p>
</li>
<li>
<p>Total number of online users on all virtual hosts
    (users/all-hosts/online).</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The protocol extension is deferred and seems like even a few clients
that were supporting it are now abandoned. So using this module makes
very little sense.</p>
</div>
<p>The module has no options.</p>
<a id="mod-stream-mgmt"></a><h2 id="mod_stream_mgmt">mod_stream_mgmt<a class="headerlink" href="#mod_stream_mgmt" title="Permanent link">¶</a></h2>
<p>This module adds support for <a href="https://xmpp.org/extensions/xep-0198.html">XEP-0198: Stream
Management</a>. This protocol
allows active management of an XML stream between two XMPP entities,
including features for stanza acknowledgments and stream resumption.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>ack_timeout</strong>: <code>timeout()</code><br/>
A time to wait for stanza acknowledgments. Setting it to <code>infinity</code>
effectively disables the timeout. The default value is <code>1</code> minute.</p>
</li>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only. The default value is <code>48 hours</code>.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>max_ack_queue</strong>: <code>Size</code><br/>
This option specifies the maximum number of unacknowledged stanzas
queued for possible retransmission. When the limit is exceeded, the
client session is terminated. The allowed values are positive integers
and <code>infinity</code>. You should be careful when setting this value as it
should not be set too low, otherwise, you could kill sessions in a loop,
before they get the chance to finish proper session initiation. It
should definitely be set higher that the size of the offline queue (for
example at least 3 times the value of the max offline queue and never
lower than <code>1000</code>). The default value is <code>5000</code>.</p>
</li>
<li>
<p><strong>max_resume_timeout</strong>: <code>timeout()</code><br/>
A client may specify the period of time until a session times out if the
connection is lost. During this period of time, the client may resume
its session. This option limits the period of time a client is permitted
to request. It must be set to a timeout equal to or larger than the
default <code>resume_timeout</code>. By default, it is set to the same value as
the <code>resume_timeout</code> option.</p>
</li>
<li>
<p><strong>queue_type</strong>: <code>ram | file</code><br/>
Same as top-level <a href="../toplevel/#queue_type">queue_type</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>resend_on_timeout</strong>: <code>true | false | if_offline</code><br/>
If this option is set to <code>true</code>, any message stanzas that weren’t
acknowledged by the client will be resent on session timeout. This
behavior might often be desired, but could have unexpected results under
certain circumstances. For example, a message that was sent to two
resources might get resent to one of them if the other one timed out.
Therefore, the default value for this option is <code>false</code>, which tells
ejabberd to generate an error message instead. As an alternative, the
option may be set to <code>if_offline</code>. In this case, unacknowledged
messages are resent only if no other resource is online when the session
times out. Otherwise, error messages are generated.</p>
</li>
<li>
<p><strong>resume_timeout</strong>: <code>timeout()</code><br/>
This option configures the (default) period of time until a session
times out if the connection is lost. During this period of time, a
client may resume its session. Note that the client may request a
different timeout value, see the <code>max_resume_timeout</code> option. Setting
it to <code>0</code> effectively disables session resumption. The default value is
<code>5</code> minutes.</p>
</li>
</ul>
<a id="mod-stun-disco"></a><h2 id="mod_stun_disco">mod_stun_disco<a class="headerlink" href="#mod_stun_disco" title="Permanent link">¶</a></h2>
<p><span class="mdx-badge"><span class="mdx-badge__icon"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"></path></svg></span></span> <span class="mdx-badge__text">added in <a href="../../../archive/20.04/">20.04</a></span></span></p>
<p>This module allows XMPP clients to discover STUN/TURN services and to
obtain temporary credentials for using them as per <a href="https://xmpp.org/extensions/xep-0215.html">XEP-0215: External
Service Discovery</a>.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>access</strong>: <code>AccessName</code><br/>
This option defines which access rule will be used to control who is
allowed to discover STUN/TURN services and to request temporary
credentials. The default value is <code>local</code>.</p>
</li>
<li>
<p><strong>credentials_lifetime</strong>: <code>timeout()</code><br/>
The lifetime of temporary credentials offered to clients. If ejabberd’s
built-in TURN service is used, TURN relays allocated using temporary
credentials will be terminated shortly after the credentials expired.
The default value is <code>12 hours</code>. Note that restarting the ejabberd node
invalidates any temporary credentials offered before the restart unless
a <code>secret</code> is specified (see below).</p>
</li>
<li>
<p><strong>offer_local_services</strong>: <code>true | false</code><br/>
This option specifies whether local STUN/TURN services configured as
ejabberd listeners should be announced automatically. Note that this
will not include TLS-enabled services, which must be configured manually
using the <code>services</code> option (see below). For non-anonymous TURN
services, temporary credentials will be offered to the client. The
default value is <code>true</code>.</p>
</li>
<li>
<p><strong>secret</strong>: <code>Text</code><br/>
The secret used for generating temporary credentials. If this option
isn’t specified, a secret will be auto-generated. However, a secret must
be specified explicitly if non-anonymous TURN services running on other
ejabberd nodes and/or external TURN <code>services</code> are configured. Also note
that auto-generated secrets are lost when the node is restarted, which
invalidates any credentials offered before the restart. Therefore, it’s
recommended to explicitly specify a secret if clients cache retrieved
credentials (for later use) across service restarts.</p>
</li>
<li>
<p><strong>services</strong>: <code>[Service, ...]</code><br/>
The list of services offered to clients. This list can include STUN/TURN
services running on any ejabberd node and/or external services. However,
if any listed TURN service not running on the local ejabberd node
requires authentication, a <code>secret</code> must be specified explicitly, and
must be shared with that service. This will only work with ejabberd’s
built-in STUN/TURN server and with external servers that support the
same <a href="https://tools.ietf.org/html/draft-uberti-behave-turn-rest-00">REST API For Access To TURN
Services</a>.
Unless the <code>offer_local_services</code> is set to <code>false</code>, the explicitly
listed services will be offered in addition to those announced
automatically.</p>
<ul>
<li>
<p><strong>host</strong>: <code>Host</code><br/>
   The hostname or IP address the STUN/TURN service is
listening on. For non-TLS services, it’s recommended to specify an
IP address (to avoid additional DNS lookup latency on the client
side). For TLS services, the hostname (or IP address) should match
the certificate. Specifying the <code>host</code> option is mandatory.</p>
</li>
<li>
<p><strong>port</strong>: <code>1..65535</code><br/>
   The port number the STUN/TURN service is
listening on. The default port number is 3478 for non-TLS services
and 5349 for TLS services.</p>
</li>
<li>
<p><strong>restricted</strong>: <code>true | false</code><br/>
   This option determines whether
temporary credentials for accessing the service are offered. The
default is <code>false</code> for STUN/STUNS services and <code>true</code> for TURN/TURNS
services.</p>
</li>
<li>
<p><strong>transport</strong>: <code>tcp | udp</code><br/>
   The transport protocol supported by the
service. The default is <code>udp</code> for non-TLS services and <code>tcp</code> for TLS
services.</p>
</li>
<li>
<p><strong>type</strong>: <code>stun | turn | stuns | turns</code><br/>
   The type of service. Must be
<code>stun</code> or <code>turn</code> for non-TLS services, <code>stuns</code> or <code>turns</code> for TLS
services. The default type is <code>stun</code>.</p>
</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-49-1"><a href="#__codelineno-49-1" id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-49-2"><a href="#__codelineno-49-2" id="__codelineno-49-2" name="__codelineno-49-2"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-49-3"><a href="#__codelineno-49-3" id="__codelineno-49-3" name="__codelineno-49-3"></a><span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">203.0.113.3</span>
</span><span id="__span-49-4"><a href="#__codelineno-49-4" id="__codelineno-49-4" name="__codelineno-49-4"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3478</span>
</span><span id="__span-49-5"><a href="#__codelineno-49-5" id="__codelineno-49-5" name="__codelineno-49-5"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stun</span>
</span><span id="__span-49-6"><a href="#__codelineno-49-6" id="__codelineno-49-6" name="__codelineno-49-6"></a><span class="w">    </span><span class="nt">transport</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">udp</span>
</span><span id="__span-49-7"><a href="#__codelineno-49-7" id="__codelineno-49-7" name="__codelineno-49-7"></a><span class="w">    </span><span class="nt">restricted</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id="__span-49-8"><a href="#__codelineno-49-8" id="__codelineno-49-8" name="__codelineno-49-8"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-49-9"><a href="#__codelineno-49-9" id="__codelineno-49-9" name="__codelineno-49-9"></a><span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">203.0.113.3</span>
</span><span id="__span-49-10"><a href="#__codelineno-49-10" id="__codelineno-49-10" name="__codelineno-49-10"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3478</span>
</span><span id="__span-49-11"><a href="#__codelineno-49-11" id="__codelineno-49-11" name="__codelineno-49-11"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">turn</span>
</span><span id="__span-49-12"><a href="#__codelineno-49-12" id="__codelineno-49-12" name="__codelineno-49-12"></a><span class="w">    </span><span class="nt">transport</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">udp</span>
</span><span id="__span-49-13"><a href="#__codelineno-49-13" id="__codelineno-49-13" name="__codelineno-49-13"></a><span class="w">    </span><span class="nt">restricted</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-49-14"><a href="#__codelineno-49-14" id="__codelineno-49-14" name="__codelineno-49-14"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-49-15"><a href="#__codelineno-49-15" id="__codelineno-49-15" name="__codelineno-49-15"></a><span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2001:db8::3</span>
</span><span id="__span-49-16"><a href="#__codelineno-49-16" id="__codelineno-49-16" name="__codelineno-49-16"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3478</span>
</span><span id="__span-49-17"><a href="#__codelineno-49-17" id="__codelineno-49-17" name="__codelineno-49-17"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stun</span>
</span><span id="__span-49-18"><a href="#__codelineno-49-18" id="__codelineno-49-18" name="__codelineno-49-18"></a><span class="w">    </span><span class="nt">transport</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">udp</span>
</span><span id="__span-49-19"><a href="#__codelineno-49-19" id="__codelineno-49-19" name="__codelineno-49-19"></a><span class="w">    </span><span class="nt">restricted</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id="__span-49-20"><a href="#__codelineno-49-20" id="__codelineno-49-20" name="__codelineno-49-20"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-49-21"><a href="#__codelineno-49-21" id="__codelineno-49-21" name="__codelineno-49-21"></a><span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2001:db8::3</span>
</span><span id="__span-49-22"><a href="#__codelineno-49-22" id="__codelineno-49-22" name="__codelineno-49-22"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3478</span>
</span><span id="__span-49-23"><a href="#__codelineno-49-23" id="__codelineno-49-23" name="__codelineno-49-23"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">turn</span>
</span><span id="__span-49-24"><a href="#__codelineno-49-24" id="__codelineno-49-24" name="__codelineno-49-24"></a><span class="w">    </span><span class="nt">transport</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">udp</span>
</span><span id="__span-49-25"><a href="#__codelineno-49-25" id="__codelineno-49-25" name="__codelineno-49-25"></a><span class="w">    </span><span class="nt">restricted</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-49-26"><a href="#__codelineno-49-26" id="__codelineno-49-26" name="__codelineno-49-26"></a><span class="w">  </span><span class="p p-Indicator">-</span>
</span><span id="__span-49-27"><a href="#__codelineno-49-27" id="__codelineno-49-27" name="__codelineno-49-27"></a><span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">server.example.com</span>
</span><span id="__span-49-28"><a href="#__codelineno-49-28" id="__codelineno-49-28" name="__codelineno-49-28"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5349</span>
</span><span id="__span-49-29"><a href="#__codelineno-49-29" id="__codelineno-49-29" name="__codelineno-49-29"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">turns</span>
</span><span id="__span-49-30"><a href="#__codelineno-49-30" id="__codelineno-49-30" name="__codelineno-49-30"></a><span class="w">    </span><span class="nt">transport</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
</span><span id="__span-49-31"><a href="#__codelineno-49-31" id="__codelineno-49-31" name="__codelineno-49-31"></a><span class="w">    </span><span class="nt">restricted</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div>
</li>
</ul>
<a id="mod-time"></a><h2 id="mod_time">mod_time<a class="headerlink" href="#mod_time" title="Permanent link">¶</a></h2>
<p>This module adds support for <a href="https://xmpp.org/extensions/xep-0202.html">XEP-0202: Entity
Time</a>. In other words, the
module reports server’s system time.</p>
<p>The module has no options.</p>
<a id="mod-vcard"></a><h2 id="mod_vcard">mod_vcard<a class="headerlink" href="#mod_vcard" title="Permanent link">¶</a></h2>
<p>This module allows end users to store and retrieve their vCard, and to
retrieve other users vCards, as defined in <a href="https://xmpp.org/extensions/xep-0054.html">XEP-0054:
vcard-temp</a>. The module also
implements an uncomplicated Jabber User Directory based on the vCards of
these users. Moreover, it enables the server to send its vCard when
queried.</p>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>allow_return_all</strong>: <code>true | false</code><br/>
This option enables you to specify if search operations with empty input
fields should return all users who added some information to their
vCard. The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_missed</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#cache_missed">cache_missed</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>db_type</strong>: <code>mnesia | sql | ldap</code><br/>
Same as top-level <a href="../toplevel/#default_db">default_db</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>host</strong><br/>
Deprecated. Use <code>hosts</code> instead.</p>
</li>
<li>
<p><strong>hosts</strong>: <code>[Host, ...]</code><br/>
This option defines the Jabber IDs of the service. If the <code>hosts</code> option
is not specified, the only Jabber ID will be the hostname of the virtual
host with the prefix "vjud.". The keyword <code>@HOST@</code> is replaced with the
real virtual host name.</p>
</li>
<li>
<p><strong>matches</strong>: <code>pos_integer() | infinity</code><br/>
With this option, the number of reported search results can be limited.
If the option’s value is set to <code>infinity</code>, all search results are
reported. The default value is <code>30</code>.</p>
</li>
<li>
<p><strong>name</strong>: <code>Name</code><br/>
The value of the service name. This name is only visible in some clients
that support <a href="https://xmpp.org/extensions/xep-0030.html">XEP-0030: Service
Discovery</a>. The default is
<code>vCard User Search</code>.</p>
</li>
<li>
<p><strong>search</strong>: <code>true | false</code><br/>
This option specifies whether the search functionality is enabled or
not. If disabled, the options <code>hosts</code>, <code>name</code> and <code>vcard</code> will be
ignored and the Jabber User Directory service will not appear in the
Service Discovery item list. The default value is <code>false</code>.</p>
</li>
<li>
<p><strong>use_cache</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
<li>
<p><strong>vcard</strong>: <code>vCard</code><br/>
A custom vCard of the server that will be displayed by some XMPP clients
in Service Discovery. The value of <code>vCard</code> is a YAML map constructed
from an XML representation of vCard. Since the representation has no
attributes, the mapping is straightforward.</p>
<p><strong>Example</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-50-1"><a href="#__codelineno-50-1" id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="c1"># This XML representation of vCard:</span>
</span><span id="__span-50-2"><a href="#__codelineno-50-2" id="__codelineno-50-2" name="__codelineno-50-2"></a><span class="c1">#</span>
</span><span id="__span-50-3"><a href="#__codelineno-50-3" id="__codelineno-50-3" name="__codelineno-50-3"></a><span class="c1">#   &lt;vCard xmlns='vcard-temp'&gt;</span>
</span><span id="__span-50-4"><a href="#__codelineno-50-4" id="__codelineno-50-4" name="__codelineno-50-4"></a><span class="c1">#     &lt;FN&gt;Conferences&lt;/FN&gt;</span>
</span><span id="__span-50-5"><a href="#__codelineno-50-5" id="__codelineno-50-5" name="__codelineno-50-5"></a><span class="c1">#     &lt;ADR&gt;</span>
</span><span id="__span-50-6"><a href="#__codelineno-50-6" id="__codelineno-50-6" name="__codelineno-50-6"></a><span class="c1">#       &lt;WORK/&gt;</span>
</span><span id="__span-50-7"><a href="#__codelineno-50-7" id="__codelineno-50-7" name="__codelineno-50-7"></a><span class="c1">#       &lt;STREET&gt;Elm Street&lt;/STREET&gt;</span>
</span><span id="__span-50-8"><a href="#__codelineno-50-8" id="__codelineno-50-8" name="__codelineno-50-8"></a><span class="c1">#     &lt;/ADR&gt;</span>
</span><span id="__span-50-9"><a href="#__codelineno-50-9" id="__codelineno-50-9" name="__codelineno-50-9"></a><span class="c1">#   &lt;/vCard&gt;</span>
</span><span id="__span-50-10"><a href="#__codelineno-50-10" id="__codelineno-50-10" name="__codelineno-50-10"></a><span class="c1">#</span>
</span><span id="__span-50-11"><a href="#__codelineno-50-11" id="__codelineno-50-11" name="__codelineno-50-11"></a><span class="c1"># is translated to:</span>
</span><span id="__span-50-12"><a href="#__codelineno-50-12" id="__codelineno-50-12" name="__codelineno-50-12"></a><span class="c1">#</span>
</span><span id="__span-50-13"><a href="#__codelineno-50-13" id="__codelineno-50-13" name="__codelineno-50-13"></a><span class="nt">vcard</span><span class="p">:</span>
</span><span id="__span-50-14"><a href="#__codelineno-50-14" id="__codelineno-50-14" name="__codelineno-50-14"></a><span class="w">  </span><span class="nt">fn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Conferences</span>
</span><span id="__span-50-15"><a href="#__codelineno-50-15" id="__codelineno-50-15" name="__codelineno-50-15"></a><span class="w">  </span><span class="nt">adr</span><span class="p">:</span>
</span><span id="__span-50-16"><a href="#__codelineno-50-16" id="__codelineno-50-16" name="__codelineno-50-16"></a><span class="w">    </span><span class="p p-Indicator">-</span>
</span><span id="__span-50-17"><a href="#__codelineno-50-17" id="__codelineno-50-17" name="__codelineno-50-17"></a><span class="w">      </span><span class="nt">work</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-50-18"><a href="#__codelineno-50-18" id="__codelineno-50-18" name="__codelineno-50-18"></a><span class="w">      </span><span class="nt">street</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Elm Street</span>
</span></code></pre></div>
</li>
</ul>
<p><strong>Available options for <code>ldap</code> backend:</strong></p>
<ul>
<li>
<p><strong>ldap_backups</strong><br/>
Same as top-level <a href="../toplevel/#ldap_backups">ldap_backups</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_base</strong><br/>
Same as top-level <a href="../toplevel/#ldap_base">ldap_base</a> option, but applied to this module only.</p>
</li>
<li>
<p><strong>ldap_deref_aliases</strong><br/>
Same as top-level <a href="../toplevel/#ldap_deref_aliases">ldap_deref_aliases</a> option, but applied to this
module only.</p>
</li>
<li>
<p><strong>ldap_encrypt</strong><br/>
Same as top-level <a href="../toplevel/#ldap_encrypt">ldap_encrypt</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_filter</strong><br/>
Same as top-level <a href="../toplevel/#ldap_filter">ldap_filter</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_password</strong><br/>
Same as top-level <a href="../toplevel/#ldap_password">ldap_password</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_port</strong><br/>
Same as top-level <a href="../toplevel/#ldap_port">ldap_port</a> option, but applied to this module only.</p>
</li>
<li>
<p><strong>ldap_rootdn</strong><br/>
Same as top-level <a href="../toplevel/#ldap_rootdn">ldap_rootdn</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_search_fields</strong>: <code>{Name: Attribute, ...}</code><br/>
This option defines the search form and the LDAP attributes to search
within. <code>Name</code> is the name of a search form field which will be
automatically translated by using the translation files (see
<code>msgs/*.msg</code> for available words). <code>Attribute</code> is the LDAP attribute or
the pattern <code>%u</code>.</p>
<p><strong>Examples</strong>:</p>
<p>The default is:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-51-1"><a href="#__codelineno-51-1" id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="nt">User</span><span class="p">:</span><span class="w"> </span><span class="s">"%u"</span>
</span><span id="__span-51-2"><a href="#__codelineno-51-2" id="__codelineno-51-2" name="__codelineno-51-2"></a><span class="s">"Full</span><span class="nv"> </span><span class="s">Name"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">displayName</span>
</span><span id="__span-51-3"><a href="#__codelineno-51-3" id="__codelineno-51-3" name="__codelineno-51-3"></a><span class="s">"Given</span><span class="nv"> </span><span class="s">Name"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">givenName</span>
</span><span id="__span-51-4"><a href="#__codelineno-51-4" id="__codelineno-51-4" name="__codelineno-51-4"></a><span class="s">"Middle</span><span class="nv"> </span><span class="s">Name"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">initials</span>
</span><span id="__span-51-5"><a href="#__codelineno-51-5" id="__codelineno-51-5" name="__codelineno-51-5"></a><span class="s">"Family</span><span class="nv"> </span><span class="s">Name"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sn</span>
</span><span id="__span-51-6"><a href="#__codelineno-51-6" id="__codelineno-51-6" name="__codelineno-51-6"></a><span class="nt">Nickname</span><span class="p">:</span><span class="w"> </span><span class="s">"%u"</span>
</span><span id="__span-51-7"><a href="#__codelineno-51-7" id="__codelineno-51-7" name="__codelineno-51-7"></a><span class="nt">Birthday</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">birthDay</span>
</span><span id="__span-51-8"><a href="#__codelineno-51-8" id="__codelineno-51-8" name="__codelineno-51-8"></a><span class="nt">Country</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">c</span>
</span><span id="__span-51-9"><a href="#__codelineno-51-9" id="__codelineno-51-9" name="__codelineno-51-9"></a><span class="nt">City</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">l</span>
</span><span id="__span-51-10"><a href="#__codelineno-51-10" id="__codelineno-51-10" name="__codelineno-51-10"></a><span class="nt">Email</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mail</span>
</span><span id="__span-51-11"><a href="#__codelineno-51-11" id="__codelineno-51-11" name="__codelineno-51-11"></a><span class="s">"Organization</span><span class="nv"> </span><span class="s">Name"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">o</span>
</span><span id="__span-51-12"><a href="#__codelineno-51-12" id="__codelineno-51-12" name="__codelineno-51-12"></a><span class="s">"Organization</span><span class="nv"> </span><span class="s">Unit"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ou</span>
</span></code></pre></div>
</li>
<li>
<p><strong>ldap_search_reported</strong>: <code>{SearchField: VcardField}, ...}</code><br/>
This option defines which search fields should be reported.
<code>SearchField</code> is the name of a search form field which will be
automatically translated by using the translation files (see
<code>msgs/*.msg</code> for available words). <code>VcardField</code> is the vCard field name
defined in the <code>ldap_vcard_map</code> option.</p>
<p><strong>Examples</strong>:</p>
<p>The default is:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-52-1"><a href="#__codelineno-52-1" id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="s">"Full</span><span class="nv"> </span><span class="s">Name"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FN</span>
</span><span id="__span-52-2"><a href="#__codelineno-52-2" id="__codelineno-52-2" name="__codelineno-52-2"></a><span class="s">"Given</span><span class="nv"> </span><span class="s">Name"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FIRST</span>
</span><span id="__span-52-3"><a href="#__codelineno-52-3" id="__codelineno-52-3" name="__codelineno-52-3"></a><span class="s">"Middle</span><span class="nv"> </span><span class="s">Name"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MIDDLE</span>
</span><span id="__span-52-4"><a href="#__codelineno-52-4" id="__codelineno-52-4" name="__codelineno-52-4"></a><span class="s">"Family</span><span class="nv"> </span><span class="s">Name"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LAST</span>
</span><span id="__span-52-5"><a href="#__codelineno-52-5" id="__codelineno-52-5" name="__codelineno-52-5"></a><span class="s">"Nickname"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NICKNAME</span>
</span><span id="__span-52-6"><a href="#__codelineno-52-6" id="__codelineno-52-6" name="__codelineno-52-6"></a><span class="s">"Birthday"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BDAY</span>
</span><span id="__span-52-7"><a href="#__codelineno-52-7" id="__codelineno-52-7" name="__codelineno-52-7"></a><span class="s">"Country"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CTRY</span>
</span><span id="__span-52-8"><a href="#__codelineno-52-8" id="__codelineno-52-8" name="__codelineno-52-8"></a><span class="s">"City"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LOCALITY</span>
</span><span id="__span-52-9"><a href="#__codelineno-52-9" id="__codelineno-52-9" name="__codelineno-52-9"></a><span class="s">"Email"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EMAIL</span>
</span><span id="__span-52-10"><a href="#__codelineno-52-10" id="__codelineno-52-10" name="__codelineno-52-10"></a><span class="s">"Organization</span><span class="nv"> </span><span class="s">Name"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ORGNAME</span>
</span><span id="__span-52-11"><a href="#__codelineno-52-11" id="__codelineno-52-11" name="__codelineno-52-11"></a><span class="s">"Organization</span><span class="nv"> </span><span class="s">Unit"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ORGUNIT</span>
</span></code></pre></div>
</li>
<li>
<p><strong>ldap_servers</strong><br/>
Same as top-level <a href="../toplevel/#ldap_servers">ldap_servers</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_tls_cacertfile</strong><br/>
Same as top-level <a href="../toplevel/#ldap_tls_cacertfile">ldap_tls_cacertfile</a> option, but applied to this
module only.</p>
</li>
<li>
<p><strong>ldap_tls_certfile</strong><br/>
Same as top-level <a href="../toplevel/#ldap_tls_certfile">ldap_tls_certfile</a> option, but applied to this
module only.</p>
</li>
<li>
<p><strong>ldap_tls_depth</strong><br/>
Same as top-level <a href="../toplevel/#ldap_tls_depth">ldap_tls_depth</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_tls_verify</strong><br/>
Same as top-level <a href="../toplevel/#ldap_tls_verify">ldap_tls_verify</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>ldap_uids</strong><br/>
Same as top-level <a href="../toplevel/#ldap_uids">ldap_uids</a> option, but applied to this module only.</p>
</li>
<li>
<p><strong>ldap_vcard_map</strong>: <code>{Name: {Pattern, LDAPattributes}, ...}</code><br/>
With this option you can set the table that maps LDAP attributes to
vCard fields. <code>Name</code> is the type name of the vCard as defined in <a href="https://tools.ietf.org/html/rfc2426">RFC
2426</a>. <code>Pattern</code> is a string which
contains pattern variables <code>%u</code>, <code>%d</code> or <code>%s</code>. <code>LDAPattributes</code> is the
list containing LDAP attributes. The pattern variables <code>%s</code> will be
sequentially replaced with the values of LDAP attributes from
<code>List_of_LDAP_attributes</code>, <code>%u</code> will be replaced with the user part
of a JID, and <code>%d</code> will be replaced with the domain part of a JID.</p>
<p><strong>Examples</strong>:</p>
<p>The default is:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-53-1"><a href="#__codelineno-53-1" id="__codelineno-53-1" name="__codelineno-53-1"></a><span class="nt">NICKNAME</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%u"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[]}</span>
</span><span id="__span-53-2"><a href="#__codelineno-53-2" id="__codelineno-53-2" name="__codelineno-53-2"></a><span class="nt">FN</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">displayName</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-3"><a href="#__codelineno-53-3" id="__codelineno-53-3" name="__codelineno-53-3"></a><span class="nt">LAST</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">sn</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-4"><a href="#__codelineno-53-4" id="__codelineno-53-4" name="__codelineno-53-4"></a><span class="nt">FIRST</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">givenName</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-5"><a href="#__codelineno-53-5" id="__codelineno-53-5" name="__codelineno-53-5"></a><span class="nt">MIDDLE</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">initials</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-6"><a href="#__codelineno-53-6" id="__codelineno-53-6" name="__codelineno-53-6"></a><span class="nt">ORGNAME</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">o</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-7"><a href="#__codelineno-53-7" id="__codelineno-53-7" name="__codelineno-53-7"></a><span class="nt">ORGUNIT</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">ou</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-8"><a href="#__codelineno-53-8" id="__codelineno-53-8" name="__codelineno-53-8"></a><span class="nt">CTRY</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">c</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-9"><a href="#__codelineno-53-9" id="__codelineno-53-9" name="__codelineno-53-9"></a><span class="nt">LOCALITY</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">l</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-10"><a href="#__codelineno-53-10" id="__codelineno-53-10" name="__codelineno-53-10"></a><span class="nt">STREET</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">street</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-11"><a href="#__codelineno-53-11" id="__codelineno-53-11" name="__codelineno-53-11"></a><span class="nt">REGION</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">st</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-12"><a href="#__codelineno-53-12" id="__codelineno-53-12" name="__codelineno-53-12"></a><span class="nt">PCODE</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">postalCode</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-13"><a href="#__codelineno-53-13" id="__codelineno-53-13" name="__codelineno-53-13"></a><span class="nt">TITLE</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">title</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-14"><a href="#__codelineno-53-14" id="__codelineno-53-14" name="__codelineno-53-14"></a><span class="nt">URL</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">labeleduri</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-15"><a href="#__codelineno-53-15" id="__codelineno-53-15" name="__codelineno-53-15"></a><span class="nt">DESC</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">description</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-16"><a href="#__codelineno-53-16" id="__codelineno-53-16" name="__codelineno-53-16"></a><span class="nt">TEL</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">telephoneNumber</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-17"><a href="#__codelineno-53-17" id="__codelineno-53-17" name="__codelineno-53-17"></a><span class="nt">EMAIL</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">mail</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-18"><a href="#__codelineno-53-18" id="__codelineno-53-18" name="__codelineno-53-18"></a><span class="nt">BDAY</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">birthDay</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-19"><a href="#__codelineno-53-19" id="__codelineno-53-19" name="__codelineno-53-19"></a><span class="nt">ROLE</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">employeeType</span><span class="p p-Indicator">]}</span>
</span><span id="__span-53-20"><a href="#__codelineno-53-20" id="__codelineno-53-20" name="__codelineno-53-20"></a><span class="nt">PHOTO</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">"%s"</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">jpegPhoto</span><span class="p p-Indicator">]}</span>
</span></code></pre></div>
</li>
</ul>
<p><strong>Available options for <code>mnesia</code> backend:</strong></p>
<ul>
<li><strong>search_all_hosts</strong>: <code>true | false</code><br/>
Whether to perform search on all virtual hosts or not. The default value
is <code>true</code>.</li>
</ul>
<a id="mod-vcard-xupdate"></a><h2 id="mod_vcard_xupdate">mod_vcard_xupdate<a class="headerlink" href="#mod_vcard_xupdate" title="Permanent link">¶</a></h2>
<p>The user’s client can store an avatar in the user vCard. The vCard-Based
Avatars protocol (<a href="https://xmpp.org/extensions/xep-0153.html">XEP-0153</a>)
provides a method for clients to inform the contacts what is the avatar
hash value. However, simple or small clients may not implement that
protocol.</p>
<p>If this module is enabled, all the outgoing client presence stanzas get
automatically the avatar hash on behalf of the client. So, the contacts
receive the presence stanzas with the <code>Update Data</code> described in
<a href="https://xmpp.org/extensions/xep-0153.html">XEP-0153</a> as if the client
would had inserted it itself. If the client had already included such
element in the presence stanza, it is replaced with the element
generated by ejabberd.</p>
<p>By enabling this module, each vCard modification produces a hash
recalculation, and each presence sent by a client produces hash
retrieval and a presence stanza rewrite. For this reason, enabling this
module will introduce a computational overhead in servers with clients
that change frequently their presence. However, the overhead is
significantly reduced by the use of caching, so you probably don’t want
to set <code>use_cache</code> to <code>false</code>.</p>
<p>The module depends on <a href="#mod_vcard">mod_vcard</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Nowadays <a href="https://xmpp.org/extensions/xep-0153.html">XEP-0153</a> is used
mostly as "read-only", i.e. modern clients don’t publish their avatars
inside vCards. Thus in the majority of cases the module is only used
along with <a href="#mod_avatar">mod_avatar</a> for providing backward compatibility.</p>
</div>
<p><strong>Available options:</strong></p>
<ul>
<li>
<p><strong>cache_life_time</strong>: <code>timeout()</code><br/>
Same as top-level <a href="../toplevel/#cache_life_time">cache_life_time</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_missed</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#cache_missed">cache_missed</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>cache_size</strong>: <code>pos_integer() | infinity</code><br/>
Same as top-level <a href="../toplevel/#cache_size">cache_size</a> option, but applied to this module
only.</p>
</li>
<li>
<p><strong>use_cache</strong>: <code>true | false</code><br/>
Same as top-level <a href="../toplevel/#use_cache">use_cache</a> option, but applied to this module only.</p>
</li>
</ul>
<a id="mod-version"></a><h2 id="mod_version">mod_version<a class="headerlink" href="#mod_version" title="Permanent link">¶</a></h2>
<p>This module implements <a href="https://xmpp.org/extensions/xep-0092.html">XEP-0092: Software
Version</a>. Consequently, it
answers ejabberd’s version when queried.</p>
<p><strong>Available options:</strong></p>
<ul>
<li><strong>show_os</strong>: <code>true | false</code><br/>
Should the operating system be revealed or not. The default value is
<code>true</code>.</li>
</ul>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../toplevel/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Top-Level Options">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Top-Level Options
              </div>
            </div>
          </a>
        
        
          
          <a href="../../guide/" class="md-footer__link md-footer__link--next" aria-label="Next: Advanced ejabberd Administration">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Advanced ejabberd Administration
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2008 - 2025 <a href="https://www.process-one.net" target="_blank" rel="noopener">ProcessOne</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/processone/ejabberd" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/processone/docker-ejabberd/" target="_blank" rel="noopener" title="Docker Registry" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
    
    
      
    
    
    
    <a href="https://social.process-one.net/@ejabberd" target="_blank" rel="noopener me" title="Mastodon" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.5 102.5 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5m-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.process-one.net/" target="_blank" rel="noopener" title="ProcessOne Website" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m225.8 468.2-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144 39.4-7.6 79.7 1.5 111.8 24.1 9 6.4 17.4 13.8 25 22.3 4.2-4.8 8.7-9.2 13.5-13.3 3.7-3.2 7.5-6.2 11.5-9 32.1-22.6 72.4-31.7 111.8-24.2C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9M239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20-.1-.1c-23.1-25.9-58-37.7-92-31.2-46.6 8.9-80.2 49.5-80.2 96.9v3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268a102.7 102.7 0 0 0 32.8-75.2v-3.3c0-47.3-33.6-88-80.1-96.9-34-6.5-69 5.4-92 31.2l-.1.1-.1.1-17.8 20c-.3.4-.7.7-1 1.1-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "toc.follow", "navigation.top", "navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.footer", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotate", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>